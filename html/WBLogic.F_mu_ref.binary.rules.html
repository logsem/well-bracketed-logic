<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../index.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">WBLogic.F_mu_ref.binary.rules</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.algebra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">excl</span> <span class="id" title="library">auth</span> <span class="id" title="library">frac</span> <span class="id" title="library">agree</span> <span class="id" title="library">gmap</span> <span class="id" title="library">list</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">language</span> <span class="id" title="library">ectx_language</span> <span class="id" title="library">ectxi_language</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">lifting</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">WBLogic.F_mu_ref</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="WBLogic.F_mu_ref.wp_rules.html#"><span class="id" title="library">wp_rules</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">options</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">uPred</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="specN" class="idref" href="#specN"><span class="id" title="definition">specN</span></a> := <span class="id" title="definition">nroot</span> <span class="id" title="notation">.@</span> "spec".<br/>

<br/>
</div>

<div class="doc">
The CMRA for the heap of the specification. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="tpoolUR" class="idref" href="#tpoolUR"><span class="id" title="definition">tpoolUR</span></a> : <span class="id" title="record">ucmra</span> := <span class="id" title="definition">gmapUR</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> (<span class="id" title="definition">exclR</span> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.exprO"><span class="id" title="definition">exprO</span></a>).<br/>
<span class="id" title="keyword">Definition</span> <a id="heapUR" class="idref" href="#heapUR"><span class="id" title="definition">heapUR</span></a> (<a id="L:1" class="idref" href="#L:1"><span class="id" title="binder">L</span></a> <a id="V:2" class="idref" href="#V:2"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="H:4" class="idref" href="#H:4"><span class="id" title="binder">Countable</span></a> <a id="H:4" class="idref" href="#H:4"><span class="id" title="binder">L</span></a>} : <span class="id" title="record">ucmra</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">gmapUR</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#L:1"><span class="id" title="variable">L</span></a> (<span class="id" title="definition">prodR</span> <span class="id" title="definition">fracR</span> (<span class="id" title="definition">agreeR</span> (<span class="id" title="abbreviation">leibnizO</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#V:2"><span class="id" title="variable">V</span></a>))).<br/>
<span class="id" title="keyword">Definition</span> <a id="cfgUR" class="idref" href="#cfgUR"><span class="id" title="definition">cfgUR</span></a> := <span class="id" title="definition">prodUR</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpoolUR"><span class="id" title="definition">tpoolUR</span></a> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapUR"><span class="id" title="definition">heapUR</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.loc"><span class="id" title="definition">loc</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.val"><span class="id" title="inductive">val</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="to_tpool_go" class="idref" href="#to_tpool_go"><span class="id" title="definition">to_tpool_go</span></a> (<a id="i:5" class="idref" href="#i:5"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="tp:6" class="idref" href="#tp:6"><span class="id" title="binder">tp</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.expr"><span class="id" title="inductive">expr</span></a>) : <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpoolUR"><span class="id" title="definition">tpoolUR</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:6"><span class="id" title="variable">tp</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="id" title="notation">∅</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tp</span> =&gt; <span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#i:5"><span class="id" title="variable">i</span></a><span class="id" title="notation">:=</span><span class="id" title="constructor">Excl</span> <span class="id" title="var">e</span><span class="id" title="notation">]&gt;(</span><span class="id" title="notation">to_tpool_go</span> <span class="id" title="notation">(</span><span class="id" title="notation">S</span> <span class="id" title="notation">i</span><span class="id" title="notation">)</span> <span class="id" title="notation">tp</span><span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="to_tpool" class="idref" href="#to_tpool"><span class="id" title="definition">to_tpool</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpoolUR"><span class="id" title="definition">tpoolUR</span></a> := <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool_go"><span class="id" title="definition">to_tpool_go</span></a> 0.<br/>
<span class="id" title="keyword">Definition</span> <a id="to_heap" class="idref" href="#to_heap"><span class="id" title="definition">to_heap</span></a> {<a id="L:9" class="idref" href="#L:9"><span class="id" title="binder">L</span></a> <a id="V:10" class="idref" href="#V:10"><span class="id" title="binder">V</span></a>} `{<a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">Countable</span></a> <a id="H:12" class="idref" href="#H:12"><span class="id" title="binder">L</span></a>} : <span class="id" title="record">gmap</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#L:9"><span class="id" title="variable">L</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#V:10"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapUR"><span class="id" title="definition">heapUR</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#L:9"><span class="id" title="variable">L</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#V:10"><span class="id" title="variable">V</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">fmap</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:13" class="idref" href="#v:13"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">Qp</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="definition">to_agree</span> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:13"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <span class="id" title="abbreviation">leibnizO</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#V:10"><span class="id" title="variable">V</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>

<br/>
</div>

<div class="doc">
The CMRA for the thread pool. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="cfgSG" class="idref" href="#cfgSG"><span class="id" title="record">cfgSG</span></a> <a id="08441172cd4c14450ee9e66c55932a87" class="idref" href="#08441172cd4c14450ee9e66c55932a87"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">CFGSG</span> { <a id="cfg_inG" class="idref" href="#cfg_inG"><span class="id" title="projection">cfg_inG</span></a> :: <span class="id" title="class">inG</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#08441172cd4c14450ee9e66c55932a87"><span class="id" title="variable">Σ</span></a> (<span class="id" title="definition">authR</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#cfgUR"><span class="id" title="definition">cfgUR</span></a>); <a id="cfg_name" class="idref" href="#cfg_name"><span class="id" title="projection">cfg_name</span></a> : <span class="id" title="definition">gname</span> }.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="definitionsS" class="idref" href="#definitionsS"><span class="id" title="section">definitionsS</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:19" class="idref" href="#H:19"><span class="id" title="binder">cfgSG</span></a> <a id="8b13b958e79b112c1b4fdea541acbd8a" class="idref" href="#8b13b958e79b112c1b4fdea541acbd8a"><span class="id" title="binder"><span id="H:19" class="id">Σ</span></span></a>, <a id="invGS0:20" class="idref" href="#invGS0:20"><span class="id" title="binder">invGS</span></a> <a id="invGS0:20" class="idref" href="#invGS0:20"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="heapS_mapsto" class="idref" href="#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a> (<a id="l:21" class="idref" href="#l:21"><span class="id" title="binder">l</span></a> : <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.loc"><span class="id" title="definition">loc</span></a>) (<a id="q:22" class="idref" href="#q:22"><span class="id" title="binder">q</span></a> : <span class="id" title="record">Qp</span>) (<a id="v:23" class="idref" href="#v:23"><span class="id" title="binder">v</span></a>: <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.val"><span class="id" title="inductive">val</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#8983bd3dd80ced97bdc81fa5a0081152"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">own</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#cfg_name"><span class="id" title="method">cfg_name</span></a> (<span class="id" title="notation">◯</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="definition">ε</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">{[</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:21"><span class="id" title="variable">l</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q:22"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="definition">to_agree</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:23"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="notation">]}</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="tpool_mapsto" class="idref" href="#tpool_mapsto"><span class="id" title="definition">tpool_mapsto</span></a> (<a id="j:24" class="idref" href="#j:24"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="e:25" class="idref" href="#e:25"><span class="id" title="binder">e</span></a>: <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.expr"><span class="id" title="inductive">expr</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#8983bd3dd80ced97bdc81fa5a0081152"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">own</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#cfg_name"><span class="id" title="method">cfg_name</span></a> (<span class="id" title="notation">◯</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">{[</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:24"><span class="id" title="variable">j</span></a> <span class="id" title="notation">:=</span> <span class="id" title="constructor">Excl</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:25"><span class="id" title="variable">e</span></a> <span class="id" title="notation">]}</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="notation">∅</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="spec_inv" class="idref" href="#spec_inv"><span class="id" title="definition">spec_inv</span></a> (<a id="5887ff30c3475dc86b5d5aeb60b7c453" class="idref" href="#5887ff30c3475dc86b5d5aeb60b7c453"><span class="id" title="binder">ρ</span></a> : <span class="id" title="definition">cfg</span> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref_lang"><span class="id" title="definition">F_mu_ref_lang</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#8983bd3dd80ced97bdc81fa5a0081152"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">∃</span> <a id="tp:27" class="idref" href="#tp:27"><span class="id" title="binder">tp</span></a> <a id="a495c8a53f846c31d2ded0ea4db1b92c" class="idref" href="#a495c8a53f846c31d2ded0ea4db1b92c"><span class="id" title="binder">σ</span></a><span class="id" title="notation">,</span> <span class="id" title="definition">own</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#cfg_name"><span class="id" title="method">cfg_name</span></a> (<span class="id" title="notation">●</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:27"><span class="id" title="variable">tp</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="definition">to_heap</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#a495c8a53f846c31d2ded0ea4db1b92c"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span><span class="id" title="inductive">rtc</span> <span class="id" title="definition">erased_step</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#5887ff30c3475dc86b5d5aeb60b7c453"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:27"><span class="id" title="variable">tp</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#a495c8a53f846c31d2ded0ea4db1b92c"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">⌝</span>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="spec_ctx" class="idref" href="#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#8983bd3dd80ced97bdc81fa5a0081152"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">∃</span> <a id="4681d5e65246abc75ea2cae3b2ff4a8b" class="idref" href="#4681d5e65246abc75ea2cae3b2ff4a8b"><span class="id" title="binder">ρ</span></a><span class="id" title="notation">,</span> <span class="id" title="definition">inv</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_inv"><span class="id" title="definition">spec_inv</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#4681d5e65246abc75ea2cae3b2ff4a8b"><span class="id" title="variable">ρ</span></a>))%<span class="id" title="var">I</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="heapS_mapsto_timeless" class="idref" href="#heapS_mapsto_timeless"><span class="id" title="instance">heapS_mapsto_timeless</span></a> <a id="l:30" class="idref" href="#l:30"><span class="id" title="binder">l</span></a> <a id="q:31" class="idref" href="#q:31"><span class="id" title="binder">q</span></a> <a id="v:32" class="idref" href="#v:32"><span class="id" title="binder">v</span></a> : <span class="id" title="class">Timeless</span> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:30"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q:31"><span class="id" title="variable">q</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:32"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="spec_ctx_persistent" class="idref" href="#spec_ctx_persistent"><span class="id" title="instance">spec_ctx_persistent</span></a> : <span class="id" title="class">Persistent</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#definitionsS"><span class="id" title="section">definitionsS</span></a>.<br/>
<span class="id" title="keyword">Global Typeclasses Opaque</span> <span class="id" title="var">heapS_mapsto</span> <span class="id" title="var">tpool_mapsto</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="e730e42c5e8de925c5934d80eba35f6f" class="idref" href="#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">&quot;</span></a>l ↦ₛ{ q } v" := (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "l  ↦ₛ{ q }  v") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="0326014f985dcbdf069e6962e826748b" class="idref" href="#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">&quot;</span></a>l ↦ₛ v" := (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a> <span class="id" title="var">l</span> 1 <span class="id" title="var">v</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="d9c4b185ae99f60a4ff1e8997ef210df" class="idref" href="#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">&quot;</span></a>j ⤇ e" := (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_mapsto"><span class="id" title="definition">tpool_mapsto</span></a> <span class="id" title="var">j</span> <span class="id" title="var">e</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">iAsimpl</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ (<span class="id" title="var">_</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> ?<span class="id" title="var">e</span>)%<span class="id" title="var">I</span> ] =&gt; <span class="id" title="tactic">progress</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">evar</span> (<span class="id" title="var">e'</span>:<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.expr"><span class="id" title="inductive">expr</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">e'</span>) <span class="id" title="keyword">as</span> -&gt;; [<span class="id" title="var">asimpl</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">e'</span>; <span class="id" title="tactic">reflexivity</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">e'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">e'</span>)<br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="notation">WP</span> ?<span class="id" title="var">e</span> <span class="id" title="notation">@</span> <span class="id" title="var">_</span> <span class="id" title="notation">{{</span> <span class="id" title="var">_</span> <span class="id" title="notation">}}</span>%<span class="id" title="var">I</span> ] =&gt; <span class="id" title="tactic">progress</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">evar</span> (<span class="id" title="var">e'</span>:<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.expr"><span class="id" title="inductive">expr</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">e'</span>) <span class="id" title="keyword">as</span> -&gt;; [<span class="id" title="var">asimpl</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">e'</span>; <span class="id" title="tactic">reflexivity</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">e'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">e'</span>)<br/>
&nbsp;| |- <span class="id" title="keyword">context</span> [ <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> ?<span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <span class="id" title="var">_</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <span class="id" title="var">_</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <span class="id" title="var">_</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>%<span class="id" title="var">I</span> ] =&gt; <span class="id" title="tactic">progress</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">e'</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">evar</span> (<span class="id" title="var">e'</span>:<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.expr"><span class="id" title="inductive">expr</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">e'</span>) <span class="id" title="keyword">as</span> -&gt;; [<span class="id" title="var">asimpl</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">e'</span>; <span class="id" title="tactic">reflexivity</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">e'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">e'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="conversions" class="idref" href="#conversions"><span class="id" title="section">conversions</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:34" class="idref" href="#H:34"><span class="id" title="binder">cfgSG</span></a> <a id="4a3db5069015eacb9ec70510dc094686" class="idref" href="#4a3db5069015eacb9ec70510dc094686"><span class="id" title="binder"><span id="H:34" class="id">Σ</span></span></a>}.<br/>

<br/>
</div>

<div class="doc">
Conversion to tpools and back 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="to_tpool_valid" class="idref" href="#to_tpool_valid"><span class="id" title="lemma">to_tpool_valid</span></a> <a id="es:35" class="idref" href="#es:35"><span class="id" title="binder">es</span></a> : <span class="id" title="notation">✓</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#es:35"><span class="id" title="variable">es</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a>. <span class="id" title="tactic">move</span>: 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">es</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">e</span> <span class="id" title="var">es</span>]=&gt; <span class="id" title="var">n</span> //. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_valid</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tpool_lookup" class="idref" href="#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> <a id="tp:36" class="idref" href="#tp:36"><span class="id" title="binder">tp</span></a> <a id="j:37" class="idref" href="#j:37"><span class="id" title="binder">j</span></a> : <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:36"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:37"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Excl</span> <span class="id" title="notation">&lt;$&gt;</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:36"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:37"><span class="id" title="variable">j</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cut</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="i:38" class="idref" href="#i:38"><span class="id" title="binder"><span id="i:39" class="id">i</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool_go"><span class="id" title="definition">to_tpool_go</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#i:38"><span class="id" title="variable">i</span></a> <span class="id" title="var">tp</span> <span class="id" title="notation">!!</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#i:38"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">j</span><span class="id" title="notation">)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="constructor">Excl</span> <span class="id" title="notation">&lt;$&gt;</span> <span class="id" title="var">tp</span> <span class="id" title="notation">!!</span> <span class="id" title="var">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">help</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">help</span> 0). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">tp</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">e</span> <span class="id" title="var">tp</span> <span class="id" title="var">IH</span>]=&gt; //= -[|<span class="id" title="var">j</span>] <span class="id" title="var">i</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_succ_comm"><span class="id" title="lemma">Nat.add_succ_comm</span></a> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tpool_lookup_Some" class="idref" href="#tpool_lookup_Some"><span class="id" title="lemma">tpool_lookup_Some</span></a> <a id="tp:40" class="idref" href="#tp:40"><span class="id" title="binder">tp</span></a> <a id="j:41" class="idref" href="#j:41"><span class="id" title="binder">j</span></a> <a id="e:42" class="idref" href="#e:42"><span class="id" title="binder">e</span></a> : <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:40"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:41"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">Excl'</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:42"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:40"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:41"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:42"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> <span class="id" title="lemma">fmap_Some</span>. <span class="id" title="var">naive_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">tpool_lookup_Some</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="to_tpool_insert" class="idref" href="#to_tpool_insert"><span class="id" title="lemma">to_tpool_insert</span></a> <a id="tp:43" class="idref" href="#tp:43"><span class="id" title="binder">tp</span></a> <a id="j:44" class="idref" href="#j:44"><span class="id" title="binder">j</span></a> <a id="e:45" class="idref" href="#e:45"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:44"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="abbreviation">length</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:43"><span class="id" title="variable">tp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:44"><span class="id" title="variable">j</span></a><span class="id" title="notation">:=</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:45"><span class="id" title="variable">e</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:44"><span class="id" title="variable">j</span></a><span class="id" title="notation">:=</span><span class="id" title="constructor">Excl</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:45"><span class="id" title="variable">e</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">to_tpool</span> <span class="id" title="notation">tp</span><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span>: <span class="id" title="method">map_eq</span>=&gt; <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>)) <span class="id" title="keyword">as</span> [-&gt;|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> <span class="id" title="lemma">lookup_insert</span> <span class="id" title="lemma">list_lookup_insert</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> <span class="id" title="lemma">lookup_insert_ne</span> // <span class="id" title="lemma">list_lookup_insert_ne</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="to_tpool_insert'" class="idref" href="#to_tpool_insert'"><span class="id" title="lemma">to_tpool_insert'</span></a> <a id="tp:46" class="idref" href="#tp:46"><span class="id" title="binder">tp</span></a> <a id="j:47" class="idref" href="#j:47"><span class="id" title="binder">j</span></a> <a id="e:48" class="idref" href="#e:48"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:46"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:47"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:47"><span class="id" title="variable">j</span></a><span class="id" title="notation">:=</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:48"><span class="id" title="variable">e</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:47"><span class="id" title="variable">j</span></a><span class="id" title="notation">:=</span><span class="id" title="constructor">Excl</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:48"><span class="id" title="variable">e</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">to_tpool</span> <span class="id" title="notation">tp</span><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> <span class="id" title="lemma">fmap_is_Some</span> <span class="id" title="lemma">lookup_lt_is_Some</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool_insert"><span class="id" title="lemma">to_tpool_insert</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="to_tpool_snoc" class="idref" href="#to_tpool_snoc"><span class="id" title="lemma">to_tpool_snoc</span></a> <a id="tp:49" class="idref" href="#tp:49"><span class="id" title="binder">tp</span></a> <a id="e:50" class="idref" href="#e:50"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:49"><span class="id" title="variable">tp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:50"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><span class="id" title="abbreviation">length</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:49"><span class="id" title="variable">tp</span></a><span class="id" title="notation">:=</span><span class="id" title="constructor">Excl</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:50"><span class="id" title="variable">e</span></a><span class="id" title="notation">]&gt;(</span><span class="id" title="notation">to_tpool</span> <span class="id" title="notation">tp</span><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span>: <span class="id" title="method">map_eq</span>=&gt; <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Arith.Compare_dec.html#lt_eq_lt_dec"><span class="id" title="definition">lt_eq_lt_dec</span></a> <span class="id" title="var">i</span> (<span class="id" title="abbreviation">length</span> <span class="id" title="var">tp</span>)) <span class="id" title="keyword">as</span> [[?| -&gt;]|?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> <span class="id" title="lemma">lookup_app_l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> <span class="id" title="lemma">lookup_app_r</span> // <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span>; <span class="id" title="var">last</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> ?<span class="id" title="lemma">lookup_ge_None_2</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#app_length"><span class="id" title="lemma">app_length</span></a> //=;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="projection">ofe_car</span> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.exprO"><span class="id" title="definition">exprO</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.expr"><span class="id" title="inductive">expr</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tpool_singleton_included" class="idref" href="#tpool_singleton_included"><span class="id" title="lemma">tpool_singleton_included</span></a> <a id="tp:51" class="idref" href="#tp:51"><span class="id" title="binder">tp</span></a> <a id="j:52" class="idref" href="#j:52"><span class="id" title="binder">j</span></a> <a id="e:53" class="idref" href="#e:53"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:52"><span class="id" title="variable">j</span></a> <span class="id" title="notation">:=</span> <span class="id" title="constructor">Excl</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:53"><span class="id" title="variable">e</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≼</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:51"><span class="id" title="variable">tp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:51"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:52"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:53"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; /<span class="id" title="lemma">singleton_included_l</span> [<span class="id" title="var">ex</span> [/<span class="id" title="lemma">leibniz_equiv_iff</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a> <span class="id" title="lemma">fmap_Some</span>=&gt; [[<span class="id" title="var">e'</span> [-&gt; -&gt;]] /<span class="id" title="lemma">Excl_included</span> ?]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="tpool_singleton_included'" class="idref" href="#tpool_singleton_included'"><span class="id" title="lemma">tpool_singleton_included'</span></a> <a id="tp:54" class="idref" href="#tp:54"><span class="id" title="binder">tp</span></a> <a id="j:55" class="idref" href="#j:55"><span class="id" title="binder">j</span></a> <a id="e:56" class="idref" href="#e:56"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:55"><span class="id" title="variable">j</span></a> <span class="id" title="notation">:=</span> <span class="id" title="constructor">Excl</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:56"><span class="id" title="variable">e</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≼</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:54"><span class="id" title="variable">tp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool"><span class="id" title="definition">to_tpool</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:54"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:55"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="abbreviation">Excl'</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:56"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_lookup"><span class="id" title="lemma">tpool_lookup</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>=&gt; /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_singleton_included"><span class="id" title="lemma">tpool_singleton_included</span></a>=&gt; -&gt;. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#conversions"><span class="id" title="section">conversions</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="to_heap" class="idref" href="#to_heap"><span class="id" title="section">to_heap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="L:57" class="idref" href="#L:57"><span class="id" title="binder">L</span></a> <a id="V:58" class="idref" href="#V:58"><span class="id" title="binder">V</span></a> : <span class="id" title="keyword">Type</span>) `{<a id="H:60" class="idref" href="#H:60"><span class="id" title="binder">Countable</span></a> <a id="H:60" class="idref" href="#H:60"><span class="id" title="binder">L</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> σ : <span class="id" title="record">gmap</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap.L"><span class="id" title="variable">L</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap.V"><span class="id" title="variable">V</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">m</span> : <span class="id" title="record">gmap</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap.L"><span class="id" title="variable">L</span></a> <span class="id" title="definition">gname</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lookup_to_heap_None" class="idref" href="#lookup_to_heap_None"><span class="id" title="lemma">lookup_to_heap_None</span></a> <a id="3fbd57ece83e53cb608a9741d4f82202" class="idref" href="#3fbd57ece83e53cb608a9741d4f82202"><span class="id" title="binder">σ</span></a> <a id="l:62" class="idref" href="#l:62"><span class="id" title="binder">l</span></a> : <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#3fbd57ece83e53cb608a9741d4f82202"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:62"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="definition">to_heap</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#3fbd57ece83e53cb608a9741d4f82202"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:62"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="definition">to_heap</span></a> <span class="id" title="method">lookup_fmap</span>=&gt; -&gt;. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="to_heap_insert" class="idref" href="#to_heap_insert"><span class="id" title="lemma">to_heap_insert</span></a> <a id="l:63" class="idref" href="#l:63"><span class="id" title="binder">l</span></a> <a id="v:64" class="idref" href="#v:64"><span class="id" title="binder">v</span></a> <a id="6a519936d42ceba91506fb36d8af79ea" class="idref" href="#6a519936d42ceba91506fb36d8af79ea"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="definition">to_heap</span></a> (<span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:63"><span class="id" title="variable">l</span></a><span class="id" title="notation">:=</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:64"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">σ</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:63"><span class="id" title="variable">l</span></a><span class="id" title="notation">:=</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">Qp</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="definition">to_agree</span> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:64"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a><span class="id" title="abbreviation">leibnizO</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap.V"><span class="id" title="variable">V</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(</span><span class="id" title="notation">to_heap</span> <span class="id" title="notation">σ)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="definition">to_heap</span></a> <span class="id" title="lemma">fmap_insert</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="heap_singleton_included" class="idref" href="#heap_singleton_included"><span class="id" title="lemma">heap_singleton_included</span></a> <a id="4db3aad7f13a99b641352ff4d7a656fb" class="idref" href="#4db3aad7f13a99b641352ff4d7a656fb"><span class="id" title="binder">σ</span></a> <a id="l:67" class="idref" href="#l:67"><span class="id" title="binder">l</span></a> <a id="q:68" class="idref" href="#q:68"><span class="id" title="binder">q</span></a> <a id="v:69" class="idref" href="#v:69"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">{[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:67"><span class="id" title="variable">l</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q:68"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="definition">to_agree</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:69"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><span class="id" title="notation">]}</span> <span class="id" title="notation">≼</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="definition">to_heap</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#4db3aad7f13a99b641352ff4d7a656fb"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#4db3aad7f13a99b641352ff4d7a656fb"><span class="id" title="variable">σ</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:67"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:69"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">singleton_included_l</span>=&gt; -[[<span class="id" title="var">q'</span> <span class="id" title="var">av</span>] []].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="definition">to_heap</span></a> <span class="id" title="method">lookup_fmap</span> <span class="id" title="lemma">fmap_Some_equiv</span> =&gt; -[<span class="id" title="var">v'</span> [<span class="id" title="var">Hl</span> [/= -&gt; -&gt;]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt; /<span class="id" title="lemma">Some_pair_included_total_2</span> [<span class="id" title="var">_</span>] /<span class="id" title="lemma">to_agree_included</span> /<span class="id" title="lemma">leibniz_equiv_iff</span> -&gt; //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="section">to_heap</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="cfg" class="idref" href="#cfg"><span class="id" title="section">cfg</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="H:71" class="idref" href="#H:71"><span class="id" title="binder">heapIG</span></a> <a id="ac713e2c58df9c0a01be9ad130d8ea1a" class="idref" href="#ac713e2c58df9c0a01be9ad130d8ea1a"><span class="id" title="binder"><span id="H:71" class="id">Σ</span></span></a>, <a id="H0:72" class="idref" href="#H0:72"><span class="id" title="binder">cfgSG</span></a> <a id="H0:72" class="idref" href="#H0:72"><span class="id" title="binder">Σ</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#9f41730ff538bbd4faa7d2dfb8620124"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">Φ</span> : <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#9f41730ff538bbd4faa7d2dfb8620124"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> σ : <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.state"><span class="id" title="definition">state</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">e</span> : <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.expr"><span class="id" title="inductive">expr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">v</span> : <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.val"><span class="id" title="inductive">val</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">tpool_lookup</span> : <span class="id" title="var">core</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">tpool_lookup_Some</span> : <span class="id" title="var">core</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">to_tpool_insert</span> : <span class="id" title="var">core</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">to_tpool_insert'</span> : <span class="id" title="var">core</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">tpool_singleton_included</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mapstoS_agree" class="idref" href="#mapstoS_agree"><span class="id" title="lemma">mapstoS_agree</span></a> <a id="l:73" class="idref" href="#l:73"><span class="id" title="binder">l</span></a> <a id="q1:74" class="idref" href="#q1:74"><span class="id" title="binder">q1</span></a> <a id="q2:75" class="idref" href="#q2:75"><span class="id" title="binder">q2</span></a> <a id="v1:76" class="idref" href="#v1:76"><span class="id" title="binder">v1</span></a> <a id="v2:77" class="idref" href="#v2:77"><span class="id" title="binder">v2</span></a> : <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:73"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q1:74"><span class="id" title="variable">q1</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v1:76"><span class="id" title="variable">v1</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:73"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q2:75"><span class="id" title="variable">q2</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v2:77"><span class="id" title="variable">v2</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v1:76"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v2:77"><span class="id" title="variable">v2</span></a><span class="id" title="notation">⌝</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">wand_intro_r</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">left_id</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">wand_intro_r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a> -<span class="id" title="lemma">own_op</span> <span class="id" title="lemma">own_valid</span> <span class="id" title="lemma">uPred.discrete_valid</span>. <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">auth_frag_op_valid</span> -<span class="id" title="lemma">pair_op</span> <span class="id" title="lemma">singleton_op</span> -<span class="id" title="lemma">pair_op</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">pair_valid</span> <span class="id" title="lemma">singleton_valid</span> <span class="id" title="lemma">pair_valid</span> <span class="id" title="lemma">to_agree_op_valid_L</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> [<span class="id" title="var">_</span> [=]]].<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mapstoS_combine" class="idref" href="#mapstoS_combine"><span class="id" title="lemma">mapstoS_combine</span></a> <a id="l:78" class="idref" href="#l:78"><span class="id" title="binder">l</span></a> <a id="q1:79" class="idref" href="#q1:79"><span class="id" title="binder">q1</span></a> <a id="q2:80" class="idref" href="#q2:80"><span class="id" title="binder">q2</span></a> <a id="v1:81" class="idref" href="#v1:81"><span class="id" title="binder">v1</span></a> <a id="v2:82" class="idref" href="#v2:82"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:78"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q1:79"><span class="id" title="variable">q1</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v1:81"><span class="id" title="variable">v1</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:78"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q2:80"><span class="id" title="variable">q2</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v2:82"><span class="id" title="variable">v2</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:78"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q1:79"><span class="id" title="variable">q1</span></a> <span class="id" title="notation">+</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q2:80"><span class="id" title="variable">q2</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v1:81"><span class="id" title="variable">v1</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v1:81"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v2:82"><span class="id" title="variable">v2</span></a><span class="id" title="notation">⌝</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hl1 Hl2". <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#mapstoS_agree"><span class="id" title="lemma">mapstoS_agree</span></a> <span class="id" title="notation">with</span> "Hl1 Hl2"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a>. <span class="id" title="var">iCombine</span> "Hl1 Hl2" <span class="id" title="keyword">as</span> "Hl". <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mapstoS_valid" class="idref" href="#mapstoS_valid"><span class="id" title="lemma">mapstoS_valid</span></a> <a id="l:83" class="idref" href="#l:83"><span class="id" title="binder">l</span></a> <a id="q:84" class="idref" href="#q:84"><span class="id" title="binder">q</span></a> <a id="v:85" class="idref" href="#v:85"><span class="id" title="binder">v</span></a> : <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:83"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q:84"><span class="id" title="variable">q</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:85"><span class="id" title="variable">v</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">✓</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q:84"><span class="id" title="variable">q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a> <span class="id" title="lemma">own_valid</span> !<span class="id" title="lemma">discrete_valid</span> <span class="id" title="lemma">auth_frag_valid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">pure_mono</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">_</span> []%<span class="id" title="lemma">singleton_valid</span>]; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="mapstoS_valid_2" class="idref" href="#mapstoS_valid_2"><span class="id" title="lemma">mapstoS_valid_2</span></a> <a id="l:86" class="idref" href="#l:86"><span class="id" title="binder">l</span></a> <a id="q1:87" class="idref" href="#q1:87"><span class="id" title="binder">q1</span></a> <a id="q2:88" class="idref" href="#q2:88"><span class="id" title="binder">q2</span></a> <a id="v1:89" class="idref" href="#v1:89"><span class="id" title="binder">v1</span></a> <a id="v2:90" class="idref" href="#v2:90"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:86"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q1:87"><span class="id" title="variable">q1</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v1:89"><span class="id" title="variable">v1</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:86"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q2:88"><span class="id" title="variable">q2</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v2:90"><span class="id" title="variable">v2</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">✓</span> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q1:87"><span class="id" title="variable">q1</span></a> <span class="id" title="notation">+</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q2:88"><span class="id" title="variable">q2</span></a>)%<span class="id" title="var">Qp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "H1 H2". <span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#mapstoS_combine"><span class="id" title="lemma">mapstoS_combine</span></a> <span class="id" title="notation">with</span> "H1 H2"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[? -&gt;]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#mapstoS_valid"><span class="id" title="lemma">mapstoS_valid</span></a> <span class="id" title="var">l</span> <span class="id" title="var">_</span> <span class="id" title="var">v2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_insert" class="idref" href="#step_insert"><span class="id" title="lemma">step_insert</span></a> <a id="K:91" class="idref" href="#K:91"><span class="id" title="binder">K</span></a> <a id="tp:92" class="idref" href="#tp:92"><span class="id" title="binder">tp</span></a> <a id="j:93" class="idref" href="#j:93"><span class="id" title="binder">j</span></a> <a id="e:94" class="idref" href="#e:94"><span class="id" title="binder">e</span></a> <a id="781cc6ac800ff5ee4132feeb1e847894" class="idref" href="#781cc6ac800ff5ee4132feeb1e847894"><span class="id" title="binder">σ</span></a> <a id="ed54ea7476314d01020e21d21e148dd1" class="idref" href="#ed54ea7476314d01020e21d21e148dd1"><span class="id" title="binder">κ</span></a> <a id="e':97" class="idref" href="#e':97"><span class="id" title="binder">e'</span></a> <a id="3e715f2a25d8d99f6506c5c56fd4e68a" class="idref" href="#3e715f2a25d8d99f6506c5c56fd4e68a"><span class="id" title="binder">σ'</span></a> <a id="efs:99" class="idref" href="#efs:99"><span class="id" title="binder">efs</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:92"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:93"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:91"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:94"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.head_step"><span class="id" title="inductive">head_step</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:94"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#781cc6ac800ff5ee4132feeb1e847894"><span class="id" title="variable">σ</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#ed54ea7476314d01020e21d21e148dd1"><span class="id" title="variable">κ</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e':97"><span class="id" title="variable">e'</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#3e715f2a25d8d99f6506c5c56fd4e68a"><span class="id" title="variable">σ'</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#efs:99"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">erased_step</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:92"><span class="id" title="variable">tp</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#781cc6ac800ff5ee4132feeb1e847894"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:93"><span class="id" title="variable">j</span></a><span class="id" title="notation">:=</span><span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:91"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e':97"><span class="id" title="variable">e'</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#efs:99"><span class="id" title="variable">efs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#3e715f2a25d8d99f6506c5c56fd4e68a"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> -(<span class="id" title="lemma">take_drop_middle</span> <span class="id" title="var">tp</span> <span class="id" title="var">j</span> (<span class="id" title="definition">fill</span> <span class="id" title="var">K</span> <span class="id" title="var">e</span>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">insert_app_r_alt</span> <span class="id" title="lemma">take_length_le</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> /=;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="lemma">lookup_lt_Some</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.lt_le_incl"><span class="id" title="lemma">Nat.lt_le_incl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<span class="id" title="lemma">assoc_L</span> <span class="id" title="notation">(++)</span>) /=. <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">step_atomic</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">Ectx_step'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_insert_no_fork" class="idref" href="#step_insert_no_fork"><span class="id" title="lemma">step_insert_no_fork</span></a> <a id="K:100" class="idref" href="#K:100"><span class="id" title="binder">K</span></a> <a id="tp:101" class="idref" href="#tp:101"><span class="id" title="binder">tp</span></a> <a id="j:102" class="idref" href="#j:102"><span class="id" title="binder">j</span></a> <a id="e:103" class="idref" href="#e:103"><span class="id" title="binder">e</span></a> <a id="241996a55dbeb0df3f6494a745503c42" class="idref" href="#241996a55dbeb0df3f6494a745503c42"><span class="id" title="binder">σ</span></a> <a id="c2d9f28ffbfab057f16f598d1422a661" class="idref" href="#c2d9f28ffbfab057f16f598d1422a661"><span class="id" title="binder">κ</span></a> <a id="e':106" class="idref" href="#e':106"><span class="id" title="binder">e'</span></a> <a id="97b64e2b6e1e48f62ae32d623f37dcdc" class="idref" href="#97b64e2b6e1e48f62ae32d623f37dcdc"><span class="id" title="binder">σ'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:101"><span class="id" title="variable">tp</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:102"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:100"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:103"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.head_step"><span class="id" title="inductive">head_step</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:103"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#241996a55dbeb0df3f6494a745503c42"><span class="id" title="variable">σ</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#c2d9f28ffbfab057f16f598d1422a661"><span class="id" title="variable">κ</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e':106"><span class="id" title="variable">e'</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#97b64e2b6e1e48f62ae32d623f37dcdc"><span class="id" title="variable">σ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">erased_step</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tp:101"><span class="id" title="variable">tp</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#241996a55dbeb0df3f6494a745503c42"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:102"><span class="id" title="variable">j</span></a><span class="id" title="notation">:=</span><span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:100"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e':106"><span class="id" title="variable">e'</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#97b64e2b6e1e48f62ae32d623f37dcdc"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> -(<span class="id" title="lemma">right_id_L</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">(++)</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">_</span><span class="id" title="notation">:=</span><span class="id" title="var">_</span><span class="id" title="notation">]&gt;</span><span class="id" title="notation">_</span>)). <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#step_insert"><span class="id" title="lemma">step_insert</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nsteps_inv_r" class="idref" href="#nsteps_inv_r"><span class="id" title="lemma">nsteps_inv_r</span></a> {<a id="A:108" class="idref" href="#A:108"><span class="id" title="binder">A</span></a>} <a id="n:109" class="idref" href="#n:109"><span class="id" title="binder">n</span></a> (<a id="R:110" class="idref" href="#R:110"><span class="id" title="binder">R</span></a> : <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#A:108"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#A:108"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <a id="x:111" class="idref" href="#x:111"><span class="id" title="binder">x</span></a> <a id="y:112" class="idref" href="#y:112"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">relations.nsteps</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#R:110"><span class="id" title="variable">R</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#n:109"><span class="id" title="variable">n</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#x:111"><span class="id" title="variable">x</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#y:112"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <a id="z:113" class="idref" href="#z:113"><span class="id" title="binder">z</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="inductive">relations.nsteps</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#R:110"><span class="id" title="variable">R</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#n:109"><span class="id" title="variable">n</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#x:111"><span class="id" title="variable">x</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#z:113"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#R:110"><span class="id" title="variable">R</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#z:113"><span class="id" title="variable">z</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#y:112"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H</span> : <span class="id" title="inductive">relations.nsteps</span> <span class="id" title="var">_</span> 0 <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> [? ?]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">z</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <span class="id" title="constructor">relations.nsteps_l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_pure'" class="idref" href="#step_pure'"><span class="id" title="lemma">step_pure'</span></a> <a id="E:114" class="idref" href="#E:114"><span class="id" title="binder">E</span></a> <a id="j:115" class="idref" href="#j:115"><span class="id" title="binder">j</span></a> <a id="K:116" class="idref" href="#K:116"><span class="id" title="binder">K</span></a> <a id="e:117" class="idref" href="#e:117"><span class="id" title="binder">e</span></a> <a id="e':118" class="idref" href="#e':118"><span class="id" title="binder">e'</span></a> (<a id="P:119" class="idref" href="#P:119"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>) <a id="n:120" class="idref" href="#n:120"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#P:119"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">PureExec</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#P:119"><span class="id" title="variable">P</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#n:120"><span class="id" title="variable">n</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:117"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e':118"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:114"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:115"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:116"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:117"><span class="id" title="variable">e</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:114"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:115"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:116"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e':118"><span class="id" title="variable">e'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HP</span> <span class="id" title="var">Hex</span> ?) "[#Hinv Hj]". <span class="id" title="var">iDestruct</span> "Hinv" <span class="id" title="keyword">as</span> (ρ) "Hspec".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_mapsto"><span class="id" title="definition">tpool_mapsto</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">tp</span> σ) "&gt;[Hown Hrtc]" "Hclose".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hrtc" <span class="id" title="keyword">as</span> %<span class="id" title="var">Hrtc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_valid_2</span> <span class="id" title="notation">with</span> "Hown Hj"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> %[[<span class="id" title="var">Htpj</span>%<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_singleton_included'"><span class="id" title="lemma">tpool_singleton_included'</span></a> <span class="id" title="var">_</span>]%<span class="id" title="lemma">prod_included</span> ?]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<span class="id" title="lemma">auth_both_valid_discrete</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_update_2</span> <span class="id" title="notation">with</span> "Hown Hj"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hown Hj]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">auth_update</span>, <span class="id" title="lemma">prod_local_update_1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="lemma">singleton_local_update</span>, (<span class="id" title="lemma">exclusive_local_update</span> <span class="id" title="var">_</span> (<span class="id" title="constructor">Excl</span> (<span class="id" title="definition">fill</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span>))). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Hj". <span class="id" title="var">iApply</span> "Hclose". <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">j</span><span class="id" title="notation">:=</span><span class="id" title="definition">fill</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span>), σ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool_insert'"><span class="id" title="lemma">to_tpool_insert'</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">rtc_nsteps</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hrtc</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hrtc</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">m</span> <span class="id" title="var">Hrtc</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hex</span> <span class="id" title="var">HP</span>). <span class="id" title="tactic">apply</span> (<span class="id" title="lemma">rtc_nsteps_2</span> (<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">nsteps_trans</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span> <span class="id" title="var">Htpj</span> <span class="id" title="var">Hex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n</span> <span class="id" title="var">IH</span>] =&gt; <span class="id" title="var">e</span> <span class="id" title="var">e'</span> <span class="id" title="var">Htpj</span> <span class="id" title="var">Hex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hex</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">list_insert_id</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#nsteps_inv_r"><span class="id" title="lemma">nsteps_inv_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hex</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">z</span> [<span class="id" title="var">Hex1</span> <span class="id" title="var">Hex2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Htpj</span> <span class="id" title="var">Hex1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">nsteps_r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">j</span><span class="id" title="notation">:=</span><span class="id" title="definition">fill</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">&lt;[</span><span class="id" title="var">j</span><span class="id" title="notation">:=</span><span class="id" title="definition">fill</span> <span class="id" title="var">K</span> <span class="id" title="var">e'</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">(&lt;[</span><span class="id" title="notation">j</span><span class="id" title="notation">:=</span><span class="id" title="notation">fill</span> <span class="id" title="notation">K</span> <span class="id" title="notation">z</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span><span class="id" title="notation">)</span>); <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span>. <span class="id" title="var">revert</span> <span class="id" title="var">tp</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">j</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">j</span> <span class="id" title="var">IHj</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">tp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">tp</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">tp</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHj</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hex2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hexs</span> <span class="id" title="var">Hexd</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hexs</span> σ). <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hexs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e''</span> [σ' [<span class="id" title="var">efs</span> <span class="id" title="var">Hexs</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hexd</span> σ <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">e''</span> σ' <span class="id" title="var">efs</span> <span class="id" title="var">Hexs</span>); <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hexd</span> <span class="id" title="keyword">as</span> [? [? [? ?]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hexs</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<span class="id" title="lemma">fill_app</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#step_insert_no_fork"><span class="id" title="lemma">step_insert_no_fork</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">list_lookup_insert</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lookup_lt_is_Some</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="do_step_pure" class="idref" href="#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a> <a id="E:121" class="idref" href="#E:121"><span class="id" title="binder">E</span></a> <a id="j:122" class="idref" href="#j:122"><span class="id" title="binder">j</span></a> <a id="K:123" class="idref" href="#K:123"><span class="id" title="binder">K</span></a> <a id="e:124" class="idref" href="#e:124"><span class="id" title="binder">e</span></a> <a id="e':125" class="idref" href="#e':125"><span class="id" title="binder">e'</span></a> `{<a id="PureExec0:126" class="idref" href="#PureExec0:126"><span class="id" title="binder">!</span></a><a id="PureExec0:126" class="idref" href="#PureExec0:126"><span class="id" title="binder">PureExec</span></a> <a id="PureExec0:126" class="idref" href="#PureExec0:126"><span class="id" title="binder">True</span></a> <a id="PureExec0:126" class="idref" href="#PureExec0:126"><span class="id" title="binder">1</span></a> <a id="PureExec0:126" class="idref" href="#PureExec0:126"><span class="id" title="binder">e</span></a> <a id="PureExec0:126" class="idref" href="#PureExec0:126"><span class="id" title="binder">e'</span></a>}:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:121"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:122"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:123"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:124"><span class="id" title="variable">e</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:121"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:122"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:123"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e':125"><span class="id" title="variable">e'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#step_pure'"><span class="id" title="lemma">step_pure'</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_alloc" class="idref" href="#step_alloc"><span class="id" title="lemma">step_alloc</span></a> <a id="E:127" class="idref" href="#E:127"><span class="id" title="binder">E</span></a> <a id="j:128" class="idref" href="#j:128"><span class="id" title="binder">j</span></a> <a id="K:129" class="idref" href="#K:129"><span class="id" title="binder">K</span></a> <a id="e:130" class="idref" href="#e:130"><span class="id" title="binder">e</span></a> <a id="v:131" class="idref" href="#v:131"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:130"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:131"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:127"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:128"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:129"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Alloc"><span class="id" title="constructor">Alloc</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:130"><span class="id" title="variable">e</span></a>) <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:127"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <span class="id" title="notation">∃</span> <a id="l:132" class="idref" href="#l:132"><span class="id" title="binder">l</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:128"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:129"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Loc"><span class="id" title="constructor">Loc</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:132"><span class="id" title="variable">l</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:132"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:131"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "[#Hinv Hj]". <span class="id" title="var">iDestruct</span> "Hinv" <span class="id" title="keyword">as</span> (ρ) "Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_mapsto"><span class="id" title="definition">tpool_mapsto</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">tp</span> σ) "&gt;[Hown %]" "Hclose".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="lemma">exist_fresh</span> (<span class="id" title="definition">dom</span> σ)) <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> <span class="id" title="var">Hl</span>%<span class="id" title="lemma">not_elem_of_dom</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_valid_2</span> <span class="id" title="notation">with</span> "Hown Hj"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> %[[?%<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_singleton_included'"><span class="id" title="lemma">tpool_singleton_included'</span></a> <span class="id" title="var">_</span>]%<span class="id" title="lemma">prod_included</span> ?]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<span class="id" title="lemma">auth_both_valid_discrete</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_update_2</span> <span class="id" title="notation">with</span> "Hown Hj"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hown Hj]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">auth_update</span>, <span class="id" title="lemma">prod_local_update_1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="lemma">singleton_local_update</span>, (<span class="id" title="lemma">exclusive_local_update</span> <span class="id" title="var">_</span> (<span class="id" title="constructor">Excl</span> (<span class="id" title="definition">fill</span> <span class="id" title="var">K</span> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Loc"><span class="id" title="constructor">Loc</span></a> <span class="id" title="var">l</span>)))). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_update</span> <span class="id" title="notation">with</span> "Hown"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hown Hl]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">auth_update_alloc</span>, <span class="id" title="lemma">prod_local_update_2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="lemma">alloc_singleton_local_update</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">Qp</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="definition">to_agree</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#lookup_to_heap_None"><span class="id" title="lemma">lookup_to_heap_None</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a>. <span class="id" title="var">iFrame</span> "Hj Hl". <span class="id" title="var">iApply</span> "Hclose". <span class="id" title="var">iNext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">j</span><span class="id" title="notation">:=</span><span class="id" title="definition">fill</span> <span class="id" title="var">K</span> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Loc"><span class="id" title="constructor">Loc</span></a> <span class="id" title="var">l</span>)<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span>), (<span class="id" title="notation">&lt;[</span><span class="id" title="var">l</span><span class="id" title="notation">:=</span><span class="id" title="var">v</span><span class="id" title="notation">]&gt;σ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap_insert"><span class="id" title="lemma">to_heap_insert</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool_insert'"><span class="id" title="lemma">to_tpool_insert'</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">rtc_r</span>, <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#step_insert_no_fork"><span class="id" title="lemma">step_insert_no_fork</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_load" class="idref" href="#step_load"><span class="id" title="lemma">step_load</span></a> <a id="E:133" class="idref" href="#E:133"><span class="id" title="binder">E</span></a> <a id="j:134" class="idref" href="#j:134"><span class="id" title="binder">j</span></a> <a id="K:135" class="idref" href="#K:135"><span class="id" title="binder">K</span></a> <a id="l:136" class="idref" href="#l:136"><span class="id" title="binder">l</span></a> <a id="q:137" class="idref" href="#q:137"><span class="id" title="binder">q</span></a> <a id="v:138" class="idref" href="#v:138"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:133"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:134"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:135"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Load"><span class="id" title="constructor">Load</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Loc"><span class="id" title="constructor">Loc</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:136"><span class="id" title="variable">l</span></a>)) <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:136"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q:137"><span class="id" title="variable">q</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:138"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:133"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:134"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:135"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.of_val"><span class="id" title="definition">of_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:138"><span class="id" title="variable">v</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:136"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">↦ₛ{</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#q:137"><span class="id" title="variable">q</span></a><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e730e42c5e8de925c5934d80eba35f6f"><span class="id" title="notation">}</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:138"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "(#Hinv &amp; Hj &amp; Hl)". <span class="id" title="var">iDestruct</span> "Hinv" <span class="id" title="keyword">as</span> (ρ) "Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_mapsto"><span class="id" title="definition">tpool_mapsto</span></a> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">tp</span> σ) "&gt;[Hown %]" "Hclose".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_valid_2</span> <span class="id" title="notation">with</span> "Hown Hj"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> %[[?%<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_singleton_included'"><span class="id" title="lemma">tpool_singleton_included'</span></a> <span class="id" title="var">_</span>]%<span class="id" title="lemma">prod_included</span> ?]%<span class="id" title="lemma">auth_both_valid_discrete</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_valid_2</span> <span class="id" title="notation">with</span> "Hown Hl"<span class="id" title="notation">)</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> %[[? ?%<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heap_singleton_included"><span class="id" title="lemma">heap_singleton_included</span></a>]%<span class="id" title="lemma">prod_included</span> ?]%<span class="id" title="lemma">auth_both_valid_discrete</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_update_2</span> <span class="id" title="notation">with</span> "Hown Hj"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hown Hj]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">auth_update</span>, <span class="id" title="lemma">prod_local_update_1</span>, <span class="id" title="lemma">singleton_local_update</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="lemma">exclusive_local_update</span> <span class="id" title="var">_</span> (<span class="id" title="constructor">Excl</span> (<span class="id" title="definition">fill</span> <span class="id" title="var">K</span> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.of_val"><span class="id" title="definition">of_val</span></a> <span class="id" title="var">v</span>)))). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Hj Hl". <span class="id" title="var">iApply</span> "Hclose". <span class="id" title="var">iNext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">j</span><span class="id" title="notation">:=</span><span class="id" title="definition">fill</span> <span class="id" title="var">K</span> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.of_val"><span class="id" title="definition">of_val</span></a> <span class="id" title="var">v</span>)<span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span>), σ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool_insert'"><span class="id" title="lemma">to_tpool_insert'</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">rtc_r</span>, <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#step_insert_no_fork"><span class="id" title="lemma">step_insert_no_fork</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_store" class="idref" href="#step_store"><span class="id" title="lemma">step_store</span></a> <a id="E:139" class="idref" href="#E:139"><span class="id" title="binder">E</span></a> <a id="j:140" class="idref" href="#j:140"><span class="id" title="binder">j</span></a> <a id="K:141" class="idref" href="#K:141"><span class="id" title="binder">K</span></a> <a id="l:142" class="idref" href="#l:142"><span class="id" title="binder">l</span></a> <a id="v':143" class="idref" href="#v':143"><span class="id" title="binder">v'</span></a> <a id="e:144" class="idref" href="#e:144"><span class="id" title="binder">e</span></a> <a id="v:145" class="idref" href="#v:145"><span class="id" title="binder">v</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:144"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:145"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:139"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:140"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:141"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Store"><span class="id" title="constructor">Store</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Loc"><span class="id" title="constructor">Loc</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:142"><span class="id" title="variable">l</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:144"><span class="id" title="variable">e</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:142"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v':143"><span class="id" title="variable">v'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:139"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:140"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:141"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Unit"><span class="id" title="constructor">Unit</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#l:142"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#0326014f985dcbdf069e6962e826748b"><span class="id" title="notation">↦ₛ</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:145"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "(#Hinv &amp; Hj &amp; Hl)". <span class="id" title="var">iDestruct</span> "Hinv" <span class="id" title="keyword">as</span> (ρ) "Hinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_mapsto"><span class="id" title="definition">tpool_mapsto</span></a> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heapS_mapsto"><span class="id" title="definition">heapS_mapsto</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iInv</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">tp</span> σ) "&gt;[Hown %]" "Hclose".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_valid_2</span> <span class="id" title="notation">with</span> "Hown Hj"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> %[[?%<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#tpool_singleton_included'"><span class="id" title="lemma">tpool_singleton_included'</span></a> <span class="id" title="var">_</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<span class="id" title="lemma">prod_included</span> <span class="id" title="var">_</span>]%<span class="id" title="lemma">auth_both_valid_discrete</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_valid_2</span> <span class="id" title="notation">with</span> "Hown Hl"<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> %[[<span class="id" title="var">_</span> <span class="id" title="var">Hl</span>%<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#heap_singleton_included"><span class="id" title="lemma">heap_singleton_included</span></a>]%<span class="id" title="lemma">prod_included</span> <span class="id" title="var">_</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<span class="id" title="lemma">auth_both_valid_discrete</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_update_2</span> <span class="id" title="notation">with</span> "Hown Hj"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hown Hj]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">auth_update</span>, <span class="id" title="lemma">prod_local_update_1</span>, <span class="id" title="lemma">singleton_local_update</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="lemma">exclusive_local_update</span> <span class="id" title="var">_</span> (<span class="id" title="constructor">Excl</span> (<span class="id" title="definition">fill</span> <span class="id" title="var">K</span> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Unit"><span class="id" title="constructor">Unit</span></a>))). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><span class="id" title="lemma">own_update_2</span> <span class="id" title="notation">with</span> "Hown Hl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "[Hown Hl]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">auth_update</span>, <span class="id" title="lemma">prod_local_update_2</span>, <span class="id" title="lemma">singleton_local_update</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="lemma">exclusive_local_update</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1%<span class="id" title="var">Qp</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="definition">to_agree</span> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap"><span class="id" title="definition">to_heap</span></a> <span class="id" title="method">lookup_fmap</span> <span class="id" title="var">Hl</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iFrame</span> "Hj Hl". <span class="id" title="var">iApply</span> "Hclose". <span class="id" title="var">iNext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<span class="id" title="notation">&lt;[</span><span class="id" title="var">j</span><span class="id" title="notation">:=</span><span class="id" title="definition">fill</span> <span class="id" title="var">K</span> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Unit"><span class="id" title="constructor">Unit</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">tp</span>), (<span class="id" title="notation">&lt;[</span><span class="id" title="var">l</span><span class="id" title="notation">:=</span><span class="id" title="var">v</span><span class="id" title="notation">]&gt;σ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_heap_insert"><span class="id" title="lemma">to_heap_insert</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#to_tpool_insert'"><span class="id" title="lemma">to_tpool_insert'</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">iFrame</span>. <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">rtc_r</span>, <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#step_insert_no_fork"><span class="id" title="lemma">step_insert_no_fork</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_rec" class="idref" href="#step_rec"><span class="id" title="lemma">step_rec</span></a> <a id="E:146" class="idref" href="#E:146"><span class="id" title="binder">E</span></a> <a id="j:147" class="idref" href="#j:147"><span class="id" title="binder">j</span></a> <a id="K:148" class="idref" href="#K:148"><span class="id" title="binder">K</span></a> <a id="e1:149" class="idref" href="#e1:149"><span class="id" title="binder">e1</span></a> <a id="e2:150" class="idref" href="#e2:150"><span class="id" title="binder">e2</span></a> <a id="v:151" class="idref" href="#v:151"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:150"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:151"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:146"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:147"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:148"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.App"><span class="id" title="constructor">App</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:149"><span class="id" title="variable">e1</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:150"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:146"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:147"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:148"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:149"><span class="id" title="variable">e1</span></a><span class="id" title="notation">.[</span><a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Rec"><span class="id" title="constructor">Rec</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:149"><span class="id" title="variable">e1</span></a><span class="id" title="notation">,</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:150"><span class="id" title="variable">e2</span></a><span class="id" title="notation">/]</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_lam" class="idref" href="#step_lam"><span class="id" title="lemma">step_lam</span></a> <a id="E:152" class="idref" href="#E:152"><span class="id" title="binder">E</span></a> <a id="j:153" class="idref" href="#j:153"><span class="id" title="binder">j</span></a> <a id="K:154" class="idref" href="#K:154"><span class="id" title="binder">K</span></a> <a id="e1:155" class="idref" href="#e1:155"><span class="id" title="binder">e1</span></a> <a id="e2:156" class="idref" href="#e2:156"><span class="id" title="binder">e2</span></a> <a id="v:157" class="idref" href="#v:157"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:156"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:157"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:152"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:153"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:154"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.App"><span class="id" title="constructor">App</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Lam"><span class="id" title="constructor">Lam</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:155"><span class="id" title="variable">e1</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:156"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:152"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:153"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:154"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:155"><span class="id" title="variable">e1</span></a><span class="id" title="notation">.[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:156"><span class="id" title="variable">e2</span></a><span class="id" title="notation">/]</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_letin" class="idref" href="#step_letin"><span class="id" title="lemma">step_letin</span></a> <a id="E:158" class="idref" href="#E:158"><span class="id" title="binder">E</span></a> <a id="j:159" class="idref" href="#j:159"><span class="id" title="binder">j</span></a> <a id="K:160" class="idref" href="#K:160"><span class="id" title="binder">K</span></a> <a id="e1:161" class="idref" href="#e1:161"><span class="id" title="binder">e1</span></a> <a id="e2:162" class="idref" href="#e2:162"><span class="id" title="binder">e2</span></a> <a id="v:163" class="idref" href="#v:163"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:161"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:163"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:158"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:159"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:160"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.LetIn"><span class="id" title="constructor">LetIn</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:161"><span class="id" title="variable">e1</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:162"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:158"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:159"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:160"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:162"><span class="id" title="variable">e2</span></a><span class="id" title="notation">.[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:161"><span class="id" title="variable">e1</span></a><span class="id" title="notation">/]</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_seq" class="idref" href="#step_seq"><span class="id" title="lemma">step_seq</span></a> <a id="E:164" class="idref" href="#E:164"><span class="id" title="binder">E</span></a> <a id="j:165" class="idref" href="#j:165"><span class="id" title="binder">j</span></a> <a id="K:166" class="idref" href="#K:166"><span class="id" title="binder">K</span></a> <a id="e1:167" class="idref" href="#e1:167"><span class="id" title="binder">e1</span></a> <a id="e2:168" class="idref" href="#e2:168"><span class="id" title="binder">e2</span></a> <a id="v:169" class="idref" href="#v:169"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:167"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:169"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:164"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:165"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:166"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Seq"><span class="id" title="constructor">Seq</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:167"><span class="id" title="variable">e1</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:168"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:164"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:165"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:166"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:168"><span class="id" title="variable">e2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_tlam" class="idref" href="#step_tlam"><span class="id" title="lemma">step_tlam</span></a> <a id="E:170" class="idref" href="#E:170"><span class="id" title="binder">E</span></a> <a id="j:171" class="idref" href="#j:171"><span class="id" title="binder">j</span></a> <a id="K:172" class="idref" href="#K:172"><span class="id" title="binder">K</span></a> <a id="e:173" class="idref" href="#e:173"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:170"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:171"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:172"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.TApp"><span class="id" title="constructor">TApp</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.TLam"><span class="id" title="constructor">TLam</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:173"><span class="id" title="variable">e</span></a>)) <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:170"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:171"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:172"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:173"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_fold" class="idref" href="#step_fold"><span class="id" title="lemma">step_fold</span></a> <a id="E:174" class="idref" href="#E:174"><span class="id" title="binder">E</span></a> <a id="j:175" class="idref" href="#j:175"><span class="id" title="binder">j</span></a> <a id="K:176" class="idref" href="#K:176"><span class="id" title="binder">K</span></a> <a id="e:177" class="idref" href="#e:177"><span class="id" title="binder">e</span></a> <a id="v:178" class="idref" href="#v:178"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:177"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:178"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:174"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:175"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:176"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Unfold"><span class="id" title="constructor">Unfold</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Fold"><span class="id" title="constructor">Fold</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:177"><span class="id" title="variable">e</span></a>)) <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:174"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:175"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:176"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e:177"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_pack" class="idref" href="#step_pack"><span class="id" title="lemma">step_pack</span></a> <a id="E:179" class="idref" href="#E:179"><span class="id" title="binder">E</span></a> <a id="j:180" class="idref" href="#j:180"><span class="id" title="binder">j</span></a> <a id="K:181" class="idref" href="#K:181"><span class="id" title="binder">K</span></a> <a id="e1:182" class="idref" href="#e1:182"><span class="id" title="binder">e1</span></a> <a id="v:183" class="idref" href="#v:183"><span class="id" title="binder">v</span></a> <a id="e2:184" class="idref" href="#e2:184"><span class="id" title="binder">e2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:182"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v:183"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:179"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:180"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:181"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.UnpackIn"><span class="id" title="constructor">UnpackIn</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Pack"><span class="id" title="constructor">Pack</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:182"><span class="id" title="variable">e1</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:184"><span class="id" title="variable">e2</span></a>) <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:179"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:180"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:181"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:184"><span class="id" title="variable">e2</span></a><span class="id" title="notation">.[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:182"><span class="id" title="variable">e1</span></a><span class="id" title="notation">/]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_fst" class="idref" href="#step_fst"><span class="id" title="lemma">step_fst</span></a> <a id="E:185" class="idref" href="#E:185"><span class="id" title="binder">E</span></a> <a id="j:186" class="idref" href="#j:186"><span class="id" title="binder">j</span></a> <a id="K:187" class="idref" href="#K:187"><span class="id" title="binder">K</span></a> <a id="e1:188" class="idref" href="#e1:188"><span class="id" title="binder">e1</span></a> <a id="v1:189" class="idref" href="#v1:189"><span class="id" title="binder">v1</span></a> <a id="e2:190" class="idref" href="#e2:190"><span class="id" title="binder">e2</span></a> <a id="v2:191" class="idref" href="#v2:191"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:188"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v1:189"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:190"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v2:191"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:185"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:186"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:187"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Fst"><span class="id" title="constructor">Fst</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Pair"><span class="id" title="constructor">Pair</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:188"><span class="id" title="variable">e1</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:190"><span class="id" title="variable">e2</span></a>)) <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:185"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:186"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:187"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:188"><span class="id" title="variable">e1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_snd" class="idref" href="#step_snd"><span class="id" title="lemma">step_snd</span></a> <a id="E:192" class="idref" href="#E:192"><span class="id" title="binder">E</span></a> <a id="j:193" class="idref" href="#j:193"><span class="id" title="binder">j</span></a> <a id="K:194" class="idref" href="#K:194"><span class="id" title="binder">K</span></a> <a id="e1:195" class="idref" href="#e1:195"><span class="id" title="binder">e1</span></a> <a id="v1:196" class="idref" href="#v1:196"><span class="id" title="binder">v1</span></a> <a id="e2:197" class="idref" href="#e2:197"><span class="id" title="binder">e2</span></a> <a id="v2:198" class="idref" href="#v2:198"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:195"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v1:196"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:197"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v2:198"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:192"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:193"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:194"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Snd"><span class="id" title="constructor">Snd</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Pair"><span class="id" title="constructor">Pair</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:195"><span class="id" title="variable">e1</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:197"><span class="id" title="variable">e2</span></a>)) <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:192"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:193"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:194"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:197"><span class="id" title="variable">e2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_case_inl" class="idref" href="#step_case_inl"><span class="id" title="lemma">step_case_inl</span></a> <a id="E:199" class="idref" href="#E:199"><span class="id" title="binder">E</span></a> <a id="j:200" class="idref" href="#j:200"><span class="id" title="binder">j</span></a> <a id="K:201" class="idref" href="#K:201"><span class="id" title="binder">K</span></a> <a id="e0:202" class="idref" href="#e0:202"><span class="id" title="binder">e0</span></a> <a id="v0:203" class="idref" href="#v0:203"><span class="id" title="binder">v0</span></a> <a id="e1:204" class="idref" href="#e1:204"><span class="id" title="binder">e1</span></a> <a id="e2:205" class="idref" href="#e2:205"><span class="id" title="binder">e2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e0:202"><span class="id" title="variable">e0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v0:203"><span class="id" title="variable">v0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:199"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:200"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:201"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.InjL"><span class="id" title="constructor">InjL</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e0:202"><span class="id" title="variable">e0</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:204"><span class="id" title="variable">e1</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:205"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:199"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:200"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:201"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:204"><span class="id" title="variable">e1</span></a><span class="id" title="notation">.[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e0:202"><span class="id" title="variable">e0</span></a><span class="id" title="notation">/]</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_case_inr" class="idref" href="#step_case_inr"><span class="id" title="lemma">step_case_inr</span></a> <a id="E:206" class="idref" href="#E:206"><span class="id" title="binder">E</span></a> <a id="j:207" class="idref" href="#j:207"><span class="id" title="binder">j</span></a> <a id="K:208" class="idref" href="#K:208"><span class="id" title="binder">K</span></a> <a id="e0:209" class="idref" href="#e0:209"><span class="id" title="binder">e0</span></a> <a id="v0:210" class="idref" href="#v0:210"><span class="id" title="binder">v0</span></a> <a id="e1:211" class="idref" href="#e1:211"><span class="id" title="binder">e1</span></a> <a id="e2:212" class="idref" href="#e2:212"><span class="id" title="binder">e2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.to_val"><span class="id" title="definition">to_val</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e0:209"><span class="id" title="variable">e0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#v0:210"><span class="id" title="variable">v0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:206"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:207"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:208"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.Case"><span class="id" title="constructor">Case</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.InjR"><span class="id" title="constructor">InjR</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e0:209"><span class="id" title="variable">e0</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:211"><span class="id" title="variable">e1</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:212"><span class="id" title="variable">e2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:206"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:207"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:208"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:212"><span class="id" title="variable">e2</span></a><span class="id" title="notation">.[</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e0:209"><span class="id" title="variable">e0</span></a><span class="id" title="notation">/]</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_if_false" class="idref" href="#step_if_false"><span class="id" title="lemma">step_if_false</span></a> <a id="E:213" class="idref" href="#E:213"><span class="id" title="binder">E</span></a> <a id="j:214" class="idref" href="#j:214"><span class="id" title="binder">j</span></a> <a id="K:215" class="idref" href="#K:215"><span class="id" title="binder">K</span></a> <a id="e1:216" class="idref" href="#e1:216"><span class="id" title="binder">e1</span></a> <a id="e2:217" class="idref" href="#e2:217"><span class="id" title="binder">e2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:213"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:214"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:215"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#f664a01c01d28effaaf30121e2b18848"><span class="id" title="notation">#♭</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:216"><span class="id" title="variable">e1</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:217"><span class="id" title="variable">e2</span></a>) <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:213"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:214"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:215"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:217"><span class="id" title="variable">e2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_if_true" class="idref" href="#step_if_true"><span class="id" title="lemma">step_if_true</span></a> <a id="E:218" class="idref" href="#E:218"><span class="id" title="binder">E</span></a> <a id="j:219" class="idref" href="#j:219"><span class="id" title="binder">j</span></a> <a id="K:220" class="idref" href="#K:220"><span class="id" title="binder">K</span></a> <a id="e1:221" class="idref" href="#e1:221"><span class="id" title="binder">e1</span></a> <a id="e2:222" class="idref" href="#e2:222"><span class="id" title="binder">e2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:218"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:219"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:220"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.If"><span class="id" title="constructor">If</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#f664a01c01d28effaaf30121e2b18848"><span class="id" title="notation">#♭</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:221"><span class="id" title="variable">e1</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e2:222"><span class="id" title="variable">e2</span></a>) <span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:218"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:219"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:220"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#e1:221"><span class="id" title="variable">e1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="step_nat_binop" class="idref" href="#step_nat_binop"><span class="id" title="lemma">step_nat_binop</span></a> <a id="E:223" class="idref" href="#E:223"><span class="id" title="binder">E</span></a> <a id="j:224" class="idref" href="#j:224"><span class="id" title="binder">j</span></a> <a id="K:225" class="idref" href="#K:225"><span class="id" title="binder">K</span></a> <a id="op:226" class="idref" href="#op:226"><span class="id" title="binder">op</span></a> <a id="a:227" class="idref" href="#a:227"><span class="id" title="binder">a</span></a> <a id="b:228" class="idref" href="#b:228"><span class="id" title="binder">b</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="instance">nclose</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#specN"><span class="id" title="definition">specN</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:223"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#spec_ctx"><span class="id" title="definition">spec_ctx</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:224"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:225"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.BinOp"><span class="id" title="constructor">BinOp</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#op:226"><span class="id" title="variable">op</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#441868674834f03fb4cf4d222eef2b24"><span class="id" title="notation">#</span></a><a class="idref" href="WBLogic.F_mu_ref.lang.html#441868674834f03fb4cf4d222eef2b24"><span class="id" title="notation">n</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#a:227"><span class="id" title="variable">a</span></a>) (<a class="idref" href="WBLogic.F_mu_ref.lang.html#441868674834f03fb4cf4d222eef2b24"><span class="id" title="notation">#</span></a><a class="idref" href="WBLogic.F_mu_ref.lang.html#441868674834f03fb4cf4d222eef2b24"><span class="id" title="notation">n</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#b:228"><span class="id" title="variable">b</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#E:223"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#j:224"><span class="id" title="variable">j</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#d9c4b185ae99f60a4ff1e8997ef210df"><span class="id" title="notation">⤇</span></a> <span class="id" title="definition">fill</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#K:225"><span class="id" title="variable">K</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.of_val"><span class="id" title="definition">of_val</span></a> (<a class="idref" href="WBLogic.F_mu_ref.lang.html#F_mu_ref.binop_eval"><span class="id" title="definition">binop_eval</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#op:226"><span class="id" title="variable">op</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#a:227"><span class="id" title="variable">a</span></a> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#b:228"><span class="id" title="variable">b</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#do_step_pure"><span class="id" title="lemma">do_step_pure</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="WBLogic.F_mu_ref.binary.rules.html#cfg"><span class="id" title="section">cfg</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
