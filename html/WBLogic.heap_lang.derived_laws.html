<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../index.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">WBLogic.heap_lang.derived_laws</h1>

<div class="code">
</div>

<div class="doc">
This file extends the HeapLang program logic with some derived laws (not
using the lifting lemmas) about arrays and prophecies.

<div class="paragraph"> </div>

For utility functions on arrays (e.g., freeing/copying an array), see
<span class="inlinecode"><span class="id" title="var">heap_lang.lib.array</span></span>.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">fin_maps</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.bi</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">lib.fractional</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">WBLogic.heap_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="WBLogic.heap_lang.primitive_laws.html#"><span class="id" title="library">primitive_laws</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.heap_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">derived_laws</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.heap_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">tactics</span> <span class="id" title="library">notation</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">options</span>.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><span class="id" title="definition">array</span></span> connective is a version of <span class="inlinecode"><span class="id" title="definition">mapsto</span></span> that works
with lists of values. 
<div class="paragraph"> </div>

 We have <span class="inlinecode"><span class="id" title="var">FromSep</span></span> and <span class="inlinecode"><span class="id" title="var">IntoSep</span></span> instances to split the fraction (via the
<span class="inlinecode"><span class="id" title="var">AsFractional</span></span> instance below), but not for splitting the list, as that would
lead to overlapping instances. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="lifting" class="idref" href="#lifting"><span class="id" title="section">lifting</span></a>.<br/>
<span class="id" title="keyword">Context</span> `{<a id="wbheapGS0:2" class="idref" href="#wbheapGS0:2"><span class="id" title="binder">!</span></a><a id="wbheapGS0:2" class="idref" href="#wbheapGS0:2"><span class="id" title="binder">wbheapGS</span></a> <a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder"><span id="wbheapGS0:2" class="id">Σ</span></span></a>}.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#3f5501ec6239ef23d42bb010db261e47"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">Φ</span> : <span class="id" title="inductive">val</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#3f5501ec6239ef23d42bb010db261e47"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> σ : <span class="id" title="record">state</span>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">v</span> : <span class="id" title="inductive">val</span>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">vs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="inductive">val</span>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">l</span> : <span class="id" title="record">loc</span>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">sz</span> <span class="id" title="var">off</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h1 class="section">Rules for allocation</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_allocN" class="idref" href="#wbwp_allocN"><span class="id" title="lemma">wbwp_allocN</span></a> <a id="E:3" class="idref" href="#E:3"><span class="id" title="binder">E</span></a> <a id="out:4" class="idref" href="#out:4"><span class="id" title="binder">out</span></a> <a id="v:5" class="idref" href="#v:5"><span class="id" title="binder">v</span></a> <a id="n:6" class="idref" href="#n:6"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#n:6"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">True</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">}}}</span></a> <span class="id" title="constructor">AllocN</span> (<span class="id" title="constructor">Val</span> <span class="id" title="notation">$</span> <span class="id" title="constructor">LitV</span> <span class="id" title="notation">$</span> <span class="id" title="constructor">LitInt</span> <span class="id" title="notation">$</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#n:6"><span class="id" title="variable">n</span></a>) (<span class="id" title="constructor">Val</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:5"><span class="id" title="variable">v</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:4"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:3"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{{{</span></a> <a id="l:7" class="idref" href="#l:7"><span class="id" title="binder">l</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">RET</span></a> <span class="id" title="constructor">LitV</span> (<span class="id" title="constructor">LitLoc</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:7"><span class="id" title="variable">l</span></a>)<a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:7"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="definition">replicate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#n:6"><span class="id" title="variable">n</span></a>) <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:5"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="i:8" class="idref" href="#i:8"><span class="id" title="binder"><span id="i:9" class="id">i</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#n:6"><span class="id" title="variable">n</span></a>)<span class="id" title="notation">,</span> <span class="id" title="definition">meta_token</span> (<a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:7"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#i:8"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">)</span>) <span class="id" title="notation">⊤</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "_ HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="lemma">wp_allocN</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_allocN_vec" class="idref" href="#wbwp_allocN_vec"><span class="id" title="lemma">wbwp_allocN_vec</span></a> <a id="E:10" class="idref" href="#E:10"><span class="id" title="binder">E</span></a> <a id="out:11" class="idref" href="#out:11"><span class="id" title="binder">out</span></a> <a id="v:12" class="idref" href="#v:12"><span class="id" title="binder">v</span></a> <a id="n:13" class="idref" href="#n:13"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;(0 <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#n:13"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">True</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">AllocN</span> <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#n:13"><span class="id" title="variable">n</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:12"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:11"><span class="id" title="variable">out</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:10"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{{{</span></a> <a id="l:14" class="idref" href="#l:14"><span class="id" title="binder">l</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:14"><span class="id" title="variable">l</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:14"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="definition">vreplicate</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#n:13"><span class="id" title="variable">n</span></a>) <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:12"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[∗</span> <span class="id" title="notation">list</span><span class="id" title="notation">]</span> <a id="i:15" class="idref" href="#i:15"><span class="id" title="binder"><span id="i:16" class="id">i</span></span></a> <span class="id" title="notation">∈</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#seq"><span class="id" title="definition">seq</span></a> 0 (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#n:13"><span class="id" title="variable">n</span></a>)<span class="id" title="notation">,</span> <span class="id" title="definition">meta_token</span> (<a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:14"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#i:15"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ssr.ssreflect.html#::core_scope:x_':'_x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><span class="id" title="notation">)</span>) <span class="id" title="notation">⊤</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "_ HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="lemma">wp_allocN_vec</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab3"></a><h1 class="section">Rules for accessing array elements</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wbwp_load_offset" class="idref" href="#wbwp_load_offset"><span class="id" title="lemma">wbwp_load_offset</span></a> <a id="E:17" class="idref" href="#E:17"><span class="id" title="binder">E</span></a> <a id="out:18" class="idref" href="#out:18"><span class="id" title="binder">out</span></a> <a id="l:19" class="idref" href="#l:19"><span class="id" title="binder">l</span></a> <a id="dq:20" class="idref" href="#dq:20"><span class="id" title="binder">dq</span></a> <a id="off:21" class="idref" href="#off:21"><span class="id" title="binder">off</span></a> <a id="vs:22" class="idref" href="#vs:22"><span class="id" title="binder">vs</span></a> <a id="v:23" class="idref" href="#v:23"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:22"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:21"><span class="id" title="variable">off</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:23"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:19"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:20"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:22"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a> <span class="id" title="notation">!</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:19"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:21"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:18"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:17"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:23"><span class="id" title="variable">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:19"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:20"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:22"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_load_offset</span> <span class="id" title="notation">with</span> "[$Hl] [$]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_load_offset_vec" class="idref" href="#wbwp_load_offset_vec"><span class="id" title="lemma">wbwp_load_offset_vec</span></a> <a id="E:24" class="idref" href="#E:24"><span class="id" title="binder">E</span></a> <a id="out:25" class="idref" href="#out:25"><span class="id" title="binder">out</span></a> <a id="l:26" class="idref" href="#l:26"><span class="id" title="binder">l</span></a> <a id="dq:27" class="idref" href="#dq:27"><span class="id" title="binder">dq</span></a> <a id="sz:28" class="idref" href="#sz:28"><span class="id" title="binder">sz</span></a> (<a id="off:29" class="idref" href="#off:29"><span class="id" title="binder">off</span></a> : <span class="id" title="abbreviation">fin</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:28"><span class="id" title="variable">sz</span></a>) (<a id="vs:30" class="idref" href="#vs:30"><span class="id" title="binder">vs</span></a> : <span class="id" title="abbreviation">vec</span> <span class="id" title="inductive">val</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:28"><span class="id" title="variable">sz</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:26"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:27"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:30"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a> <span class="id" title="notation">!</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:26"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:29"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:25"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:24"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:30"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:29"><span class="id" title="variable">off</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:26"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:27"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:30"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#wbwp_load_offset"><span class="id" title="lemma">wbwp_load_offset</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">vlookup_lookup</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_store_offset" class="idref" href="#wbwp_store_offset"><span class="id" title="lemma">wbwp_store_offset</span></a> <a id="E:31" class="idref" href="#E:31"><span class="id" title="binder">E</span></a> <a id="out:32" class="idref" href="#out:32"><span class="id" title="binder">out</span></a> <a id="l:33" class="idref" href="#l:33"><span class="id" title="binder">l</span></a> <a id="off:34" class="idref" href="#off:34"><span class="id" title="binder">off</span></a> <a id="vs:35" class="idref" href="#vs:35"><span class="id" title="binder">vs</span></a> <a id="v:36" class="idref" href="#v:36"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">is_Some</span> (<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:35"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:34"><span class="id" title="variable">off</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:33"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:35"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:33"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:34"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;-</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:36"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:32"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:31"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">#</span><span class="id" title="notation">()</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:33"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:34"><span class="id" title="variable">off</span></a><span class="id" title="notation">:=</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:36"><span class="id" title="variable">v</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vs</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_store_offset</span> <span class="id" title="notation">with</span> "[$Hl] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_store_offset_vec" class="idref" href="#wbwp_store_offset_vec"><span class="id" title="lemma">wbwp_store_offset_vec</span></a> <a id="E:37" class="idref" href="#E:37"><span class="id" title="binder">E</span></a> <a id="out:38" class="idref" href="#out:38"><span class="id" title="binder">out</span></a> <a id="l:39" class="idref" href="#l:39"><span class="id" title="binder">l</span></a> <a id="sz:40" class="idref" href="#sz:40"><span class="id" title="binder">sz</span></a> (<a id="off:41" class="idref" href="#off:41"><span class="id" title="binder">off</span></a> : <span class="id" title="abbreviation">fin</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:40"><span class="id" title="variable">sz</span></a>) (<a id="vs:42" class="idref" href="#vs:42"><span class="id" title="binder">vs</span></a> : <span class="id" title="abbreviation">vec</span> <span class="id" title="inductive">val</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:40"><span class="id" title="variable">sz</span></a>) <a id="v:43" class="idref" href="#v:43"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:39"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:42"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:39"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:41"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;-</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:43"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:38"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:37"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">#</span><span class="id" title="notation">()</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:39"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="definition">vinsert</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:41"><span class="id" title="variable">off</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:43"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:42"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_store_offset_vec</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_xchg_offset" class="idref" href="#wbwp_xchg_offset"><span class="id" title="lemma">wbwp_xchg_offset</span></a> <a id="E:44" class="idref" href="#E:44"><span class="id" title="binder">E</span></a> <a id="out:45" class="idref" href="#out:45"><span class="id" title="binder">out</span></a> <a id="l:46" class="idref" href="#l:46"><span class="id" title="binder">l</span></a> <a id="off:47" class="idref" href="#off:47"><span class="id" title="binder">off</span></a> <a id="vs:48" class="idref" href="#vs:48"><span class="id" title="binder">vs</span></a> <a id="v:49" class="idref" href="#v:49"><span class="id" title="binder">v</span></a> <a id="v':50" class="idref" href="#v':50"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:48"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:47"><span class="id" title="variable">off</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:49"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:46"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:48"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a> <span class="id" title="constructor">Xchg</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:46"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:47"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':50"><span class="id" title="variable">v'</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:45"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:44"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:49"><span class="id" title="variable">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:46"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:47"><span class="id" title="variable">off</span></a><span class="id" title="notation">:=</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':50"><span class="id" title="variable">v'</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vs</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_xchg_offset</span> <span class="id" title="notation">with</span> "[$Hl] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_xchg_offset_vec" class="idref" href="#wbwp_xchg_offset_vec"><span class="id" title="lemma">wbwp_xchg_offset_vec</span></a> <a id="E:51" class="idref" href="#E:51"><span class="id" title="binder">E</span></a> <a id="out:52" class="idref" href="#out:52"><span class="id" title="binder">out</span></a> <a id="l:53" class="idref" href="#l:53"><span class="id" title="binder">l</span></a> <a id="sz:54" class="idref" href="#sz:54"><span class="id" title="binder">sz</span></a> (<a id="off:55" class="idref" href="#off:55"><span class="id" title="binder">off</span></a> : <span class="id" title="abbreviation">fin</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:54"><span class="id" title="variable">sz</span></a>) (<a id="vs:56" class="idref" href="#vs:56"><span class="id" title="binder">vs</span></a> : <span class="id" title="abbreviation">vec</span> <span class="id" title="inductive">val</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:54"><span class="id" title="variable">sz</span></a>) <a id="v:57" class="idref" href="#v:57"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:53"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:56"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a> <span class="id" title="constructor">Xchg</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:53"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:55"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:57"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:52"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:51"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:56"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:55"><span class="id" title="variable">off</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">);</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:53"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="definition">vinsert</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:55"><span class="id" title="variable">off</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:57"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:56"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_xchg_offset_vec</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_cmpxchg_suc_offset" class="idref" href="#wbwp_cmpxchg_suc_offset"><span class="id" title="lemma">wbwp_cmpxchg_suc_offset</span></a> <a id="E:58" class="idref" href="#E:58"><span class="id" title="binder">E</span></a> <a id="out:59" class="idref" href="#out:59"><span class="id" title="binder">out</span></a> <a id="l:60" class="idref" href="#l:60"><span class="id" title="binder">l</span></a> <a id="off:61" class="idref" href="#off:61"><span class="id" title="binder">off</span></a> <a id="vs:62" class="idref" href="#vs:62"><span class="id" title="binder">vs</span></a> <a id="v':63" class="idref" href="#v':63"><span class="id" title="binder">v'</span></a> <a id="v1:64" class="idref" href="#v1:64"><span class="id" title="binder">v1</span></a> <a id="v2:65" class="idref" href="#v2:65"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:62"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:61"><span class="id" title="variable">off</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':63"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':63"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:64"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">vals_compare_safe</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':63"><span class="id" title="variable">v'</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:64"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:60"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:62"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">CmpXchg</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:60"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:61"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:64"><span class="id" title="variable">v1</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:65"><span class="id" title="variable">v2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:59"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:58"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':63"><span class="id" title="variable">v'</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">#</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><span class="id" title="notation">)</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:60"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:61"><span class="id" title="variable">off</span></a><span class="id" title="notation">:=</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:65"><span class="id" title="variable">v2</span></a><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vs</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??? <span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_cmpxchg_suc_offset</span> <span class="id" title="notation">with</span> "[$Hl] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_cmpxchg_suc_offset_vec" class="idref" href="#wbwp_cmpxchg_suc_offset_vec"><span class="id" title="lemma">wbwp_cmpxchg_suc_offset_vec</span></a> <a id="E:66" class="idref" href="#E:66"><span class="id" title="binder">E</span></a> <a id="out:67" class="idref" href="#out:67"><span class="id" title="binder">out</span></a> <a id="l:68" class="idref" href="#l:68"><span class="id" title="binder">l</span></a> <a id="sz:69" class="idref" href="#sz:69"><span class="id" title="binder">sz</span></a> (<a id="off:70" class="idref" href="#off:70"><span class="id" title="binder">off</span></a> : <span class="id" title="abbreviation">fin</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:69"><span class="id" title="variable">sz</span></a>) (<a id="vs:71" class="idref" href="#vs:71"><span class="id" title="binder">vs</span></a> : <span class="id" title="abbreviation">vec</span> <span class="id" title="inductive">val</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:69"><span class="id" title="variable">sz</span></a>) <a id="v1:72" class="idref" href="#v1:72"><span class="id" title="binder">v1</span></a> <a id="v2:73" class="idref" href="#v2:73"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:71"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:70"><span class="id" title="variable">off</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:72"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">vals_compare_safe</span> (<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:71"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:70"><span class="id" title="variable">off</span></a>) <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:72"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:68"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:71"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">CmpXchg</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:68"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:70"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:72"><span class="id" title="variable">v1</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:73"><span class="id" title="variable">v2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:67"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:66"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:71"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:70"><span class="id" title="variable">off</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">#</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><span class="id" title="notation">)</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:68"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="definition">vinsert</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:70"><span class="id" title="variable">off</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:73"><span class="id" title="variable">v2</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:71"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?? <span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_cmpxchg_suc_offset_vec</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_cmpxchg_fail_offset" class="idref" href="#wbwp_cmpxchg_fail_offset"><span class="id" title="lemma">wbwp_cmpxchg_fail_offset</span></a> <a id="E:74" class="idref" href="#E:74"><span class="id" title="binder">E</span></a> <a id="out:75" class="idref" href="#out:75"><span class="id" title="binder">out</span></a> <a id="l:76" class="idref" href="#l:76"><span class="id" title="binder">l</span></a> <a id="dq:77" class="idref" href="#dq:77"><span class="id" title="binder">dq</span></a> <a id="off:78" class="idref" href="#off:78"><span class="id" title="binder">off</span></a> <a id="vs:79" class="idref" href="#vs:79"><span class="id" title="binder">vs</span></a> <a id="v0:80" class="idref" href="#v0:80"><span class="id" title="binder">v0</span></a> <a id="v1:81" class="idref" href="#v1:81"><span class="id" title="binder">v1</span></a> <a id="v2:82" class="idref" href="#v2:82"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:79"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:78"><span class="id" title="variable">off</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v0:80"><span class="id" title="variable">v0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#v0:80"><span class="id" title="variable">v0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:81"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">vals_compare_safe</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v0:80"><span class="id" title="variable">v0</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:81"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:76"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:77"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:79"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">CmpXchg</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:76"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:78"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:81"><span class="id" title="variable">v1</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:82"><span class="id" title="variable">v2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:75"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:74"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v0:80"><span class="id" title="variable">v0</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">#</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">)</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:76"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:77"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:79"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??? <span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_cmpxchg_fail_offset</span> <span class="id" title="notation">with</span> "[$Hl] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_cmpxchg_fail_offset_vec" class="idref" href="#wbwp_cmpxchg_fail_offset_vec"><span class="id" title="lemma">wbwp_cmpxchg_fail_offset_vec</span></a> <a id="E:83" class="idref" href="#E:83"><span class="id" title="binder">E</span></a> <a id="out:84" class="idref" href="#out:84"><span class="id" title="binder">out</span></a> <a id="l:85" class="idref" href="#l:85"><span class="id" title="binder">l</span></a> <a id="dq:86" class="idref" href="#dq:86"><span class="id" title="binder">dq</span></a> <a id="sz:87" class="idref" href="#sz:87"><span class="id" title="binder">sz</span></a> (<a id="off:88" class="idref" href="#off:88"><span class="id" title="binder">off</span></a> : <span class="id" title="abbreviation">fin</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:87"><span class="id" title="variable">sz</span></a>) (<a id="vs:89" class="idref" href="#vs:89"><span class="id" title="binder">vs</span></a> : <span class="id" title="abbreviation">vec</span> <span class="id" title="inductive">val</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:87"><span class="id" title="variable">sz</span></a>) <a id="v1:90" class="idref" href="#v1:90"><span class="id" title="binder">v1</span></a> <a id="v2:91" class="idref" href="#v2:91"><span class="id" title="binder">v2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:89"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:88"><span class="id" title="variable">off</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:90"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">vals_compare_safe</span> (<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:89"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:88"><span class="id" title="variable">off</span></a>) <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:90"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:85"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:86"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:89"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">CmpXchg</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:85"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:88"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:90"><span class="id" title="variable">v1</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:91"><span class="id" title="variable">v2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:84"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:83"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:89"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:88"><span class="id" title="variable">off</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">#</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">)</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:85"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:86"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:89"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#wbwp_cmpxchg_fail_offset"><span class="id" title="lemma">wbwp_cmpxchg_fail_offset</span></a>; [|<span class="id" title="var">done</span>..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">vlookup_lookup</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_faa_offset" class="idref" href="#wbwp_faa_offset"><span class="id" title="lemma">wbwp_faa_offset</span></a> <a id="E:92" class="idref" href="#E:92"><span class="id" title="binder">E</span></a> <a id="out:93" class="idref" href="#out:93"><span class="id" title="binder">out</span></a> <a id="l:94" class="idref" href="#l:94"><span class="id" title="binder">l</span></a> <a id="off:95" class="idref" href="#off:95"><span class="id" title="binder">off</span></a> <a id="vs:96" class="idref" href="#vs:96"><span class="id" title="binder">vs</span></a> (<a id="i1:97" class="idref" href="#i1:97"><span class="id" title="binder">i1</span></a> <a id="i2:98" class="idref" href="#i2:98"><span class="id" title="binder">i2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:96"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:95"><span class="id" title="variable">off</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#i1:97"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:94"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:96"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a> <span class="id" title="constructor">FAA</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:94"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:95"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#i2:98"><span class="id" title="variable">i2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:93"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:92"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="constructor">LitV</span> (<span class="id" title="constructor">LitInt</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#i1:97"><span class="id" title="variable">i1</span></a>)<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:94"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="notation">&lt;[</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:95"><span class="id" title="variable">off</span></a><span class="id" title="notation">:=</span><span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#i1:97"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#i2:98"><span class="id" title="variable">i2</span></a><span class="id" title="notation">)</span><span class="id" title="notation">]&gt;</span> <span class="id" title="notation">vs</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_faa_offset</span> <span class="id" title="notation">with</span> "[$Hl] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_faa_offset_vec" class="idref" href="#wbwp_faa_offset_vec"><span class="id" title="lemma">wbwp_faa_offset_vec</span></a> <a id="E:99" class="idref" href="#E:99"><span class="id" title="binder">E</span></a> <a id="out:100" class="idref" href="#out:100"><span class="id" title="binder">out</span></a> <a id="l:101" class="idref" href="#l:101"><span class="id" title="binder">l</span></a> <a id="sz:102" class="idref" href="#sz:102"><span class="id" title="binder">sz</span></a> (<a id="off:103" class="idref" href="#off:103"><span class="id" title="binder">off</span></a> : <span class="id" title="abbreviation">fin</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:102"><span class="id" title="variable">sz</span></a>) (<a id="vs:104" class="idref" href="#vs:104"><span class="id" title="binder">vs</span></a> : <span class="id" title="abbreviation">vec</span> <span class="id" title="inductive">val</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#sz:102"><span class="id" title="variable">sz</span></a>) (<a id="i1:105" class="idref" href="#i1:105"><span class="id" title="binder">i1</span></a> <a id="i2:106" class="idref" href="#i2:106"><span class="id" title="binder">i2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:104"><span class="id" title="variable">vs</span></a> <span class="id" title="notation">!!!</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:103"><span class="id" title="variable">off</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#i1:105"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:101"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:104"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a> <span class="id" title="constructor">FAA</span> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:101"><span class="id" title="variable">l</span></a> <span class="id" title="notation">+ₗ</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:103"><span class="id" title="variable">off</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#i2:106"><span class="id" title="variable">i2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:100"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:99"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="constructor">LitV</span> (<span class="id" title="constructor">LitInt</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#i1:105"><span class="id" title="variable">i1</span></a>)<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:101"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦∗</span> <span class="id" title="definition">vinsert</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#off:103"><span class="id" title="variable">off</span></a> <span class="id" title="notation">#(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#i1:105"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#i2:106"><span class="id" title="variable">i2</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#vs:104"><span class="id" title="variable">vs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "Hl HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_faa_offset_vec</span> <span class="id" title="notation">with</span> "[$Hl] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Derived prophecy laws 
<div class="paragraph"> </div>

 Lemmas for some particular expression inside the <span class="inlinecode"><span class="id" title="keyword">Resolve</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wbwp_resolve_proph" class="idref" href="#wbwp_resolve_proph"><span class="id" title="lemma">wbwp_resolve_proph</span></a> <a id="E:107" class="idref" href="#E:107"><span class="id" title="binder">E</span></a> <a id="out:108" class="idref" href="#out:108"><span class="id" title="binder">out</span></a> (<a id="p:109" class="idref" href="#p:109"><span class="id" title="binder">p</span></a> : <span class="id" title="definition">proph_id</span>) (<a id="pvs:110" class="idref" href="#pvs:110"><span class="id" title="binder">pvs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="inductive">val</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="inductive">val</span>)) <a id="v:111" class="idref" href="#v:111"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{{</span></a> <span class="id" title="definition">proph</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:109"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs:110"><span class="id" title="variable">pvs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">ResolveProph</span> (<span class="id" title="constructor">Val</span> <span class="id" title="notation">$</span> <span class="id" title="constructor">LitV</span> <span class="id" title="notation">$</span> <span class="id" title="constructor">LitProphecy</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:109"><span class="id" title="variable">p</span></a>) (<span class="id" title="constructor">Val</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:111"><span class="id" title="variable">v</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:108"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:107"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">{{{</span></a> <a id="pvs':112" class="idref" href="#pvs':112"><span class="id" title="binder">pvs'</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">RET</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">(</span></a><span class="id" title="constructor">LitV</span> <span class="id" title="constructor">LitUnit</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">);</span></a> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs:110"><span class="id" title="variable">pvs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="constructor">LitV</span> <span class="id" title="constructor">LitUnit</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:111"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs':112"><span class="id" title="variable">pvs'</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <span class="id" title="definition">proph</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:109"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs':112"><span class="id" title="variable">pvs'</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "Hp HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_resolve_proph</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_resolve_cmpxchg_suc" class="idref" href="#wbwp_resolve_cmpxchg_suc"><span class="id" title="lemma">wbwp_resolve_cmpxchg_suc</span></a> <a id="E:113" class="idref" href="#E:113"><span class="id" title="binder">E</span></a> <a id="out:114" class="idref" href="#out:114"><span class="id" title="binder">out</span></a> <a id="l:115" class="idref" href="#l:115"><span class="id" title="binder">l</span></a> (<a id="p:116" class="idref" href="#p:116"><span class="id" title="binder">p</span></a> : <span class="id" title="definition">proph_id</span>) (<a id="pvs:117" class="idref" href="#pvs:117"><span class="id" title="binder">pvs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="inductive">val</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="inductive">val</span>)) <a id="v1:118" class="idref" href="#v1:118"><span class="id" title="binder">v1</span></a> <a id="v2:119" class="idref" href="#v2:119"><span class="id" title="binder">v2</span></a> <a id="v:120" class="idref" href="#v:120"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">vals_compare_safe</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:118"><span class="id" title="variable">v1</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:118"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="definition">proph</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:116"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs:117"><span class="id" title="variable">pvs</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:115"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:118"><span class="id" title="variable">v1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">Resolve</span> (<span class="id" title="constructor">CmpXchg</span> <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:115"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:118"><span class="id" title="variable">v1</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:119"><span class="id" title="variable">v2</span></a>) <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:116"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:120"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:114"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:113"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:118"><span class="id" title="variable">v1</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">#</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <span class="id" title="notation">∃</span> <a id="pvs':121" class="idref" href="#pvs':121"><span class="id" title="binder">pvs'</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs:117"><span class="id" title="variable">pvs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:118"><span class="id" title="variable">v1</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">#</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><span class="id" title="notation">)</span>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:120"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs':121"><span class="id" title="variable">pvs'</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <span class="id" title="definition">proph</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:116"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs':121"><span class="id" title="variable">pvs'</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:115"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:119"><span class="id" title="variable">v2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "? HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_resolve_cmpxchg_suc</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_resolve_cmpxchg_fail" class="idref" href="#wbwp_resolve_cmpxchg_fail"><span class="id" title="lemma">wbwp_resolve_cmpxchg_fail</span></a> <a id="E:122" class="idref" href="#E:122"><span class="id" title="binder">E</span></a> <a id="out:123" class="idref" href="#out:123"><span class="id" title="binder">out</span></a> <a id="l:124" class="idref" href="#l:124"><span class="id" title="binder">l</span></a> (<a id="p:125" class="idref" href="#p:125"><span class="id" title="binder">p</span></a> : <span class="id" title="definition">proph_id</span>) (<a id="pvs:126" class="idref" href="#pvs:126"><span class="id" title="binder">pvs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<span class="id" title="inductive">val</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <span class="id" title="inductive">val</span>)) <a id="dq:127" class="idref" href="#dq:127"><span class="id" title="binder">dq</span></a> <a id="v':128" class="idref" href="#v':128"><span class="id" title="binder">v'</span></a> <a id="v1:129" class="idref" href="#v1:129"><span class="id" title="binder">v1</span></a> <a id="v2:130" class="idref" href="#v2:130"><span class="id" title="binder">v2</span></a> <a id="v:131" class="idref" href="#v:131"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':128"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:129"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="definition">vals_compare_safe</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':128"><span class="id" title="variable">v'</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:129"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{</span></a> <span class="id" title="definition">proph</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:125"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs:126"><span class="id" title="variable">pvs</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:124"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:127"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':128"><span class="id" title="variable">v'</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">Resolve</span> (<span class="id" title="constructor">CmpXchg</span> <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:124"><span class="id" title="variable">l</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v1:129"><span class="id" title="variable">v1</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v2:130"><span class="id" title="variable">v2</span></a>) <span class="id" title="notation">#</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:125"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:131"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#out:123"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#E:122"><span class="id" title="variable">E</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">{{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">RET</span></a> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':128"><span class="id" title="variable">v'</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">#</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">;</span></a> <span class="id" title="notation">∃</span> <a id="pvs':132" class="idref" href="#pvs':132"><span class="id" title="binder">pvs'</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs:126"><span class="id" title="variable">pvs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':128"><span class="id" title="variable">v'</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">#</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">)</span>%<span class="id" title="var">V</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v:131"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs':132"><span class="id" title="variable">pvs'</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <span class="id" title="definition">proph</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#p:125"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#pvs':132"><span class="id" title="variable">pvs'</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#l:124"><span class="id" title="variable">l</span></a> <span class="id" title="notation">↦</span><span class="id" title="notation">{</span><a class="idref" href="WBLogic.heap_lang.derived_laws.html#dq:127"><span class="id" title="variable">dq</span></a><span class="id" title="notation">}</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#v':128"><span class="id" title="variable">v'</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">}}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?? <span class="id" title="var">Φ</span>) "? HΦ". <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_resolve_cmpxchg_fail</span> <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="WBLogic.heap_lang.derived_laws.html#lifting"><span class="id" title="section">lifting</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
