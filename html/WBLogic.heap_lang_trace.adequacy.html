<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../index.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">WBLogic.heap_lang_trace.adequacy</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.algebra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">auth</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic.lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">mono_nat</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">proofmode</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">adequacy</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">WBLogic.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#"><span class="id" title="library">weakestpre</span></a> <a class="idref" href="WBLogic.program_logic.adequacy.html#"><span class="id" title="library">adequacy</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">WBLogic.heap_lang_trace</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="WBLogic.heap_lang_trace.notation.html#"><span class="id" title="library">notation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">WBLogic.heap_lang_trace</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="WBLogic.heap_lang_trace.proofmode.html#"><span class="id" title="library">proofmode</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">WBLogic.heap_lang_trace</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#"><span class="id" title="library">trace_resources</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.prelude</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">options</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="wbheapGpreS" class="idref" href="#wbheapGpreS"><span class="id" title="record">wbheapGpreS</span></a> <a id="0101b9beac487b383a5ba2a8f6922788" class="idref" href="#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="binder">Σ</span></a> := <span class="id" title="var">WBHeapGpreS</span> {<br/>
&nbsp;&nbsp;<a id="wbheapGpreS_iris" class="idref" href="#wbheapGpreS_iris"><span class="id" title="projection">wbheapGpreS_iris</span></a> :: <span class="id" title="class">invGpreS</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="wbheapGpreS_heap" class="idref" href="#wbheapGpreS_heap"><span class="id" title="projection">wbheapGpreS_heap</span></a> :: <span class="id" title="class">gen_heapGpreS</span> <span class="id" title="record">loc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="wbheapGpreS_inv_heap" class="idref" href="#wbheapGpreS_inv_heap"><span class="id" title="projection">wbheapGpreS_inv_heap</span></a> :: <span class="id" title="class">inv_heapGpreS</span> <span class="id" title="record">loc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="wbheapGpreS_proph" class="idref" href="#wbheapGpreS_proph"><span class="id" title="projection">wbheapGpreS_proph</span></a> :: <span class="id" title="class">proph_mapGpreS</span> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.proph_id"><span class="id" title="definition">proph_id</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="wbheapGS_step_cnt" class="idref" href="#wbheapGS_step_cnt"><span class="id" title="projection">wbheapGS_step_cnt</span></a> :: <span class="id" title="class">mono_natG</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="wbheapGpreS_gstacks" class="idref" href="#wbheapGpreS_gstacks"><span class="id" title="projection">wbheapGpreS_gstacks</span></a> :: <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacksGpre"><span class="id" title="class">gstacksGpre</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<a id="wbheapGpreS_trace" class="idref" href="#wbheapGpreS_trace"><span class="id" title="projection">wbheapGpreS_trace</span></a> :: <a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_preG"><span class="id" title="class">trace_preG</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="f12dc41d44a9fe024a9ce5e1b09f1608" class="idref" href="#f12dc41d44a9fe024a9ce5e1b09f1608"><span class="id" title="definition">heapΣ</span></a> : <span class="id" title="record">gFunctors</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">#[</span><span class="id" title="definition">invΣ</span><span class="id" title="notation">;</span> <span class="id" title="definition">gen_heapΣ</span> <span class="id" title="record">loc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>)<span class="id" title="notation">;</span> <span class="id" title="definition">inv_heapΣ</span> <span class="id" title="record">loc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>)<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">proph_mapΣ</span> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.proph_id"><span class="id" title="definition">proph_id</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>)<span class="id" title="notation">;</span> <span class="id" title="definition">mono_natΣ</span><span class="id" title="notation">;</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#be256e1c85a7f6d1fc4ae0252d1bc9b5"><span class="id" title="definition">gstacksΣ</span></a><span class="id" title="notation">;</span> <a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#b181a4fc8c4bbb0b4a63cbb7e54f9b33"><span class="id" title="definition">traceΣ</span></a><span class="id" title="notation">]</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="subG_heapGpreS" class="idref" href="#subG_heapGpreS"><span class="id" title="instance">subG_heapGpreS</span></a> {<a id="2ab75602e9b8af2ca6fd6dbdb1e68a19" class="idref" href="#2ab75602e9b8af2ca6fd6dbdb1e68a19"><span class="id" title="binder">Σ</span></a>} : <span class="id" title="class">subG</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#f12dc41d44a9fe024a9ce5e1b09f1608"><span class="id" title="definition">heapΣ</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#2ab75602e9b8af2ca6fd6dbdb1e68a19"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#wbheapGpreS"><span class="id" title="class">wbheapGpreS</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#2ab75602e9b8af2ca6fd6dbdb1e68a19"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_inG</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;The&nbsp;<span class="inlinecode"><span class="id" title="var">wp_adequacy</span></span>&nbsp;lemma&nbsp;is&nbsp;insufficient&nbsp;for&nbsp;a&nbsp;state&nbsp;interpretation<br/>
with&nbsp;a&nbsp;non-constant&nbsp;step&nbsp;index&nbsp;function.&nbsp;We&nbsp;thus&nbsp;use&nbsp;the&nbsp;more&nbsp;general<br/>
<span class="inlinecode"><span class="id" title="var">wp_strong_adequacy</span></span>&nbsp;lemma.&nbsp;The&nbsp;proof&nbsp;below&nbsp;replicates&nbsp;part&nbsp;of&nbsp;the&nbsp;proof&nbsp;of<br/>
<span class="inlinecode"><span class="id" title="var">wp_adequacy</span></span>,&nbsp;and&nbsp;it&nbsp;hence&nbsp;would&nbsp;make&nbsp;sense&nbsp;to&nbsp;see&nbsp;if&nbsp;we&nbsp;can&nbsp;prove&nbsp;a&nbsp;version<br/>
of&nbsp;<span class="inlinecode"><span class="id" title="var">wp_adequacy</span></span>&nbsp;for&nbsp;a&nbsp;non-constant&nbsp;step&nbsp;version.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="wbheap_adequacy" class="idref" href="#wbheap_adequacy"><span class="id" title="definition">wbheap_adequacy</span></a> <a id="0628ce849eb43988c0c2962e2467d294" class="idref" href="#0628ce849eb43988c0c2962e2467d294"><span class="id" title="binder">Σ</span></a> `{<a id="wbheapGpreS0:12" class="idref" href="#wbheapGpreS0:12"><span class="id" title="binder">!</span></a><a id="wbheapGpreS0:12" class="idref" href="#wbheapGpreS0:12"><span class="id" title="binder">wbheapGpreS</span></a> <a id="wbheapGpreS0:12" class="idref" href="#wbheapGpreS0:12"><span class="id" title="binder">Σ</span></a>} <a id="e:13" class="idref" href="#e:13"><span class="id" title="binder">e</span></a> <a id="90e77474618ba1a451407daf80040e41" class="idref" href="#90e77474618ba1a451407daf80040e41"><span class="id" title="binder">σ</span></a> <a id="5517267a1fa693b60453a7a09ed3d6d7" class="idref" href="#5517267a1fa693b60453a7a09ed3d6d7"><span class="id" title="binder">φ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">`{</span></a><a id="wbheapGS0:16" class="idref" href="#wbheapGS0:16"><span class="id" title="binder">!</span></a><a id="wbheapGS0:16" class="idref" href="#wbheapGS0:16"><span class="id" title="binder">wbheapGS</span></a> <a id="wbheapGS0:16" class="idref" href="#wbheapGS0:16"><span class="id" title="binder">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">},</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.heap_lang_trace.primitive_laws.html#inv_heap_inv"><span class="id" title="abbreviation">inv_heap_inv</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e:13"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">@</span></a> <span class="id" title="notation">⊤</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">{{</span></a> <a id="v:17" class="idref" href="#v:17"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">,</span></a> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#5517267a1fa693b60453a7a09ed3d6d7"><span class="id" title="variable">φ</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#v:17"><span class="id" title="variable">v</span></a><span class="id" title="notation">⌝</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">}}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="record">adequate</span> <span class="id" title="constructor">NotStuck</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e:13"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#90e77474618ba1a451407daf80040e41"><span class="id" title="variable">σ</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:18" class="idref" href="#v:18"><span class="id" title="binder">v</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#5517267a1fa693b60453a7a09ed3d6d7"><span class="id" title="variable">φ</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#v:18"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hwp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">adequate_alt</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">t2</span> σ2 [<span class="id" title="var">n</span> [<span class="id" title="var">κs</span> ?]]%<span class="id" title="lemma">erased_steps_nsteps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="WBLogic.program_logic.adequacy.html#wbwp_strong_adequacy"><span class="id" title="lemma">wbwp_strong_adequacy</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">_</span>); [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinv</span> ?).<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">gen_heap_init</span> σ.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.heap"><span class="id" title="projection">heap</span></a>)) <span class="id" title="keyword">as</span> (?) "[Hh _]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_auth_init"><span class="id" title="lemma">trace_auth_init</span></a> σ.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a>)) <span class="id" title="keyword">as</span> (?) "(Hta &amp; Ht &amp; Hth)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">inv_heap_init</span> <span class="id" title="record">loc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>)) <span class="id" title="keyword">as</span> (?) "&gt;Hi".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">proph_map_init</span> <span class="id" title="var">κs</span> σ.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.used_proph_id"><span class="id" title="projection">used_proph_id</span></a>)) <span class="id" title="keyword">as</span> (?) "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">mono_nat_own_alloc</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "[Hsteps _]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="var">Hwp</span> (<a class="idref" href="WBLogic.heap_lang_trace.primitive_laws.html#WBHeapGS"><span class="id" title="constructor">WBHeapGS</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="notation">with</span> "Hi"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="a1f2f8c42645ef2cdf56abf4643509eb" class="idref" href="#a1f2f8c42645ef2cdf56abf4643509eb"><span class="id" title="binder"><span id="ae0c06ba32431cba6651bad87205f6d2" class="id">σ</span></span></a> <a id="ns:20" class="idref" href="#ns:20"><span class="id" title="binder"><span id="ns:24" class="id">ns</span></span></a> <a id="5f31097ef8541c3de77edd3867d4dd73" class="idref" href="#5f31097ef8541c3de77edd3867d4dd73"><span class="id" title="binder"><span id="4996adadd1b5aff91ef811e216587569" class="id">κs</span></span></a> <a id="nt:22" class="idref" href="#nt:22"><span class="id" title="binder"><span id="nt:26" class="id">nt</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#a1f2f8c42645ef2cdf56abf4643509eb"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.heap"><span class="id" title="projection">heap</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_auth"><span class="id" title="definition">trace_auth</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#a1f2f8c42645ef2cdf56abf4643509eb"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">proph_map_interp</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#5f31097ef8541c3de77edd3867d4dd73"><span class="id" title="variable">κs</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#a1f2f8c42645ef2cdf56abf4643509eb"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.used_proph_id"><span class="id" title="projection">used_proph_id</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">mono_nat_auth_own</span> <span class="id" title="var">γ</span> 1 <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#ns:20"><span class="id" title="variable">ns</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:27" class="idref" href="#v:27"><span class="id" title="binder"><span id="v:28" class="id">v</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">⌜</span>φ <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#v:27"><span class="id" title="variable">v</span></a><span class="id" title="notation">⌝</span>%<span class="id" title="var">I</span>), (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">True</span>)%<span class="id" title="var">I</span>, <span class="id" title="var">_</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">es'</span> <span class="id" title="var">t2'</span> -&gt; ?) " _ H _".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">fupd_mask_intro_discard</span>; [<span class="id" title="var">done</span>|]. <span class="id" title="var">iSplit</span>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v2</span> <span class="id" title="var">t2''</span> [= -&gt; &lt;-]). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.to_of_val"><span class="id" title="lemma">to_of_val</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="wbheap_invariance" class="idref" href="#wbheap_invariance"><span class="id" title="definition">wbheap_invariance</span></a> <a id="b45015ea779d7a6908b541de791ac941" class="idref" href="#b45015ea779d7a6908b541de791ac941"><span class="id" title="binder">Σ</span></a> `{<a id="wbheapGpreS0:30" class="idref" href="#wbheapGpreS0:30"><span class="id" title="binder">!</span></a><a id="wbheapGpreS0:30" class="idref" href="#wbheapGpreS0:30"><span class="id" title="binder">wbheapGpreS</span></a> <a id="wbheapGpreS0:30" class="idref" href="#wbheapGpreS0:30"><span class="id" title="binder">Σ</span></a>} (<a id="N:31" class="idref" href="#N:31"><span class="id" title="binder">N</span></a>: <span class="id" title="definition">namespace</span>) (<a id="I:32" class="idref" href="#I:32"><span class="id" title="binder">I</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <a id="e:33" class="idref" href="#e:33"><span class="id" title="binder">e</span></a> <a id="e05d27d7d3ee8f8203c6aec5c67d6b2f" class="idref" href="#e05d27d7d3ee8f8203c6aec5c67d6b2f"><span class="id" title="binder">σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#I:32"><span class="id" title="variable">I</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e05d27d7d3ee8f8203c6aec5c67d6b2f"><span class="id" title="variable">σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">`{</span></a><a id="wbheapGS0:35" class="idref" href="#wbheapGS0:35"><span class="id" title="binder">!</span></a><a id="wbheapGS0:35" class="idref" href="#wbheapGS0:35"><span class="id" title="binder">wbheapGS</span></a> <a id="wbheapGS0:35" class="idref" href="#wbheapGS0:35"><span class="id" title="binder">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">},</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_inv"><span class="id" title="definition">trace_inv</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#N:31"><span class="id" title="variable">N</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#I:32"><span class="id" title="variable">I</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_is"><span class="id" title="definition">trace_is</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e05d27d7d3ee8f8203c6aec5c67d6b2f"><span class="id" title="variable">σ</span></a>) <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e:33"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">@</span></a> <span class="id" title="notation">⊤</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">{{</span></a> <span class="id" title="var">_</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">,</span></a> <span class="id" title="notation">True</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">}}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="104ac075b73b6784994e1dc7c5018e5d" class="idref" href="#104ac075b73b6784994e1dc7c5018e5d"><span class="id" title="binder">σ'</span></a> <a id="t:37" class="idref" href="#t:37"><span class="id" title="binder">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">rtc</span> <span class="id" title="definition">erased_step</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e:33"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e05d27d7d3ee8f8203c6aec5c67d6b2f"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#t:37"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#104ac075b73b6784994e1dc7c5018e5d"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#I:32"><span class="id" title="variable">I</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#104ac075b73b6784994e1dc7c5018e5d"><span class="id" title="variable">σ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HI</span> <span class="id" title="var">Hwp</span> <span class="id" title="var">t2</span> σ2 [<span class="id" title="var">n</span> [<span class="id" title="var">κs</span> ?]]%<span class="id" title="lemma">erased_steps_nsteps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="WBLogic.program_logic.adequacy.html#wbwp_strong_adequacy"><span class="id" title="lemma">wbwp_strong_adequacy</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">_</span>); [|<span class="id" title="var">done</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Hinv</span> ?).<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">gen_heap_init</span> σ.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.heap"><span class="id" title="projection">heap</span></a>)) <span class="id" title="keyword">as</span> (?) "[Hh _]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_auth_init"><span class="id" title="lemma">trace_auth_init</span></a> σ.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a>)) <span class="id" title="keyword">as</span> (?) "(Hta &amp; Ht &amp; Hth)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">inv_heap_init</span> <span class="id" title="record">loc</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>)) <span class="id" title="keyword">as</span> (?) "&gt;Hi".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">proph_map_init</span> <span class="id" title="var">κs</span> σ.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.used_proph_id"><span class="id" title="projection">used_proph_id</span></a>)) <span class="id" title="keyword">as</span> (?) "Hp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<span class="id" title="lemma">mono_nat_own_alloc</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "[Hsteps _]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="lemma">inv_alloc</span> <span class="id" title="var">N</span> <span class="id" title="var">_</span> (<span class="id" title="notation">∃</span> <a id="t:38" class="idref" href="#t:38"><span class="id" title="binder"><span id="t:39" class="id">t</span></span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_half_frag"><span class="id" title="definition">trace_half_frag</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#t:38"><span class="id" title="variable">t</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span><span class="id" title="var">I</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#t:38"><span class="id" title="variable">t</span></a><span class="id" title="notation">⌝</span>) <span class="id" title="notation">with</span> "[Hth]"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "&gt;#HI".<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iNext</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><span class="id" title="var">Hwp</span> (<a class="idref" href="WBLogic.heap_lang_trace.primitive_laws.html#WBHeapGS"><span class="id" title="constructor">WBHeapGS</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="notation">with</span> "HI Ht"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="8e75f09b8bdf2cf51669c3cfbb551722" class="idref" href="#8e75f09b8bdf2cf51669c3cfbb551722"><span class="id" title="binder"><span id="3b2ad139708e05f42dd73db16efefbb8" class="id">σ</span></span></a> <a id="ns:41" class="idref" href="#ns:41"><span class="id" title="binder"><span id="ns:45" class="id">ns</span></span></a> <a id="fd3e5d331940906fffd58f163170f0f7" class="idref" href="#fd3e5d331940906fffd58f163170f0f7"><span class="id" title="binder"><span id="fb8f4a0eca389962fc70f8fb03127b2b" class="id">κs</span></span></a> <a id="nt:43" class="idref" href="#nt:43"><span class="id" title="binder"><span id="nt:47" class="id">nt</span></span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><span class="id" title="definition">gen_heap_interp</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#8e75f09b8bdf2cf51669c3cfbb551722"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.heap"><span class="id" title="projection">heap</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_auth"><span class="id" title="definition">trace_auth</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#8e75f09b8bdf2cf51669c3cfbb551722"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">proph_map_interp</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#fd3e5d331940906fffd58f163170f0f7"><span class="id" title="variable">κs</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#8e75f09b8bdf2cf51669c3cfbb551722"><span class="id" title="variable">σ</span></a>.(<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.used_proph_id"><span class="id" title="projection">used_proph_id</span></a>) <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">mono_nat_auth_own</span> <span class="id" title="var">γ</span> 1 <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#ns:41"><span class="id" title="variable">ns</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">True</span>)%<span class="id" title="var">I</span>, (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="notation">True</span>)%<span class="id" title="var">I</span>, <span class="id" title="var">_</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">es'</span> <span class="id" title="var">t2'</span> -&gt; ?) " (? &amp; Hta &amp; ? &amp; ?) _ _".<br/>
&nbsp;&nbsp;<span class="id" title="var">iInv</span> "HI" <span class="id" title="keyword">as</span> "&gt;Ht'" "_". <span class="id" title="var">iDestruct</span> "Ht'" <span class="id" title="keyword">as</span> (<span class="id" title="var">t'</span>) "(Ht' &amp; %)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_auth_half_frag_agree"><span class="id" title="lemma">trace_auth_half_frag_agree</span></a> <span class="id" title="notation">with</span> "Hta Ht'"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %-&gt;.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">fupd_mask_intro_discard</span>; [<span class="id" title="var">solve_ndisj</span>|]. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Specialized adequacy theorem to establish trace properties as free theorems.
   This corresponds to Theorem 4.1 in the paper.

<div class="paragraph"> </div>

   Minor remark 1: in the paper, the state of the operational semantics is
   represented as a pair of a heap and a trace. Here, we instead have σ,σ' be
   inhabitants of the <span class="inlinecode"><a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.state"><span class="id" title="record">state</span></a></span> record type, and we use the <span class="inlinecode"><a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a></span> projection to
   get the trace of a given state.

<div class="paragraph"> </div>

   Minor remark 2: the following theorem is slightly more general than the one
   from the paper, as we only require the trace property to hold of the trace of
   the initial state σ, while the theorem in the paper is specialized to the
   case where the initial trace is the empty trace. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="module_invariance" class="idref" href="#module_invariance"><span class="id" title="lemma">module_invariance</span></a> {<a id="1599156b531db08541b0ea734472e882" class="idref" href="#1599156b531db08541b0ea734472e882"><span class="id" title="binder">Σ</span></a>} `{<a id="wbheapGpreS0:49" class="idref" href="#wbheapGpreS0:49"><span class="id" title="binder">!</span></a><a id="wbheapGpreS0:49" class="idref" href="#wbheapGpreS0:49"><span class="id" title="binder">wbheapGpreS</span></a> <a id="wbheapGpreS0:49" class="idref" href="#wbheapGpreS0:49"><span class="id" title="binder">Σ</span></a>} (<a id="N:50" class="idref" href="#N:50"><span class="id" title="binder">N</span></a>: <span class="id" title="definition">namespace</span>)<br/>
&nbsp;&nbsp;(<a id="644b8ad9a338e5d289dcc2e95e2880c1" class="idref" href="#644b8ad9a338e5d289dcc2e95e2880c1"><span class="id" title="binder">Φ</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">`{</span></a><a id="H:51" class="idref" href="#H:51"><span class="id" title="binder">wbheapGS</span></a> <a id="H:51" class="idref" href="#H:51"><span class="id" title="binder">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">},</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#1599156b531db08541b0ea734472e882"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#1599156b531db08541b0ea734472e882"><span class="id" title="variable">Σ</span></a>)  <span class="comment">(*&nbsp;Module&nbsp;specification&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="P0:53" class="idref" href="#P0:53"><span class="id" title="binder">P0</span></a>: <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#1599156b531db08541b0ea734472e882"><span class="id" title="variable">Σ</span></a>) <span class="comment">(*&nbsp;Initial&nbsp;resources&nbsp;required&nbsp;by&nbsp;the&nbsp;module&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="e:54" class="idref" href="#e:54"><span class="id" title="binder">e</span></a>: <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.expr"><span class="id" title="inductive">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.expr"><span class="id" title="inductive">expr</span></a>) <span class="comment">(*&nbsp;Context&nbsp;program,&nbsp;parameterized&nbsp;by&nbsp;the&nbsp;module&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="e_init:55" class="idref" href="#e_init:55"><span class="id" title="binder">e_init</span></a>: <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.expr"><span class="id" title="inductive">expr</span></a>) <span class="comment">(*&nbsp;Initialization&nbsp;code,&nbsp;used&nbsp;to&nbsp;allocate&nbsp;resources&nbsp;for&nbsp;P0&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="imimpl:56" class="idref" href="#imimpl:56"><span class="id" title="binder">imimpl</span></a>: <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.expr"><span class="id" title="inductive">expr</span></a>) <span class="comment">(*&nbsp;Implementation&nbsp;of&nbsp;the&nbsp;module&nbsp;(instrumented)&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="good_trace:57" class="idref" href="#good_trace:57"><span class="id" title="binder">good_trace</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <span class="comment">(*&nbsp;Trace&nbsp;property&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="4a70e451ab5af26934c040fea6e57d54" class="idref" href="#4a70e451ab5af26934c040fea6e57d54"><span class="id" title="binder">σ</span></a>: <a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.state"><span class="id" title="record">state</span></a>) <span class="comment">(*&nbsp;Initial&nbsp;state&nbsp;*)</span><br/>
:<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;initial&nbsp;trace&nbsp;must&nbsp;satisfy&nbsp;the&nbsp;property&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#good_trace:57"><span class="id" title="variable">good_trace</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#4a70e451ab5af26934c040fea6e57d54"><span class="id" title="variable">σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;context&nbsp;must&nbsp;be&nbsp;safe,&nbsp;given&nbsp;a&nbsp;module&nbsp;satisfying&nbsp;the&nbsp;specification&nbsp;Φ&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><span class="id" title="notation">⊢</span> <span class="id" title="notation">∀</span> <span class="id" title="notation">`(</span><a id="H:59" class="idref" href="#H:59"><span class="id" title="binder">wbheapGS</span></a> <a id="H:59" class="idref" href="#H:59"><span class="id" title="binder">Σ</span></a>) <a id="P:60" class="idref" href="#P:60"><span class="id" title="binder">P</span></a> <a id="m:61" class="idref" href="#m:61"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#644b8ad9a338e5d289dcc2e95e2880c1"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#P:60"><span class="id" title="variable">P</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#m:61"><span class="id" title="variable">m</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">{</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">WB</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#P:60"><span class="id" title="variable">P</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">}}}</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e:54"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#m:61"><span class="id" title="variable">m</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">{{{</span></a> <a id="v:62" class="idref" href="#v:62"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">RET</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#v:62"><span class="id" title="variable">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">;</span></a> <span class="id" title="notation">True</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">}}}</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;initialization&nbsp;code&nbsp;must&nbsp;provide&nbsp;P0;&nbsp;it&nbsp;does&nbsp;not&nbsp;need&nbsp;to&nbsp;be&nbsp;WB&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><span class="id" title="notation">⊢</span> <span class="id" title="notation">∀</span> <span class="id" title="notation">`(</span><a id="H:63" class="idref" href="#H:63"><span class="id" title="binder">wbheapGS</span></a> <a id="H:63" class="idref" href="#H:63"><span class="id" title="binder">Σ</span></a><span class="id" title="notation">),</span> <span class="id" title="notation">{{{</span> <span class="id" title="notation">True</span> <span class="id" title="notation">}}}</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e_init:55"><span class="id" title="variable">e_init</span></a> <span class="id" title="notation">{{{</span> <a id="v:64" class="idref" href="#v:64"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">RET</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#v:64"><span class="id" title="variable">v</span></a><span class="id" title="notation">;</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#P0:53"><span class="id" title="variable">P0</span></a> <span class="id" title="notation">}}}</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;implementation&nbsp;provided&nbsp;for&nbsp;the&nbsp;module&nbsp;(iops)&nbsp;must&nbsp;satisfy&nbsp;the&nbsp;specification&nbsp;Φ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;top&nbsp;of&nbsp;P0&nbsp;it&nbsp;is&nbsp;given&nbsp;SL&nbsp;resources&nbsp;for&nbsp;the&nbsp;trace.&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><span class="id" title="notation">⊢</span> <span class="id" title="notation">∀</span> <span class="id" title="notation">`(</span><a id="H:65" class="idref" href="#H:65"><span class="id" title="binder">wbheapGS</span></a> <a id="H:65" class="idref" href="#H:65"><span class="id" title="binder">Σ</span></a><span class="id" title="notation">),</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#644b8ad9a338e5d289dcc2e95e2880c1"><span class="id" title="variable">Φ</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#P0:53"><span class="id" title="variable">P0</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_is"><span class="id" title="definition">trace_is</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#4a70e451ab5af26934c040fea6e57d54"><span class="id" title="variable">σ</span></a>) <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.heap_lang_trace.trace_resources.html#trace_inv"><span class="id" title="definition">trace_inv</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#N:50"><span class="id" title="variable">N</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#good_trace:57"><span class="id" title="variable">good_trace</span></a>)%<span class="id" title="var">I</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#imimpl:56"><span class="id" title="variable">imimpl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Then&nbsp;the&nbsp;trace&nbsp;remains&nbsp;good&nbsp;at&nbsp;every&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="add49a37739b75525a862526cc02e70d" class="idref" href="#add49a37739b75525a862526cc02e70d"><span class="id" title="binder">σ'</span></a> <a id="e':67" class="idref" href="#e':67"><span class="id" title="binder">e'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="inductive">rtc</span> <span class="id" title="definition">erased_step</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a>(<a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e_init:55"><span class="id" title="variable">e_init</span></a><a class="idref" href="WBLogic.heap_lang_trace.notation.html#2ec28258c896f2c046d760685d2be2ab"><span class="id" title="notation">;;</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e:54"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#imimpl:56"><span class="id" title="variable">imimpl</span></a>)%<span class="id" title="var">E</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#4a70e451ab5af26934c040fea6e57d54"><span class="id" title="variable">σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#e':67"><span class="id" title="variable">e'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#add49a37739b75525a862526cc02e70d"><span class="id" title="variable">σ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#good_trace:57"><span class="id" title="variable">good_trace</span></a> (<a class="idref" href="WBLogic.heap_lang_trace.lang.html#heap_lang.trace"><span class="id" title="projection">trace</span></a> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#add49a37739b75525a862526cc02e70d"><span class="id" title="variable">σ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Htr</span>σ <span class="id" title="var">Hctx</span> <span class="id" title="var">Hinit</span> <span class="id" title="var">Himpl</span> σ' <span class="id" title="var">e'</span> <span class="id" title="var">Hsteps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="WBLogic.heap_lang_trace.adequacy.html#wbheap_invariance"><span class="id" title="definition">wbheap_invariance</span></a>; [<span class="id" title="var">done</span> | <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Htr</span>σ | | <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hsteps</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "HI Htr". <span class="id" title="var">wbwp_bind</span> <span class="id" title="var">e_init</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a>. <span class="id" title="var">iApply</span> <span class="id" title="var">Hinit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt;" (<span class="id" title="var">v</span>) "H0". <span class="id" title="var">wbwp_pures</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="var">Hctx</span> <span class="id" title="notation">with</span> "[] [H0 Htr HI]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iApply</span> <span class="id" title="var">Himpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
