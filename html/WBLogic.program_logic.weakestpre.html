<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../index.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">WBLogic.program_logic.weakestpre</h1>

<div class="code">
<span class="comment">(*&nbsp;This&nbsp;file&nbsp;is&nbsp;copied&nbsp;and&nbsp;adapted&nbsp;from&nbsp;the&nbsp;weakestpre&nbsp;file&nbsp;in&nbsp;the&nbsp;iris&nbsp;development.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">coPset</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">base</span> <span class="id" title="library">proofmode</span> <span class="id" title="library">classes</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.base_logic.lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">fancy_updates</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">language</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">weakestpre</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">WBLogic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#"><span class="id" title="library">ghost_stacks</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">uPred</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="wbwp" class="idref" href="#wbwp"><span class="id" title="definition">wbwp</span></a> `{<a id="irisGS0:3" class="idref" href="#irisGS0:3"><span class="id" title="binder">!</span></a><a id="irisGS0:3" class="idref" href="#irisGS0:3"><span class="id" title="binder">irisGS</span></a> <a id="aed330fafc52497700df4a17b24e754e" class="idref" href="#aed330fafc52497700df4a17b24e754e"><span class="id" title="binder"><span id="irisGS0:3" class="id">Λ</span></span></a> <a id="ebf069dbc779b42a15c441a6d39d5f83" class="idref" href="#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="binder"><span id="irisGS0:3" class="id">Σ</span></span></a>, <a id="gstacksIG0:4" class="idref" href="#gstacksIG0:4"><span class="id" title="binder">!</span></a><a id="gstacksIG0:4" class="idref" href="#gstacksIG0:4"><span class="id" title="binder">gstacksIG</span></a> <a id="gstacksIG0:4" class="idref" href="#gstacksIG0:4"><span class="id" title="binder">Σ</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="E:5" class="idref" href="#E:5"><span class="id" title="binder">E</span></a> : <span class="id" title="definition">coPset</span>) (<a id="out:6" class="idref" href="#out:6"><span class="id" title="binder">out</span></a> : <span class="id" title="definition">gset</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#ghost_id"><span class="id" title="definition">ghost_id</span></a>) (<a id="e:7" class="idref" href="#e:7"><span class="id" title="binder">e</span></a> : <span class="id" title="projection">expr</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aed330fafc52497700df4a17b24e754e"><span class="id" title="variable">Λ</span></a>) (<a id="ddd74b3e5ac7acdccfa97dcaa59e83fe" class="idref" href="#ddd74b3e5ac7acdccfa97dcaa59e83fe"><span class="id" title="binder">Φ</span></a> : <span class="id" title="projection">val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aed330fafc52497700df4a17b24e754e"><span class="id" title="variable">Λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="variable">Σ</span></a>) : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">∀</span> <a id="M:9" class="idref" href="#M:9"><span class="id" title="binder">M</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_except"><span class="id" title="definition">gstacks_except</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#M:9"><span class="id" title="variable">M</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:6"><span class="id" title="variable">out</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">WP</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:7"><span class="id" title="variable">e</span></a> <span class="id" title="notation">@</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:5"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span><a id="v:10" class="idref" href="#v:10"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">∃</span> <a id="N:11" class="idref" href="#N:11"><span class="id" title="binder">N</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#M:9"><span class="id" title="variable">M</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#N:11"><span class="id" title="variable">N</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_except"><span class="id" title="definition">gstacks_except</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#N:11"><span class="id" title="variable">N</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:6"><span class="id" title="variable">out</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ddd74b3e5ac7acdccfa97dcaa59e83fe"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:10"><span class="id" title="variable">v</span></a><span class="id" title="notation">}}</span>.<br/>

<br/>
<span class="id" title="keyword">Global Typeclasses Opaque</span> <span class="id" title="var">wbwp</span>.<br/>

<br/>
</div>

<div class="doc">
Notations for partial weakest preconditions  Notations without binder -- only parsing because they overlap with the
notations with binder. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="c4a2c4d7e3cc404db366e8ac4317091d" class="idref" href="#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">&quot;</span></a>'WBWP' e @ out ; E {{ Φ } }" := (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <span class="id" title="var">E</span> <span class="id" title="var">out</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> <span class="id" title="var">Φ</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Φ</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="83871ade4493ea4d36eeb63b2ee5f090" class="idref" href="#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">&quot;</span></a>'WBWP' e @ E {{ Φ } }" := (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <span class="id" title="var">E</span> <span class="id" title="notation">∅</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> <span class="id" title="var">Φ</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Φ</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="1b41cce3c7deb45135093ad9ae76ad2f" class="idref" href="#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">&quot;</span></a>'WBWP' e {{ Φ } }" := (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <span class="id" title="notation">⊤</span> <span class="id" title="notation">∅</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> <span class="id" title="var">Φ</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Φ</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="e6d3ba2ee27683b8a476a7d9eb365fe4" class="idref" href="#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">&quot;</span></a>'WBWP' e '@&lt;' out &gt;{{ Φ } }" := (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <span class="id" title="notation">⊤</span> <span class="id" title="var">out</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> <span class="id" title="var">Φ</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Φ</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="0e94461d641dcf3403e79b3abed679d5" class="idref" href="#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">&quot;</span></a>'WBWP' e @ out ; E {{ v , Q } }" := (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <span class="id" title="var">E</span> <span class="id" title="var">out</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:12" class="idref" href="#v:12"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">Q</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' 'WBWP'  e  '/' @  '[' out ;  '/' E  ']' '/' {{  '[' v ,  '/' Q  ']' } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="801a86db245502f3815ebdf42d2ad31b" class="idref" href="#801a86db245502f3815ebdf42d2ad31b"><span class="id" title="notation">&quot;</span></a>'WBWP' e @ E {{ v , Q } }" := (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <span class="id" title="var">E</span> <span class="id" title="notation">∅</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:13" class="idref" href="#v:13"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">Q</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' 'WBWP'  e  '/' @  E  '/' {{  '[' v ,  '/' Q  ']' } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="587f2ce6f88776428142d7ffd394299a" class="idref" href="#587f2ce6f88776428142d7ffd394299a"><span class="id" title="notation">&quot;</span></a>'WBWP' e {{ v , Q } }" := (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <span class="id" title="notation">⊤</span> <span class="id" title="notation">∅</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:14" class="idref" href="#v:14"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">Q</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' 'WBWP'  e  '/' {{  '[' v ,  '/' Q  ']' } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="9a0430da218d9bfd0352da8fc3e727ca" class="idref" href="#9a0430da218d9bfd0352da8fc3e727ca"><span class="id" title="notation">&quot;</span></a>'WBWP' e '@&lt;' out &gt;{{ v , Q } }" := (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <span class="id" title="notation">⊤</span> <span class="id" title="var">out</span> <span class="id" title="var">e</span>%<span class="id" title="var">E</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="v:15" class="idref" href="#v:15"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <span class="id" title="var">Q</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">e</span>, <span class="id" title="var">Q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' 'WBWP'  e  '/' '@&lt;'  out  &gt;{{  '[' v ,  '/' Q  ']' } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Texan&nbsp;triples&nbsp;*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="a7b5a8a068e18a9549ae5033b54d5f37" class="idref" href="#a7b5a8a068e18a9549ae5033b54d5f37"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @ out ; E {{{ x .. y , 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">□</span> <span class="id" title="notation">∀</span> <a id="946557258c2d61e1cd11bfa9e3555096" class="idref" href="#946557258c2d61e1cd11bfa9e3555096"><span class="id" title="binder">Φ</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:17" class="idref" href="#x:17"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> .. (<span class="id" title="notation">∀</span> <a id="y:18" class="idref" href="#y:18"><span class="id" title="binder">y</span></a><span class="id" title="notation">,</span> <span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#946557258c2d61e1cd11bfa9e3555096"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span>) .. <span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <span class="id" title="var">out</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <span class="id" title="var">E</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#946557258c2d61e1cd11bfa9e3555096"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">x</span> <span class="id" title="var">closed</span> <span class="id" title="var">binder</span>, <span class="id" title="var">y</span> <span class="id" title="var">closed</span> <span class="id" title="var">binder</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' {WB{{  '[' P  ']' } } }  '/  ' e  '/' @  '[' out ;  '/' E  ']' '/' {{{  '[' x  ..  y ,  RET  pat ;  '/' Q  ']' } } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="d7271e3f2e8ea04ed987cbd8e18bd2ac" class="idref" href="#d7271e3f2e8ea04ed987cbd8e18bd2ac"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @ E {{{ x .. y , 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">□</span> <span class="id" title="notation">∀</span> <a id="2b0062503a03b13c8021ea9cb8025386" class="idref" href="#2b0062503a03b13c8021ea9cb8025386"><span class="id" title="binder">Φ</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:20" class="idref" href="#x:20"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> .. (<span class="id" title="notation">∀</span> <a id="y:21" class="idref" href="#y:21"><span class="id" title="binder">y</span></a><span class="id" title="notation">,</span> <span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2b0062503a03b13c8021ea9cb8025386"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span>) .. <span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">@</span></a> <span class="id" title="var">E</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2b0062503a03b13c8021ea9cb8025386"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">x</span> <span class="id" title="var">closed</span> <span class="id" title="var">binder</span>, <span class="id" title="var">y</span> <span class="id" title="var">closed</span> <span class="id" title="var">binder</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' {WB{{  '[' P  ']' } } }  '/  ' e  '/' @  E  '/' {{{  '[' x  ..  y ,  RET  pat ;  '/' Q  ']' } } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="5644d34cea76de97daca103abb44a543" class="idref" href="#5644d34cea76de97daca103abb44a543"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e '@&lt;' out &gt;{{{ x .. y , 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">□</span> <span class="id" title="notation">∀</span> <a id="aac3510b991e7964a311c1cfd19ce29e" class="idref" href="#aac3510b991e7964a311c1cfd19ce29e"><span class="id" title="binder">Φ</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:23" class="idref" href="#x:23"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> .. (<span class="id" title="notation">∀</span> <a id="y:24" class="idref" href="#y:24"><span class="id" title="binder">y</span></a><span class="id" title="notation">,</span> <span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aac3510b991e7964a311c1cfd19ce29e"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span>) .. <span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">@</span></a> <span class="id" title="var">out</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aac3510b991e7964a311c1cfd19ce29e"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">x</span> <span class="id" title="var">closed</span> <span class="id" title="var">binder</span>, <span class="id" title="var">y</span> <span class="id" title="var">closed</span> <span class="id" title="var">binder</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' {WB{{  '[' P  ']' } } }  '/  ' e  '/' '@&lt;'  out  &gt;{{{  '[' x  ..  y ,  RET  pat ;  '/' Q  ']' } } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="2ebce73ec0367b1b6709364bd2424a25" class="idref" href="#2ebce73ec0367b1b6709364bd2424a25"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e {{{ x .. y , 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">□</span> <span class="id" title="notation">∀</span> <a id="a8c195e929f4ff97cb882bcf83eb9509" class="idref" href="#a8c195e929f4ff97cb882bcf83eb9509"><span class="id" title="binder">Φ</span></a><span class="id" title="notation">,</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:26" class="idref" href="#x:26"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> .. (<span class="id" title="notation">∀</span> <a id="y:27" class="idref" href="#y:27"><span class="id" title="binder">y</span></a><span class="id" title="notation">,</span> <span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#a8c195e929f4ff97cb882bcf83eb9509"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span>) .. <span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#a8c195e929f4ff97cb882bcf83eb9509"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">x</span> <span class="id" title="var">closed</span> <span class="id" title="var">binder</span>, <span class="id" title="var">y</span> <span class="id" title="var">closed</span> <span class="id" title="var">binder</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' {WB{{  '[' P  ']' } } }  '/  ' e  '/' {{{  '[' x  ..  y ,  RET  pat ;  '/' Q  ']' } } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="cc8e828fcc328e52c53aa151687b2765" class="idref" href="#cc8e828fcc328e52c53aa151687b2765"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @ out ; E {{{ 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">□</span> <span class="id" title="notation">∀</span> <a id="24a55b0b220e98811e5f8dd9beb73568" class="idref" href="#24a55b0b220e98811e5f8dd9beb73568"><span class="id" title="binder">Φ</span></a><span class="id" title="notation">,</span> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#24a55b0b220e98811e5f8dd9beb73568"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <span class="id" title="var">out</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <span class="id" title="var">E</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#24a55b0b220e98811e5f8dd9beb73568"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' {WB{{  '[' P  ']' } } }  '/  ' e  '/' @  '[' out ;  '/' E  ']' '/' {{{  '[' RET  pat ;  '/' Q  ']' } } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="8009e6e2d7d121fead47ed5bb3939c8c" class="idref" href="#8009e6e2d7d121fead47ed5bb3939c8c"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @ E {{{ 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">□</span> <span class="id" title="notation">∀</span> <a id="f340d7c6746b6f23ff61cfcff3371ae6" class="idref" href="#f340d7c6746b6f23ff61cfcff3371ae6"><span class="id" title="binder">Φ</span></a><span class="id" title="notation">,</span> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f340d7c6746b6f23ff61cfcff3371ae6"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">@</span></a> <span class="id" title="var">E</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f340d7c6746b6f23ff61cfcff3371ae6"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' {WB{{  '[' P  ']' } } }  '/  ' e  '/' @  E  '/' {{{  '[' RET  pat ;  '/' Q  ']' } } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="dafb1af4938f6335627f9a5a28391ebb" class="idref" href="#dafb1af4938f6335627f9a5a28391ebb"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e '@&lt;' out &gt;{{{ 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">□</span> <span class="id" title="notation">∀</span> <a id="01a46550ac8db3a3545feae0533fc1da" class="idref" href="#01a46550ac8db3a3545feae0533fc1da"><span class="id" title="binder">Φ</span></a><span class="id" title="notation">,</span> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#01a46550ac8db3a3545feae0533fc1da"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">@</span></a> <span class="id" title="var">out</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#01a46550ac8db3a3545feae0533fc1da"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' {WB{{  '[' P  ']' } } }  '/  ' e  '/' '@&lt;'  out  &gt;{{{  '[' RET  pat ;  '/' Q  ']' } } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="0cdda8f3dad175443ac2805ffbef1e38" class="idref" href="#0cdda8f3dad175443ac2805ffbef1e38"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e {{{ 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<span class="id" title="notation">□</span> <span class="id" title="notation">∀</span> <a id="5bd90bff1377a72e77b9ec2eb3e5e956" class="idref" href="#5bd90bff1377a72e77b9ec2eb3e5e956"><span class="id" title="binder">Φ</span></a><span class="id" title="notation">,</span> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#5bd90bff1377a72e77b9ec2eb3e5e956"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#5bd90bff1377a72e77b9ec2eb3e5e956"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[hv' {WB{{  '[' P  ']' } } }  '/  ' e  '/' {{{  '[' RET  pat ;  '/' Q  ']' } } } ']'") : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Aliases for stdpp scope -- they inherit the levels and format from above. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="f18ec7e1f1ac01c7be72b6f7a2b0e622" class="idref" href="#f18ec7e1f1ac01c7be72b6f7a2b0e622"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @ out ; E {{{ x .. y , 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="6b3fb000708ec78e6a13a3d4758824a0" class="idref" href="#6b3fb000708ec78e6a13a3d4758824a0"><span class="id" title="binder">Φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:33" class="idref" href="#x:33"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> .. (<span class="id" title="notation">∀</span> <a id="y:34" class="idref" href="#y:34"><span class="id" title="binder">y</span></a><span class="id" title="notation">,</span> <span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#6b3fb000708ec78e6a13a3d4758824a0"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span>) .. <span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <span class="id" title="var">out</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <span class="id" title="var">E</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#6b3fb000708ec78e6a13a3d4758824a0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>) : <span class="id" title="var">stdpp_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="555e877449512e55ddd28890a435f251" class="idref" href="#555e877449512e55ddd28890a435f251"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @ E {{{ x .. y , 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="e63dd68efb6de3208cc9c6b52e360825" class="idref" href="#e63dd68efb6de3208cc9c6b52e360825"><span class="id" title="binder">Φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:36" class="idref" href="#x:36"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> .. (<span class="id" title="notation">∀</span> <a id="y:37" class="idref" href="#y:37"><span class="id" title="binder">y</span></a><span class="id" title="notation">,</span> <span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e63dd68efb6de3208cc9c6b52e360825"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span>) .. <span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">@</span></a> <span class="id" title="var">E</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e63dd68efb6de3208cc9c6b52e360825"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">}}</span></a>) : <span class="id" title="var">stdpp_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="de2de8a2a57e4efaf5e0256295ca651b" class="idref" href="#de2de8a2a57e4efaf5e0256295ca651b"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e '@&lt;' out &gt;{{{ x .. y , 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="01609205a32fbfabf4636f929e17e6ac" class="idref" href="#01609205a32fbfabf4636f929e17e6ac"><span class="id" title="binder">Φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:39" class="idref" href="#x:39"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> .. (<span class="id" title="notation">∀</span> <a id="y:40" class="idref" href="#y:40"><span class="id" title="binder">y</span></a><span class="id" title="notation">,</span> <span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#01609205a32fbfabf4636f929e17e6ac"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span>) .. <span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">@&lt;</span></a> <span class="id" title="var">out</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">&gt;{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#01609205a32fbfabf4636f929e17e6ac"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">}}</span></a>) : <span class="id" title="var">stdpp_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="b181ad9b83a2d86ee43481f0bc632a95" class="idref" href="#b181ad9b83a2d86ee43481f0bc632a95"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e {{{ x .. y , 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="41d18e8a2b2e573b496086c21c3c16d4" class="idref" href="#41d18e8a2b2e573b496086c21c3c16d4"><span class="id" title="binder">Φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="x:42" class="idref" href="#x:42"><span class="id" title="binder">x</span></a><span class="id" title="notation">,</span> .. (<span class="id" title="notation">∀</span> <a id="y:43" class="idref" href="#y:43"><span class="id" title="binder">y</span></a><span class="id" title="notation">,</span> <span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#41d18e8a2b2e573b496086c21c3c16d4"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span>) .. <span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#41d18e8a2b2e573b496086c21c3c16d4"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">}}</span></a>) : <span class="id" title="var">stdpp_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="b123b7ada5e8681df69d4380d42f51d4" class="idref" href="#b123b7ada5e8681df69d4380d42f51d4"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @ out ; E {{{ 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="7c68d0cb8f41f7be431f16b40f1eeeec" class="idref" href="#7c68d0cb8f41f7be431f16b40f1eeeec"><span class="id" title="binder">Φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#7c68d0cb8f41f7be431f16b40f1eeeec"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <span class="id" title="var">out</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <span class="id" title="var">E</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#7c68d0cb8f41f7be431f16b40f1eeeec"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>) : <span class="id" title="var">stdpp_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="6aaff942012852a9217fc9e315ab160b" class="idref" href="#6aaff942012852a9217fc9e315ab160b"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @ E {{{ 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="1550f4023a2ec803efbb0c50400b45de" class="idref" href="#1550f4023a2ec803efbb0c50400b45de"><span class="id" title="binder">Φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1550f4023a2ec803efbb0c50400b45de"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">@</span></a> <span class="id" title="var">E</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1550f4023a2ec803efbb0c50400b45de"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#83871ade4493ea4d36eeb63b2ee5f090"><span class="id" title="notation">}}</span></a>) : <span class="id" title="var">stdpp_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="77fdff8a11c75c6afe120f952eb688a7" class="idref" href="#77fdff8a11c75c6afe120f952eb688a7"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e @&lt; out &gt; {{{ 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="4e0856880cdba251d5033850f8057534" class="idref" href="#4e0856880cdba251d5033850f8057534"><span class="id" title="binder">Φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#4e0856880cdba251d5033850f8057534"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">@&lt;</span></a> <span class="id" title="var">out</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">&gt;{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#4e0856880cdba251d5033850f8057534"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e6d3ba2ee27683b8a476a7d9eb365fe4"><span class="id" title="notation">}}</span></a>) : <span class="id" title="var">stdpp_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="69e9bc67e51c955b65b1bb18d57ad5f4" class="idref" href="#69e9bc67e51c955b65b1bb18d57ad5f4"><span class="id" title="notation">&quot;</span></a>'{WB{{' P } } } e {{{ 'RET' pat ; Q } } }" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="001faddda1c74c479de748020de17f40" class="idref" href="#001faddda1c74c479de748020de17f40"><span class="id" title="binder">Φ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="var">P</span> <span class="id" title="notation">-∗</span> <span class="id" title="notation">▷</span> <span class="id" title="notation">(</span><span class="id" title="var">Q</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#001faddda1c74c479de748020de17f40"><span class="id" title="variable">Φ</span></a> <span class="id" title="var">pat</span>%<span class="id" title="var">V</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">e</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#001faddda1c74c479de748020de17f40"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1b41cce3c7deb45135093ad9ae76ad2f"><span class="id" title="notation">}}</span></a>) : <span class="id" title="var">stdpp_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="wp" class="idref" href="#wp"><span class="id" title="section">wp</span></a>.<br/>
<span class="id" title="keyword">Context</span> `{<a id="irisGS0:50" class="idref" href="#irisGS0:50"><span class="id" title="binder">!</span></a><a id="irisGS0:50" class="idref" href="#irisGS0:50"><span class="id" title="binder">irisGS</span></a> <a id="212f2998a76421e469f0ad4e6c176dc7" class="idref" href="#212f2998a76421e469f0ad4e6c176dc7"><span class="id" title="binder"><span id="irisGS0:50" class="id">Λ</span></span></a> <a id="bee78f44e79dd1f39e7aa3afe03ef2db" class="idref" href="#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="binder"><span id="irisGS0:50" class="id">Σ</span></span></a>, <a id="gstacksIG0:51" class="idref" href="#gstacksIG0:51"><span class="id" title="binder">!</span></a><a id="gstacksIG0:51" class="idref" href="#gstacksIG0:51"><span class="id" title="binder">gstacksIG</span></a> <a id="gstacksIG0:51" class="idref" href="#gstacksIG0:51"><span class="id" title="binder">Σ</span></a>}.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#872cc0692c45f59ed603be36809beb0e"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">Φ</span> : <span class="id" title="projection">val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aaa17055334b59f7fd85cf2ac3982981"><span class="id" title="variable">Λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#872cc0692c45f59ed603be36809beb0e"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">v</span> : <span class="id" title="projection">val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aaa17055334b59f7fd85cf2ac3982981"><span class="id" title="variable">Λ</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">e</span> : <span class="id" title="projection">expr</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aaa17055334b59f7fd85cf2ac3982981"><span class="id" title="variable">Λ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="wbwp_ne" class="idref" href="#wbwp_ne"><span class="id" title="instance">wbwp_ne</span></a> <a id="E:52" class="idref" href="#E:52"><span class="id" title="binder">E</span></a> <a id="out:53" class="idref" href="#out:53"><span class="id" title="binder">out</span></a> <a id="e:54" class="idref" href="#e:54"><span class="id" title="binder">e</span></a> <a id="n:55" class="idref" href="#n:55"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<span class="id" title="definition">dist</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:55"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:55"><span class="id" title="variable">n</span></a>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:52"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:53"><span class="id" title="variable">out</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:54"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> ???; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> /=; <span class="id" title="tactic">repeat</span> <span class="id" title="var">f_equiv</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="wbwp_proper" class="idref" href="#wbwp_proper"><span class="id" title="instance">wbwp_proper</span></a> <a id="E:56" class="idref" href="#E:56"><span class="id" title="binder">E</span></a> <a id="out:57" class="idref" href="#out:57"><span class="id" title="binder">out</span></a> <a id="e:58" class="idref" href="#e:58"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <span class="id" title="notation">(≡)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(≡)</span>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:56"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:57"><span class="id" title="variable">out</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:58"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Φ</span> <span class="id" title="var">Φ'</span> ?; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">equiv_dist</span>=&gt;<span class="id" title="var">n</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_ne"><span class="id" title="instance">wbwp_ne</span></a>=&gt;<span class="id" title="var">v</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">equiv_dist</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="wbwp_contractive" class="idref" href="#wbwp_contractive"><span class="id" title="instance">wbwp_contractive</span></a> <a id="E:59" class="idref" href="#E:59"><span class="id" title="binder">E</span></a> <a id="out:60" class="idref" href="#out:60"><span class="id" title="binder">out</span></a> <a id="e:61" class="idref" href="#e:61"><span class="id" title="binder">e</span></a> <a id="n:62" class="idref" href="#n:62"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:61"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<span class="id" title="record">dist_later</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:62"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="definition">dist</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:62"><span class="id" title="variable">n</span></a>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:59"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:60"><span class="id" title="variable">out</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:61"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">He</span> <span class="id" title="var">Φ</span> <span class="id" title="var">Ψ</span> <span class="id" title="var">HΦ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> /=; <span class="id" title="tactic">do</span> 3 <span class="id" title="var">f_equiv</span>; <span class="id" title="tactic">apply</span> <span class="id" title="instance">wp_contractive</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">dist_later_0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">dist_later_S</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">f_equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">dist_later_S</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HΦ</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_value_fupd'" class="idref" href="#wbwp_value_fupd'"><span class="id" title="lemma">wbwp_value_fupd'</span></a> <a id="E:63" class="idref" href="#E:63"><span class="id" title="binder">E</span></a> <a id="out:64" class="idref" href="#out:64"><span class="id" title="binder">out</span></a> <a id="b306840b1fd112ec187cbb2f03a9e4b0" class="idref" href="#b306840b1fd112ec187cbb2f03a9e4b0"><span class="id" title="binder">Φ</span></a> <a id="v:66" class="idref" href="#v:66"><span class="id" title="binder">v</span></a> : <span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:63"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b306840b1fd112ec187cbb2f03a9e4b0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:66"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <span class="id" title="projection">of_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:66"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:64"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:63"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b306840b1fd112ec187cbb2f03a9e4b0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>; <span class="id" title="var">iIntros</span> "&gt;?" (?) "?"; <span class="id" title="var">iApply</span> <span class="id" title="lemma">wp_value'</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_strong_mono" class="idref" href="#wbwp_strong_mono"><span class="id" title="lemma">wbwp_strong_mono</span></a> <a id="E1:67" class="idref" href="#E1:67"><span class="id" title="binder">E1</span></a> <a id="E2:68" class="idref" href="#E2:68"><span class="id" title="binder">E2</span></a> <a id="out:69" class="idref" href="#out:69"><span class="id" title="binder">out</span></a> <a id="e:70" class="idref" href="#e:70"><span class="id" title="binder">e</span></a> <a id="98b23dd2453bc6f1e1411fe08056ff75" class="idref" href="#98b23dd2453bc6f1e1411fe08056ff75"><span class="id" title="binder">Φ</span></a> <a id="3fa6d7cb96b8f65d19465cc6483364ee" class="idref" href="#3fa6d7cb96b8f65d19465cc6483364ee"><span class="id" title="binder">Ψ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:67"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:68"><span class="id" title="variable">E2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:70"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:69"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:67"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#98b23dd2453bc6f1e1411fe08056ff75"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="v:73" class="idref" href="#v:73"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#98b23dd2453bc6f1e1411fe08056ff75"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:73"><span class="id" title="variable">v</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:68"><span class="id" title="variable">E2</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#3fa6d7cb96b8f65d19465cc6483364ee"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:73"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:70"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:69"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:68"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#3fa6d7cb96b8f65d19465cc6483364ee"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HE</span>) "H HΦ".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_strong_mono</span> <span class="id" title="notation">with</span> "[H HM]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|<span class="id" title="var">eassumption</span>|<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "H"|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (?) "[? [? ?]]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"HΦ" <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_get_gstack_full" class="idref" href="#wbwp_get_gstack_full"><span class="id" title="lemma">wbwp_get_gstack_full</span></a> <a id="n:74" class="idref" href="#n:74"><span class="id" title="binder">n</span></a> <a id="E:75" class="idref" href="#E:75"><span class="id" title="binder">E</span></a> <a id="out:76" class="idref" href="#out:76"><span class="id" title="binder">out</span></a> <a id="e:77" class="idref" href="#e:77"><span class="id" title="binder">e</span></a> <a id="e8282b68f20f3c9a21aea1d1b1422e79" class="idref" href="#e8282b68f20f3c9a21aea1d1b1422e79"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#n:74"><span class="id" title="variable">n</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:76"><span class="id" title="variable">out</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_exists"><span class="id" title="definition">gstack_exists</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:74"><span class="id" title="variable">n</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="s:79" class="idref" href="#s:79"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_full"><span class="id" title="definition">gstack_full</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:74"><span class="id" title="variable">n</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#s:79"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:77"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">(</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#out:76"><span class="id" title="variable">out</span></a> <span class="id" title="notation">∪</span> <span class="id" title="notation">{[</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#n:74"><span class="id" title="variable">n</span></a><span class="id" title="notation">]}</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">);</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:75"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a><a id="v:80" class="idref" href="#v:80"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_full"><span class="id" title="definition">gstack_full</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:74"><span class="id" title="variable">n</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#s:79"><span class="id" title="variable">s</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e8282b68f20f3c9a21aea1d1b1422e79"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:80"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:77"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:76"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:75"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e8282b68f20f3c9a21aea1d1b1422e79"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "#Hex HWBWP".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_exists_in"><span class="id" title="lemma">gstack_exists_in</span></a> <span class="id" title="notation">with</span> "Hex HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %?.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_take_out"><span class="id" title="lemma">gstacks_take_out</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> <span class="id" title="notation">with</span> "Hex HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span> <span class="id" title="var">HMn</span>) "[HM Hfl]"; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "[HM Hfl HWBWP]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"HWBWP" <span class="id" title="notation">with</span> "[$] [$]"<span class="id" title="notation">)</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">N</span> <span class="id" title="var">HNM</span>) "(Hgs &amp; Hfl &amp; HΦ)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_put_back"><span class="id" title="lemma">gstacks_put_back</span></a> <span class="id" title="notation">with</span> "Hfl Hgs"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "Hgs"; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="notation">(</span><span class="id" title="var">out</span> <span class="id" title="notation">∪</span> <span class="id" title="notation">{[</span><span class="id" title="var">n</span><span class="id" title="notation">]}</span><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><span class="id" title="var">n</span><span class="id" title="notation">]}</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">out</span> <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_mend" class="idref" href="#wbwp_mend"><span class="id" title="lemma">wbwp_mend</span></a> <a id="n:81" class="idref" href="#n:81"><span class="id" title="binder">n</span></a> <a id="s:82" class="idref" href="#s:82"><span class="id" title="binder">s</span></a> <a id="E:83" class="idref" href="#E:83"><span class="id" title="binder">E</span></a> <a id="out:84" class="idref" href="#out:84"><span class="id" title="binder">out</span></a> <a id="e:85" class="idref" href="#e:85"><span class="id" title="binder">e</span></a> <a id="bb7851dece54115549467d51986ace86" class="idref" href="#bb7851dece54115549467d51986ace86"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_full"><span class="id" title="definition">gstack_full</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:81"><span class="id" title="variable">n</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#s:82"><span class="id" title="variable">s</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:85"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:84"><span class="id" title="variable">out</span></a> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#n:81"><span class="id" title="variable">n</span></a><span class="id" title="notation">]}</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:83"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#bb7851dece54115549467d51986ace86"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:85"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:84"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:83"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a><a id="v:87" class="idref" href="#v:87"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_full"><span class="id" title="definition">gstack_full</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:81"><span class="id" title="variable">n</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#s:82"><span class="id" title="variable">s</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#bb7851dece54115549467d51986ace86"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:87"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hfl HWBWP".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_full_is_out"><span class="id" title="lemma">gstack_full_is_out</span></a> <span class="id" title="notation">with</span> "Hfl HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %?.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_except_included"><span class="id" title="lemma">gstacks_except_included</span></a> <span class="id" title="notation">with</span> "HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "%".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_full_exists"><span class="id" title="lemma">gstack_full_exists</span></a> <span class="id" title="notation">with</span> "Hfl"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hex".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">M</span> <span class="id" title="notation">!!</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">s'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">HMns'</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">not_elem_of_dom</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HMns'</span>; <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_out_swap"><span class="id" title="lemma">gstacks_out_swap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> <span class="id" title="var">s</span> <span class="id" title="notation">with</span> "HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "HM"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_put_back"><span class="id" title="lemma">gstacks_put_back</span></a> <span class="id" title="notation">with</span> "Hfl HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "HM"; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <span class="id" title="notation">(</span>"HWBWP" <span class="id" title="notation">with</span> "HM"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "[$]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">N</span>) "(%&amp;HM&amp;?)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_take_out"><span class="id" title="lemma">gstacks_take_out</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> <span class="id" title="notation">with</span> "Hex HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s''</span> <span class="id" title="var">HMn</span>) "[HM Hfl]"; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">out</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><span class="id" title="var">n</span><span class="id" title="notation">]}</span> <span class="id" title="notation">∪</span> <span class="id" title="notation">{[</span><span class="id" title="var">n</span><span class="id" title="notation">]}</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">out</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="lemma">set_eq</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">split</span>; [|<span class="id" title="var">set_solver</span>]. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">m</span>)); <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_out_swap"><span class="id" title="lemma">gstacks_out_swap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> <span class="id" title="var">s'</span> <span class="id" title="notation">with</span> "HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "HM"; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">N</span> <span class="id" title="notation">!!</span> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>; <span class="id" title="var">last</span> <span class="id" title="var">eassumption</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> //. }<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">map_subseteq_spec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> ? <span class="id" title="var">HMi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n</span>)) <span class="id" title="keyword">as</span> [-&gt;|]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HMns'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HMi</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="lemma">lookup_weaken</span>; <span class="id" title="var">last</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert_ne</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_make_gstack" class="idref" href="#wbwp_make_gstack"><span class="id" title="lemma">wbwp_make_gstack</span></a> <a id="R:88" class="idref" href="#R:88"><span class="id" title="binder">R</span></a> <a id="E:89" class="idref" href="#E:89"><span class="id" title="binder">E</span></a> <a id="out:90" class="idref" href="#out:90"><span class="id" title="binder">out</span></a> <a id="e:91" class="idref" href="#e:91"><span class="id" title="binder">e</span></a> <a id="523b5784d07bd310166b6c41b9ac410f" class="idref" href="#523b5784d07bd310166b6c41b9ac410f"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="n:93" class="idref" href="#n:93"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#n:93"><span class="id" title="variable">n</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:90"><span class="id" title="variable">out</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_full"><span class="id" title="definition">gstack_full</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_frag"><span class="id" title="definition">gstack_frag</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:89"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <span class="id" title="notation">∃</span> <a id="stk:94" class="idref" href="#stk:94"><span class="id" title="binder">stk</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_full"><span class="id" title="definition">gstack_full</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#stk:94"><span class="id" title="variable">stk</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:88"><span class="id" title="variable">R</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:93"><span class="id" title="variable">n</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="n:95" class="idref" href="#n:95"><span class="id" title="binder">n</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#n:95"><span class="id" title="variable">n</span></a> <span class="id" title="notation">∉</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:90"><span class="id" title="variable">out</span></a><span class="id" title="notation">⌝</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:88"><span class="id" title="variable">R</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#n:95"><span class="id" title="variable">n</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:91"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:90"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:89"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#523b5784d07bd310166b6c41b9ac410f"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:91"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:90"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:89"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#523b5784d07bd310166b6c41b9ac410f"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hstk HWP".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_except_included"><span class="id" title="lemma">gstacks_except_included</span></a> <span class="id" title="notation">with</span> "HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> %?.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_alloc"><span class="id" title="lemma">gstack_alloc</span></a> <span class="id" title="notation">with</span> "HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">n</span>) "(%&amp;HM&amp;Hfr)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstack_frag_exists"><span class="id" title="lemma">gstack_frag_exists</span></a> <span class="id" title="notation">with</span> "Hfr"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "#Hex".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_take_out"><span class="id" title="lemma">gstacks_take_out</span></a> <span class="id" title="notation">with</span> "Hex HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>) "[HM Hfl]"; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"Hstk" <span class="id" title="notation">with</span> "[] Hfl Hfr"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span>) "[Hfl HR]"; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_out_swap"><span class="id" title="lemma">gstacks_out_swap</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">n</span> <span class="id" title="var">s</span> <span class="id" title="notation">with</span> "HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "HM"; <span class="id" title="tactic">first</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iPoseProof</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.ghost_stacks.html#gstacks_put_back"><span class="id" title="lemma">gstacks_put_back</span></a> <span class="id" title="notation">with</span> "Hfl HM"<span class="id" title="notation">)</span> <span class="id" title="keyword">as</span> "HM"; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">lookup_insert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">insert_insert</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="notation">(</span><span class="id" title="var">out</span> <span class="id" title="notation">∪</span> <span class="id" title="notation">{[</span><span class="id" title="var">n</span><span class="id" title="notation">]}</span><span class="id" title="notation">)</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">{[</span><span class="id" title="var">n</span><span class="id" title="notation">]}</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">out</span> <span class="id" title="tactic">by</span> <span class="id" title="var">set_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "[-]"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span>"HWP" <span class="id" title="notation">with</span> "[] [$] [$]"<span class="id" title="notation">)</span>. <span class="id" title="var">set_solver</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">N</span> <span class="id" title="var">HNM</span>) "(Hgs &amp; HΦ)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="var">last</span> <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">insert_subseteq</span>, <span class="id" title="lemma">not_elem_of_dom</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fupd_wbwp" class="idref" href="#fupd_wbwp"><span class="id" title="lemma">fupd_wbwp</span></a> <a id="E:96" class="idref" href="#E:96"><span class="id" title="binder">E</span></a> <a id="out:97" class="idref" href="#out:97"><span class="id" title="binder">out</span></a> <a id="e:98" class="idref" href="#e:98"><span class="id" title="binder">e</span></a> <a id="5b35d6cd62730be398cbee937a8b0e45" class="idref" href="#5b35d6cd62730be398cbee937a8b0e45"><span class="id" title="binder">Φ</span></a> : <span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:96"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:98"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:97"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:96"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#5b35d6cd62730be398cbee937a8b0e45"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:98"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:97"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:96"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#5b35d6cd62730be398cbee937a8b0e45"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>; <span class="id" title="var">iIntros</span> "H" (<span class="id" title="var">M</span>) "?"; <span class="id" title="var">iMod</span> "H"; <span class="id" title="var">iApply</span> "H"; <span class="id" title="var">iAssumption</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_fupd" class="idref" href="#wbwp_fupd"><span class="id" title="lemma">wbwp_fupd</span></a> <a id="E:100" class="idref" href="#E:100"><span class="id" title="binder">E</span></a> <a id="out:101" class="idref" href="#out:101"><span class="id" title="binder">out</span></a> <a id="e:102" class="idref" href="#e:102"><span class="id" title="binder">e</span></a> <a id="480d97dbc43944b9643869d7380c1ae5" class="idref" href="#480d97dbc43944b9643869d7380c1ae5"><span class="id" title="binder">Φ</span></a> : <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:102"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:101"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:100"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:104" class="idref" href="#v:104"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:100"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#480d97dbc43944b9643869d7380c1ae5"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:104"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:102"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:101"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:100"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#480d97dbc43944b9643869d7380c1ae5"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> "H". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_strong_mono"><span class="id" title="lemma">wbwp_strong_mono</span></a> <span class="id" title="var">E</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wp_atomic" class="idref" href="#wp_atomic"><span class="id" title="lemma">wp_atomic</span></a> <a id="E1:105" class="idref" href="#E1:105"><span class="id" title="binder">E1</span></a> <a id="E2:106" class="idref" href="#E2:106"><span class="id" title="binder">E2</span></a> <a id="out:107" class="idref" href="#out:107"><span class="id" title="binder">out</span></a> <a id="e:108" class="idref" href="#e:108"><span class="id" title="binder">e</span></a> <a id="be87688254208c77483a688b397bf112" class="idref" href="#be87688254208c77483a688b397bf112"><span class="id" title="binder">Φ</span></a> `{<a id="Atomic0:110" class="idref" href="#Atomic0:110"><span class="id" title="binder">!</span></a><a id="Atomic0:110" class="idref" href="#Atomic0:110"><span class="id" title="binder">Atomic</span></a> <a id="Atomic0:110" class="idref" href="#Atomic0:110"><span class="id" title="binder">WeaklyAtomic</span></a> <a id="Atomic0:110" class="idref" href="#Atomic0:110"><span class="id" title="binder">e</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:105"><span class="id" title="variable">E1</span></a><span class="id" title="notation">,</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:106"><span class="id" title="variable">E2</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:108"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:107"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:106"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:111" class="idref" href="#v:111"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:106"><span class="id" title="variable">E2</span></a><span class="id" title="notation">,</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:105"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#be87688254208c77483a688b397bf112"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:111"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:108"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:107"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:105"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#be87688254208c77483a688b397bf112"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>; <span class="id" title="var">iIntros</span> "H" (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">wp_atomic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> "H"; <span class="id" title="var">iModIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "[H HM]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "H".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (?) "(?&amp;?&amp;&gt;?)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wp_wbwp" class="idref" href="#wp_wbwp"><span class="id" title="lemma">wp_wbwp</span></a> <a id="E:112" class="idref" href="#E:112"><span class="id" title="binder">E</span></a> <a id="out:113" class="idref" href="#out:113"><span class="id" title="binder">out</span></a> <a id="e:114" class="idref" href="#e:114"><span class="id" title="binder">e</span></a> <a id="bcfd84fbe06e9c7094cfb59bee848aff" class="idref" href="#bcfd84fbe06e9c7094cfb59bee848aff"><span class="id" title="binder">Φ</span></a> : <span class="id" title="notation">WP</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:114"><span class="id" title="variable">e</span></a> <span class="id" title="notation">@</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:112"><span class="id" title="variable">E</span></a> <span class="id" title="notation">{{</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#bcfd84fbe06e9c7094cfb59bee848aff"><span class="id" title="variable">Φ</span></a> <span class="id" title="notation">}}</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:114"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:113"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:112"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#bcfd84fbe06e9c7094cfb59bee848aff"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HWP".<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "HWP"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "?"; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma gives us access to the later credits that are generated in each step,
  assuming that we have instantiated <span class="inlinecode"><span class="id" title="method">num_laters_per_step</span></span> with a non-trivial (e.g. linear)
  function.
  This lemma can be used to provide a "regeneration" mechanism for later credits.
  <span class="inlinecode"><span class="id" title="method">state_interp</span></span> will have to be defined in a way that involves the required regneration
  tokens. TODO: point to an example of how this is used.

<div class="paragraph"> </div>

  In detail, a client can use this lemma as follows:
<ul class="doclist">
<li> the client obtains the state interpretation <span class="inlinecode"><span class="id" title="method">state_interp</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">ns</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>,

</li>
<li> it uses some ghost state wired up to the interpretation to know that
    <span class="inlinecode"><span class="id" title="var">ns</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">k</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, and update the state interpretation to <span class="inlinecode"><span class="id" title="method">state_interp</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>,

</li>
<li> <i>after</i> <span class="inlinecode"><span class="id" title="var">e</span></span> has finally stepped, we get <span class="inlinecode"><span class="id" title="method">num_laters_per_step</span></span> <span class="inlinecode"><span class="id" title="var">k</span></span> later credits
    that we can use to prove <span class="inlinecode"><span class="id" title="var">P</span></span> in the postcondition, and we have to update
    the state interpretation from <span class="inlinecode"><span class="id" title="method">state_interp</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">(<a class="idref" href="WBLogic.heap_lang_trace_examples.very_awkward.html#Wrap.S"><span class="id" title="section">S</span></a></span> <span class="inlinecode"><span class="id" title="var">m</span>)</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> to
    <span class="inlinecode"><span class="id" title="method">state_interp</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">(<a class="idref" href="WBLogic.heap_lang_trace_examples.very_awkward.html#Wrap.S"><span class="id" title="section">S</span></a></span> <span class="inlinecode"><span class="id" title="var">ns</span>)</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> again. 

</li>
</ul>
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wbwp_credit_access" class="idref" href="#wbwp_credit_access"><span class="id" title="lemma">wbwp_credit_access</span></a> <a id="E:116" class="idref" href="#E:116"><span class="id" title="binder">E</span></a> <a id="out:117" class="idref" href="#out:117"><span class="id" title="binder">out</span></a> <a id="e:118" class="idref" href="#e:118"><span class="id" title="binder">e</span></a> <a id="acbf32e4b989cded5cc4c2cc08fe35df" class="idref" href="#acbf32e4b989cded5cc4c2cc08fe35df"><span class="id" title="binder">Φ</span></a> <a id="P:120" class="idref" href="#P:120"><span class="id" title="binder">P</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:118"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="m:121" class="idref" href="#m:121"><span class="id" title="binder">m</span></a> <a id="k:122" class="idref" href="#k:122"><span class="id" title="binder">k</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="method">num_laters_per_step</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#m:121"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="method">num_laters_per_step</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#k:122"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <span class="id" title="method">num_laters_per_step</span> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#m:121"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#k:122"><span class="id" title="variable">k</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="e8af3d41e5e6efa58371459022ace3c9" class="idref" href="#e8af3d41e5e6efa58371459022ace3c9"><span class="id" title="binder">σ1</span></a> <a id="ns:124" class="idref" href="#ns:124"><span class="id" title="binder">ns</span></a> <a id="8c6e027dca8ff1a59060370c029a7a41" class="idref" href="#8c6e027dca8ff1a59060370c029a7a41"><span class="id" title="binder">κs</span></a> <a id="nt:126" class="idref" href="#nt:126"><span class="id" title="binder">nt</span></a><span class="id" title="notation">,</span> <span class="id" title="method">state_interp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e8af3d41e5e6efa58371459022ace3c9"><span class="id" title="variable">σ1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ns:124"><span class="id" title="variable">ns</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#8c6e027dca8ff1a59060370c029a7a41"><span class="id" title="variable">κs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#nt:126"><span class="id" title="variable">nt</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:116"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">∃</span> <a id="k:127" class="idref" href="#k:127"><span class="id" title="binder">k</span></a> <a id="m:128" class="idref" href="#m:128"><span class="id" title="binder">m</span></a><span class="id" title="notation">,</span> <span class="id" title="method">state_interp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e8af3d41e5e6efa58371459022ace3c9"><span class="id" title="variable">σ1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#m:128"><span class="id" title="variable">m</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#8c6e027dca8ff1a59060370c029a7a41"><span class="id" title="variable">κs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#nt:126"><span class="id" title="variable">nt</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#ns:124"><span class="id" title="variable">ns</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#m:128"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#k:127"><span class="id" title="variable">k</span></a>)%<span class="id" title="var">nat</span><span class="id" title="notation">⌝</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="nt:129" class="idref" href="#nt:129"><span class="id" title="binder">nt</span></a> <a id="1e7068e73f451e64b82526766aa53952" class="idref" href="#1e7068e73f451e64b82526766aa53952"><span class="id" title="binder">σ2</span></a> <a id="d734b528363b0bd61ac52fd12ed5c931" class="idref" href="#d734b528363b0bd61ac52fd12ed5c931"><span class="id" title="binder">κs</span></a><span class="id" title="notation">,</span> <span class="id" title="notation">£</span> <span class="id" title="notation">(</span><span class="id" title="method">num_laters_per_step</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#k:127"><span class="id" title="variable">k</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <span class="id" title="method">state_interp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1e7068e73f451e64b82526766aa53952"><span class="id" title="variable">σ2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#m:128"><span class="id" title="variable">m</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#d734b528363b0bd61ac52fd12ed5c931"><span class="id" title="variable">κs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#nt:129"><span class="id" title="variable">nt</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:116"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="method">state_interp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1e7068e73f451e64b82526766aa53952"><span class="id" title="variable">σ2</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ns:124"><span class="id" title="variable">ns</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#d734b528363b0bd61ac52fd12ed5c931"><span class="id" title="variable">κs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#nt:129"><span class="id" title="variable">nt</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:120"><span class="id" title="variable">P</span></a><span class="id" title="notation">)</span><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:118"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:117"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:116"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:132" class="idref" href="#v:132"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:120"><span class="id" title="variable">P</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:116"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#acbf32e4b989cded5cc4c2cc08fe35df"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:132"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:118"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:117"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:116"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#acbf32e4b989cded5cc4c2cc08fe35df"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? ?) "Hupd Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_credit_access</span> <span class="id" title="notation">with</span> "Hupd"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "[Hwp HM]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (?) "(?&amp;?&amp;H)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HP"; <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H" <span class="id" title="notation">with</span> "HP"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
In this stronger version of <span class="inlinecode"><span class="id" title="lemma">wp_step_fupdN</span></span>, the masks in the
   step-taking fancy update are a bit weird and somewhat difficult to
   use in practice. Hence, we prove it for the sake of completeness,
   but <span class="inlinecode"><span class="id" title="lemma">wp_step_fupdN</span></span> is just a little bit weaker, suffices in
   practice and is easier to use.

<div class="paragraph"> </div>

   See the statement of <span class="inlinecode"><span class="id" title="lemma">wp_step_fupdN</span></span> below to understand the use of
   ordinary conjunction here. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wbwp_step_fupdN_strong" class="idref" href="#wbwp_step_fupdN_strong"><span class="id" title="lemma">wbwp_step_fupdN_strong</span></a> <a id="k:133" class="idref" href="#k:133"><span class="id" title="binder">k</span></a> <a id="E1:134" class="idref" href="#E1:134"><span class="id" title="binder">E1</span></a> <a id="E2:135" class="idref" href="#E2:135"><span class="id" title="binder">E2</span></a> <a id="out:136" class="idref" href="#out:136"><span class="id" title="binder">out</span></a> <a id="e:137" class="idref" href="#e:137"><span class="id" title="binder">e</span></a> <a id="P:138" class="idref" href="#P:138"><span class="id" title="binder">P</span></a> <a id="59d70fd992feda054b6c1909b1f72426" class="idref" href="#59d70fd992feda054b6c1909b1f72426"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:137"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:135"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:134"><span class="id" title="variable">E1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="8e78b00a890ae7b98d81e3dd364b7c0d" class="idref" href="#8e78b00a890ae7b98d81e3dd364b7c0d"><span class="id" title="binder">σ</span></a> <a id="ns:141" class="idref" href="#ns:141"><span class="id" title="binder">ns</span></a> <a id="89140ca40856edb237367694a700bd39" class="idref" href="#89140ca40856edb237367694a700bd39"><span class="id" title="binder">κs</span></a> <a id="nt:143" class="idref" href="#nt:143"><span class="id" title="binder">nt</span></a><span class="id" title="notation">,</span> <span class="id" title="method">state_interp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#8e78b00a890ae7b98d81e3dd364b7c0d"><span class="id" title="variable">σ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ns:141"><span class="id" title="variable">ns</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#89140ca40856edb237367694a700bd39"><span class="id" title="variable">κs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#nt:143"><span class="id" title="variable">nt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:134"><span class="id" title="variable">E1</span></a><span class="id" title="notation">,</span><span class="id" title="notation">∅</span><span class="id" title="notation">}=∗</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#k:133"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<span class="id" title="method">num_laters_per_step</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ns:141"><span class="id" title="variable">ns</span></a>)<span class="id" title="notation">⌝</span><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:134"><span class="id" title="variable">E1</span></a><span class="id" title="notation">,</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:135"><span class="id" title="variable">E2</span></a><span class="id" title="notation">}=&gt;</span> <span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#k:133"><span class="id" title="variable">k</span></a> <span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:135"><span class="id" title="variable">E2</span></a><span class="id" title="notation">,</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:134"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:138"><span class="id" title="variable">P</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:137"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:136"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:135"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:144" class="idref" href="#v:144"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:138"><span class="id" title="variable">P</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:134"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#59d70fd992feda054b6c1909b1f72426"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:144"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:137"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:136"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:134"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#59d70fd992feda054b6c1909b1f72426"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? ?) "Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<span class="id" title="lemma">wp_step_fupdN_strong</span>); <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">iDestruct</span> "Hwp" <span class="id" title="keyword">as</span> "[$ _]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "Hwp" <span class="id" title="keyword">as</span> "[_ [$ Hwp]]".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "[Hwp HM]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (?) "(?&amp;?&amp;H)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HP"; <span class="id" title="var">iMod</span> <span class="id" title="notation">(</span>"H" <span class="id" title="notation">with</span> "HP"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>; <span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_bind" class="idref" href="#wbwp_bind"><span class="id" title="lemma">wbwp_bind</span></a> <a id="K:145" class="idref" href="#K:145"><span class="id" title="binder">K</span></a> `{<a id="LanguageCtx0:146" class="idref" href="#LanguageCtx0:146"><span class="id" title="binder">!</span></a><a id="LanguageCtx0:146" class="idref" href="#LanguageCtx0:146"><span class="id" title="binder">LanguageCtx</span></a> <a id="LanguageCtx0:146" class="idref" href="#LanguageCtx0:146"><span class="id" title="binder">K</span></a>} <a id="E:147" class="idref" href="#E:147"><span class="id" title="binder">E</span></a> <a id="out:148" class="idref" href="#out:148"><span class="id" title="binder">out</span></a> <a id="e:149" class="idref" href="#e:149"><span class="id" title="binder">e</span></a> <a id="76a4c97f38da193a3688fa8f5c4544ee" class="idref" href="#76a4c97f38da193a3688fa8f5c4544ee"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:149"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:148"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:147"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:151" class="idref" href="#v:151"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#K:145"><span class="id" title="variable">K</span></a> (<span class="id" title="projection">of_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:151"><span class="id" title="variable">v</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:148"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:147"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#76a4c97f38da193a3688fa8f5c4544ee"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#K:145"><span class="id" title="variable">K</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:149"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:148"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:147"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#76a4c97f38da193a3688fa8f5c4544ee"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hwp" (<span class="id" title="var">M</span>) "HM".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">wp_bind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "[Hwp HM]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (?) "(%&amp;HM&amp;Hwp)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">wp_wand</span> <span class="id" title="notation">with</span> "[Hwp HM]"<span class="id" title="notation">)</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hwp".<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?); <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (?) "(%&amp;HM&amp;Hwp)".<br/>
&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">_</span>; <span class="id" title="var">iFrame</span>; <span class="id" title="var">iPureIntro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etrans</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;following&nbsp;lemma&nbsp;does&nbsp;not&nbsp;work&nbsp;for&nbsp;well-bracketed&nbsp;weakest&nbsp;preconditions.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;The&nbsp;reason&nbsp;is&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;that&nbsp;the&nbsp;stack&nbsp;is&nbsp;broken&nbsp;across&nbsp;evaluation&nbsp;context&nbsp;and&nbsp;is&nbsp;only&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;going&nbsp;to&nbsp;be&nbsp;mended&nbsp;afterwards.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Lemma&nbsp;wbwp_bind_inv&nbsp;K&nbsp;`{!LanguageCtx&nbsp;K}&nbsp;E&nbsp;out&nbsp;e&nbsp;Φ&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;WBWP&nbsp;K&nbsp;e&nbsp;@&nbsp;out;&nbsp;E&nbsp;{{&nbsp;Φ&nbsp;}}&nbsp;⊢&nbsp;WBWP&nbsp;e&nbsp;@&nbsp;out;&nbsp;E&nbsp;{{&nbsp;v,&nbsp;WBWP&nbsp;K&nbsp;(of_val&nbsp;v)&nbsp;@&nbsp;out;&nbsp;E&nbsp;{{&nbsp;Φ&nbsp;}}&nbsp;}}.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Derived rules</h1>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wbwp_mono" class="idref" href="#wbwp_mono"><span class="id" title="lemma">wbwp_mono</span></a> <a id="E:152" class="idref" href="#E:152"><span class="id" title="binder">E</span></a> <a id="out:153" class="idref" href="#out:153"><span class="id" title="binder">out</span></a> <a id="e:154" class="idref" href="#e:154"><span class="id" title="binder">e</span></a> <a id="d98df6bf97aefd031e0bcb702e074ec4" class="idref" href="#d98df6bf97aefd031e0bcb702e074ec4"><span class="id" title="binder">Φ</span></a> <a id="bc8c10c5de235cc6b36be1283768f26f" class="idref" href="#bc8c10c5de235cc6b36be1283768f26f"><span class="id" title="binder">Ψ</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="v:157" class="idref" href="#v:157"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#d98df6bf97aefd031e0bcb702e074ec4"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:157"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#bc8c10c5de235cc6b36be1283768f26f"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:157"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:154"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:153"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:152"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#d98df6bf97aefd031e0bcb702e074ec4"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:154"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:153"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:152"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#bc8c10c5de235cc6b36be1283768f26f"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">HΦ</span>) "H"; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_strong_mono"><span class="id" title="lemma">wbwp_strong_mono</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "?". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <span class="id" title="var">HΦ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="comment">(*&nbsp;Lemma&nbsp;wp_stuck_mono&nbsp;s1&nbsp;s2&nbsp;E&nbsp;e&nbsp;Φ&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;s1&nbsp;⊑&nbsp;s2&nbsp;→&nbsp;WP&nbsp;e&nbsp;@&nbsp;s1;&nbsp;E&nbsp;{{&nbsp;Φ&nbsp;}}&nbsp;⊢&nbsp;WP&nbsp;e&nbsp;@&nbsp;s2;&nbsp;E&nbsp;{{&nbsp;Φ&nbsp;}}.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;iIntros&nbsp;(?)&nbsp;"H".&nbsp;iApply&nbsp;(wp_strong_mono&nbsp;with&nbsp;"H");&nbsp;auto.&nbsp;Qed.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Lemma&nbsp;wp_stuck_weaken&nbsp;s&nbsp;E&nbsp;e&nbsp;Φ&nbsp;:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;WP&nbsp;e&nbsp;@&nbsp;s;&nbsp;E&nbsp;{{&nbsp;Φ&nbsp;}}&nbsp;⊢&nbsp;WP&nbsp;e&nbsp;@&nbsp;E&nbsp;?{{&nbsp;Φ&nbsp;}}.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;apply&nbsp;wp_stuck_mono.&nbsp;by&nbsp;destruct&nbsp;s.&nbsp;Qed.&nbsp;*)</span><br/>
<span class="id" title="keyword">Lemma</span> <a id="wb_mask_mono" class="idref" href="#wb_mask_mono"><span class="id" title="lemma">wb_mask_mono</span></a> <a id="E1:158" class="idref" href="#E1:158"><span class="id" title="binder">E1</span></a> <a id="E2:159" class="idref" href="#E2:159"><span class="id" title="binder">E2</span></a> <a id="out:160" class="idref" href="#out:160"><span class="id" title="binder">out</span></a> <a id="e:161" class="idref" href="#e:161"><span class="id" title="binder">e</span></a> <a id="b0f8dcf2915e3790ed08386138f29e00" class="idref" href="#b0f8dcf2915e3790ed08386138f29e00"><span class="id" title="binder">Φ</span></a> : <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:158"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:159"><span class="id" title="variable">E2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:161"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:160"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:158"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b0f8dcf2915e3790ed08386138f29e00"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:161"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:160"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:159"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b0f8dcf2915e3790ed08386138f29e00"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (?) "H"; <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_strong_mono"><span class="id" title="lemma">wbwp_strong_mono</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="wbwp_mono'" class="idref" href="#wbwp_mono'"><span class="id" title="instance">wbwp_mono'</span></a> <a id="E:163" class="idref" href="#E:163"><span class="id" title="binder">E</span></a> <a id="out:164" class="idref" href="#out:164"><span class="id" title="binder">out</span></a> <a id="e:165" class="idref" href="#e:165"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <span class="id" title="notation">(⊢)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <span class="id" title="notation">(⊢)</span>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:163"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:164"><span class="id" title="variable">out</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:165"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Φ</span> <span class="id" title="var">Φ'</span> ?; <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_mono"><span class="id" title="lemma">wbwp_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a id="wbwp_flip_mono'" class="idref" href="#wbwp_flip_mono'"><span class="id" title="instance">wbwp_flip_mono'</span></a> <a id="E:166" class="idref" href="#E:166"><span class="id" title="binder">E</span></a> <a id="out:167" class="idref" href="#out:167"><span class="id" title="binder">out</span></a> <a id="e:168" class="idref" href="#e:168"><span class="id" title="binder">e</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="notation">(⊢)</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="notation">(⊢)</span><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp"><span class="id" title="definition">wbwp</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:166"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:167"><span class="id" title="variable">out</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:168"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">Φ</span> <span class="id" title="var">Φ'</span> ?; <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_mono"><span class="id" title="lemma">wbwp_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_value_fupd" class="idref" href="#wbwp_value_fupd"><span class="id" title="lemma">wbwp_value_fupd</span></a> <a id="s:169" class="idref" href="#s:169"><span class="id" title="binder">s</span></a> <a id="E:170" class="idref" href="#E:170"><span class="id" title="binder">E</span></a> <a id="d82423d95b95d9db43a070e0195b0b7d" class="idref" href="#d82423d95b95d9db43a070e0195b0b7d"><span class="id" title="binder">Φ</span></a> <a id="e:172" class="idref" href="#e:172"><span class="id" title="binder">e</span></a> <a id="v:173" class="idref" href="#v:173"><span class="id" title="binder">v</span></a> : <span class="id" title="class">IntoVal</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:172"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:173"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:170"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#d82423d95b95d9db43a070e0195b0b7d"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:173"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:172"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#s:169"><span class="id" title="variable">s</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:170"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#d82423d95b95d9db43a070e0195b0b7d"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> &lt;-. <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_value_fupd'"><span class="id" title="lemma">wbwp_value_fupd'</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_value'" class="idref" href="#wbwp_value'"><span class="id" title="lemma">wbwp_value'</span></a> <a id="E:174" class="idref" href="#E:174"><span class="id" title="binder">E</span></a> <a id="out:175" class="idref" href="#out:175"><span class="id" title="binder">out</span></a> <a id="e23576082bc16f4610e40ff4c75008d1" class="idref" href="#e23576082bc16f4610e40ff4c75008d1"><span class="id" title="binder">Φ</span></a> <a id="v:177" class="idref" href="#v:177"><span class="id" title="binder">v</span></a> : <a class="idref" href="WBLogic.program_logic.weakestpre.html#e23576082bc16f4610e40ff4c75008d1"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:177"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">(</span></a><span class="id" title="projection">of_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:177"><span class="id" title="variable">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">)</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:175"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:174"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e23576082bc16f4610e40ff4c75008d1"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_value_fupd'"><span class="id" title="lemma">wbwp_value_fupd'</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_value" class="idref" href="#wbwp_value"><span class="id" title="lemma">wbwp_value</span></a> <a id="E:178" class="idref" href="#E:178"><span class="id" title="binder">E</span></a> <a id="out:179" class="idref" href="#out:179"><span class="id" title="binder">out</span></a> <a id="388e0a1edceb89ad5f6f635a00548bb3" class="idref" href="#388e0a1edceb89ad5f6f635a00548bb3"><span class="id" title="binder">Φ</span></a> <a id="e:181" class="idref" href="#e:181"><span class="id" title="binder">e</span></a> <a id="v:182" class="idref" href="#v:182"><span class="id" title="binder">v</span></a> : <span class="id" title="class">IntoVal</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:181"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:182"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#388e0a1edceb89ad5f6f635a00548bb3"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:182"><span class="id" title="variable">v</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:181"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:179"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:178"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#388e0a1edceb89ad5f6f635a00548bb3"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> &lt;-. <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_value'"><span class="id" title="lemma">wbwp_value'</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_frame_l" class="idref" href="#wbwp_frame_l"><span class="id" title="lemma">wbwp_frame_l</span></a> <a id="E:183" class="idref" href="#E:183"><span class="id" title="binder">E</span></a> <a id="out:184" class="idref" href="#out:184"><span class="id" title="binder">out</span></a> <a id="e:185" class="idref" href="#e:185"><span class="id" title="binder">e</span></a> <a id="f780c565231a25d8b91d9e3d2a8cf0f4" class="idref" href="#f780c565231a25d8b91d9e3d2a8cf0f4"><span class="id" title="binder">Φ</span></a> <a id="R:187" class="idref" href="#R:187"><span class="id" title="binder">R</span></a> : <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:187"><span class="id" title="variable">R</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:185"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:184"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:183"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f780c565231a25d8b91d9e3d2a8cf0f4"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:185"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:184"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:183"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:188" class="idref" href="#v:188"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:187"><span class="id" title="variable">R</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#f780c565231a25d8b91d9e3d2a8cf0f4"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:188"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> "[? H]". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_strong_mono"><span class="id" title="lemma">wbwp_strong_mono</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">iFrame</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_frame_r" class="idref" href="#wbwp_frame_r"><span class="id" title="lemma">wbwp_frame_r</span></a> <a id="E:189" class="idref" href="#E:189"><span class="id" title="binder">E</span></a> <a id="out:190" class="idref" href="#out:190"><span class="id" title="binder">out</span></a> <a id="e:191" class="idref" href="#e:191"><span class="id" title="binder">e</span></a> <a id="1422b15ca809766b4d4feed0d0851c65" class="idref" href="#1422b15ca809766b4d4feed0d0851c65"><span class="id" title="binder">Φ</span></a> <a id="R:193" class="idref" href="#R:193"><span class="id" title="binder">R</span></a> : <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:191"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:190"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:189"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1422b15ca809766b4d4feed0d0851c65"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:193"><span class="id" title="variable">R</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:191"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:190"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:189"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:194" class="idref" href="#v:194"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1422b15ca809766b4d4feed0d0851c65"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:194"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:193"><span class="id" title="variable">R</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> "[H ?]". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_strong_mono"><span class="id" title="lemma">wbwp_strong_mono</span></a> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">iFrame</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma states that if we can prove that <span class="inlinecode"><span class="id" title="var">n</span></span> laters are used in
   the current physical step, then one can perform an n-steps fancy
   update during that physical step. The resources needed to prove the
   bound on <span class="inlinecode"><span class="id" title="var">n</span></span> are not used up: they can be reused in the proof of
   the WP or in the proof of the n-steps fancy update. In order to
   describe this unusual resource flow, we use ordinary conjunction as
   a premise. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wbwp_step_fupdN" class="idref" href="#wbwp_step_fupdN"><span class="id" title="lemma">wbwp_step_fupdN</span></a> <a id="n:195" class="idref" href="#n:195"><span class="id" title="binder">n</span></a> <a id="E1:196" class="idref" href="#E1:196"><span class="id" title="binder">E1</span></a> <a id="E2:197" class="idref" href="#E2:197"><span class="id" title="binder">E2</span></a> <a id="out:198" class="idref" href="#out:198"><span class="id" title="binder">out</span></a> <a id="e:199" class="idref" href="#e:199"><span class="id" title="binder">e</span></a> <a id="P:200" class="idref" href="#P:200"><span class="id" title="binder">P</span></a> <a id="d5cebd72c0a64ddd6650e46fddbc32d8" class="idref" href="#d5cebd72c0a64ddd6650e46fddbc32d8"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:199"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:197"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:196"><span class="id" title="variable">E1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="b818e844c2f288d21f81d1a628df1462" class="idref" href="#b818e844c2f288d21f81d1a628df1462"><span class="id" title="binder">σ</span></a> <a id="ns:203" class="idref" href="#ns:203"><span class="id" title="binder">ns</span></a> <a id="b3414921d70c50b8d6c039a8173a94c5" class="idref" href="#b3414921d70c50b8d6c039a8173a94c5"><span class="id" title="binder">κs</span></a> <a id="nt:205" class="idref" href="#nt:205"><span class="id" title="binder">nt</span></a><span class="id" title="notation">,</span> <span class="id" title="method">state_interp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b818e844c2f288d21f81d1a628df1462"><span class="id" title="variable">σ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ns:203"><span class="id" title="variable">ns</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b3414921d70c50b8d6c039a8173a94c5"><span class="id" title="variable">κs</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#nt:205"><span class="id" title="variable">nt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:196"><span class="id" title="variable">E1</span></a><span class="id" title="notation">,</span><span class="id" title="notation">∅</span><span class="id" title="notation">}=∗</span> <span class="id" title="notation">⌜</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#n:195"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<span class="id" title="method">num_laters_per_step</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ns:203"><span class="id" title="variable">ns</span></a>)<span class="id" title="notation">⌝</span><span class="id" title="notation">)</span> <span class="id" title="notation">∧</span><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:196"><span class="id" title="variable">E1</span></a><span class="id" title="notation">∖</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:197"><span class="id" title="variable">E2</span></a><span class="id" title="notation">,</span><span class="id" title="notation">∅</span><span class="id" title="notation">}=&gt;</span> <span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">}▷=&gt;^</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#n:195"><span class="id" title="variable">n</span></a> <span class="id" title="notation">|={</span><span class="id" title="notation">∅</span><span class="id" title="notation">,</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:196"><span class="id" title="variable">E1</span></a><span class="id" title="notation">∖</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:197"><span class="id" title="variable">E2</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:200"><span class="id" title="variable">P</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:199"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:198"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:197"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:206" class="idref" href="#v:206"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:200"><span class="id" title="variable">P</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:196"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#d5cebd72c0a64ddd6650e46fddbc32d8"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:206"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:199"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:198"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:196"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#d5cebd72c0a64ddd6650e46fddbc32d8"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "H". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_step_fupdN_strong"><span class="id" title="lemma">wbwp_step_fupdN_strong</span></a> <span class="id" title="notation">with</span> "[H]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">and_mono_r</span> <span class="id" title="notation">with</span> "H"<span class="id" title="notation">)</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">sep_mono_l</span>. <span class="id" title="var">iIntros</span> "HP".<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> <span class="id" title="lemma">fupd_mask_subseteq_emptyset_difference</span> <span class="id" title="keyword">as</span> "H"; [|<span class="id" title="var">iMod</span> "HP"]; [<span class="id" title="var">set_solver</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">iMod</span> "H" <span class="id" title="keyword">as</span> "_". <span class="id" title="tactic">replace</span> (<span class="id" title="var">E1</span> <span class="id" title="notation">∖</span> <span class="id" title="notation">(</span><span class="id" title="var">E1</span> <span class="id" title="notation">∖</span> <span class="id" title="var">E2</span><span class="id" title="notation">)</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">E2</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">set_unfold</span>=&gt;<span class="id" title="var">x</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">decide</span> (<span class="id" title="var">x</span> <span class="id" title="notation">∈</span> <span class="id" title="var">E2</span>)); <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">iModIntro</span>. <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><span class="id" title="lemma">step_fupdN_wand</span> <span class="id" title="notation">with</span> "HP"<span class="id" title="notation">)</span>. <span class="id" title="var">iIntros</span> "H".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="lemma">fupd_mask_frame</span>; [|<span class="id" title="var">iMod</span> "H"; <span class="id" title="var">iModIntro</span>]; [<span class="id" title="var">set_solver</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">difference_empty_L</span> (<span class="id" title="lemma">comm_L</span> <span class="id" title="notation">(∪)</span>) -<span class="id" title="lemma">union_difference_L</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_step_fupd" class="idref" href="#wbwp_step_fupd"><span class="id" title="lemma">wbwp_step_fupd</span></a> <a id="E1:207" class="idref" href="#E1:207"><span class="id" title="binder">E1</span></a> <a id="E2:208" class="idref" href="#E2:208"><span class="id" title="binder">E2</span></a> <a id="out:209" class="idref" href="#out:209"><span class="id" title="binder">out</span></a> <a id="e:210" class="idref" href="#e:210"><span class="id" title="binder">e</span></a> <a id="P:211" class="idref" href="#P:211"><span class="id" title="binder">P</span></a> <a id="049e8656ab83200871a3510500b85ea0" class="idref" href="#049e8656ab83200871a3510500b85ea0"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:210"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:208"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:207"><span class="id" title="variable">E1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:207"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}[</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:208"><span class="id" title="variable">E2</span></a><span class="id" title="notation">]▷=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:211"><span class="id" title="variable">P</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:210"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:209"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:208"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:213" class="idref" href="#v:213"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:211"><span class="id" title="variable">P</span></a> <span class="id" title="notation">={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:207"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}=∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#049e8656ab83200871a3510500b85ea0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:213"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:210"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:209"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:207"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#049e8656ab83200871a3510500b85ea0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "HR H".<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_step_fupdN_strong"><span class="id" title="lemma">wbwp_step_fupdN_strong</span></a> 1 <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="notation">with</span> "[-]"<span class="id" title="notation">)</span>; [<span class="id" title="var">done</span>|..]. <span class="id" title="var">iSplit</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iIntros</span> (????) "_". <span class="id" title="var">iMod</span> (<span class="id" title="lemma">fupd_mask_subseteq</span> <span class="id" title="notation">∅</span>) <span class="id" title="keyword">as</span> "_"; [<span class="id" title="var">set_solver</span>+|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">iFrame</span> "H". <span class="id" title="var">iMod</span> "HR" <span class="id" title="keyword">as</span> "$". <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_frame_step_l" class="idref" href="#wbwp_frame_step_l"><span class="id" title="lemma">wbwp_frame_step_l</span></a> <a id="E1:214" class="idref" href="#E1:214"><span class="id" title="binder">E1</span></a> <a id="E2:215" class="idref" href="#E2:215"><span class="id" title="binder">E2</span></a> <a id="out:216" class="idref" href="#out:216"><span class="id" title="binder">out</span></a> <a id="e:217" class="idref" href="#e:217"><span class="id" title="binder">e</span></a> <a id="0a2e320f007bdfac16bd3cf3b18461f3" class="idref" href="#0a2e320f007bdfac16bd3cf3b18461f3"><span class="id" title="binder">Φ</span></a> <a id="R:219" class="idref" href="#R:219"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:217"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:215"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:214"><span class="id" title="variable">E1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:214"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}[</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:215"><span class="id" title="variable">E2</span></a><span class="id" title="notation">]▷=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:219"><span class="id" title="variable">R</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:217"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:216"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:215"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0a2e320f007bdfac16bd3cf3b18461f3"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:217"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:216"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:214"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:220" class="idref" href="#v:220"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:219"><span class="id" title="variable">R</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0a2e320f007bdfac16bd3cf3b18461f3"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:220"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (??) "[Hu Hwp]". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_step_fupd"><span class="id" title="lemma">wbwp_step_fupd</span></a> <span class="id" title="notation">with</span> "Hu"<span class="id" title="notation">)</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_mono"><span class="id" title="lemma">wbwp_mono</span></a> <span class="id" title="notation">with</span> "Hwp"<span class="id" title="notation">)</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iIntros</span> (?) "$$".<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_frame_step_r" class="idref" href="#wbwp_frame_step_r"><span class="id" title="lemma">wbwp_frame_step_r</span></a> <a id="E1:221" class="idref" href="#E1:221"><span class="id" title="binder">E1</span></a> <a id="E2:222" class="idref" href="#E2:222"><span class="id" title="binder">E2</span></a> <a id="out:223" class="idref" href="#out:223"><span class="id" title="binder">out</span></a> <a id="e:224" class="idref" href="#e:224"><span class="id" title="binder">e</span></a> <a id="cac9c6fa142be6354bd9447ac2f64d25" class="idref" href="#cac9c6fa142be6354bd9447ac2f64d25"><span class="id" title="binder">Φ</span></a> <a id="R:226" class="idref" href="#R:226"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:224"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:222"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">⊆</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:221"><span class="id" title="variable">E1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:224"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:223"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:222"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#cac9c6fa142be6354bd9447ac2f64d25"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:221"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}[</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:222"><span class="id" title="variable">E2</span></a><span class="id" title="notation">]▷=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:226"><span class="id" title="variable">R</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:224"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:223"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:221"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:227" class="idref" href="#v:227"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#cac9c6fa142be6354bd9447ac2f64d25"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:227"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:226"><span class="id" title="variable">R</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [(<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <span class="id" title="var">_</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <span class="id" title="var">_</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <span class="id" title="var">_</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <span class="id" title="var">_</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∗</span> <span class="id" title="var">_</span>)%<span class="id" title="var">I</span>]<span class="id" title="definition">comm</span>; <span class="id" title="tactic">setoid_rewrite</span> (<span class="id" title="definition">comm</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_frame_step_l"><span class="id" title="lemma">wbwp_frame_step_l</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_frame_step_l'" class="idref" href="#wbwp_frame_step_l'"><span class="id" title="lemma">wbwp_frame_step_l'</span></a> <a id="E:228" class="idref" href="#E:228"><span class="id" title="binder">E</span></a> <a id="out:229" class="idref" href="#out:229"><span class="id" title="binder">out</span></a> <a id="e:230" class="idref" href="#e:230"><span class="id" title="binder">e</span></a> <a id="9efd9ae9050bd6032d61db87f2f99850" class="idref" href="#9efd9ae9050bd6032d61db87f2f99850"><span class="id" title="binder">Φ</span></a> <a id="R:232" class="idref" href="#R:232"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:230"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:232"><span class="id" title="variable">R</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:230"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:229"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:228"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#9efd9ae9050bd6032d61db87f2f99850"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:230"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:229"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:228"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:233" class="idref" href="#v:233"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:232"><span class="id" title="variable">R</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#9efd9ae9050bd6032d61db87f2f99850"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:233"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (?) "[??]". <span class="id" title="var">iApply</span> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_frame_step_l"><span class="id" title="lemma">wbwp_frame_step_l</span></a> <span class="id" title="var">E</span> <span class="id" title="var">E</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_frame_step_r'" class="idref" href="#wbwp_frame_step_r'"><span class="id" title="lemma">wbwp_frame_step_r'</span></a> <a id="E:234" class="idref" href="#E:234"><span class="id" title="binder">E</span></a> <a id="out:235" class="idref" href="#out:235"><span class="id" title="binder">out</span></a> <a id="e:236" class="idref" href="#e:236"><span class="id" title="binder">e</span></a> <a id="aac14d5bb226442b9274c35138b33813" class="idref" href="#aac14d5bb226442b9274c35138b33813"><span class="id" title="binder">Φ</span></a> <a id="R:238" class="idref" href="#R:238"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="class">TCEq</span> (<span class="id" title="projection">to_val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:236"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:236"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:235"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:234"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aac14d5bb226442b9274c35138b33813"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">▷</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:238"><span class="id" title="variable">R</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:236"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:235"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:234"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:239" class="idref" href="#v:239"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#aac14d5bb226442b9274c35138b33813"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:239"><span class="id" title="variable">v</span></a> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:238"><span class="id" title="variable">R</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> (?) "[??]". <span class="id" title="var">iApply</span> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_frame_step_r"><span class="id" title="lemma">wbwp_frame_step_r</span></a> <span class="id" title="var">E</span> <span class="id" title="var">E</span> <span class="id" title="var">out</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">iFrame</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_wand" class="idref" href="#wbwp_wand"><span class="id" title="lemma">wbwp_wand</span></a> <a id="E:240" class="idref" href="#E:240"><span class="id" title="binder">E</span></a> <a id="out:241" class="idref" href="#out:241"><span class="id" title="binder">out</span></a> <a id="e:242" class="idref" href="#e:242"><span class="id" title="binder">e</span></a> <a id="ccc7b9a4c2daf99179ac1a88b39e70c0" class="idref" href="#ccc7b9a4c2daf99179ac1a88b39e70c0"><span class="id" title="binder">Φ</span></a> <a id="af1d4ad59a0b687d2e97ff2f5d98f48f" class="idref" href="#af1d4ad59a0b687d2e97ff2f5d98f48f"><span class="id" title="binder">Ψ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:242"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:241"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ccc7b9a4c2daf99179ac1a88b39e70c0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">-∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="v:245" class="idref" href="#v:245"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#ccc7b9a4c2daf99179ac1a88b39e70c0"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:245"><span class="id" title="variable">v</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#af1d4ad59a0b687d2e97ff2f5d98f48f"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:245"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:242"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:241"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:240"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#af1d4ad59a0b687d2e97ff2f5d98f48f"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "Hwp H". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_strong_mono"><span class="id" title="lemma">wbwp_strong_mono</span></a> <span class="id" title="notation">with</span> "Hwp"<span class="id" title="notation">)</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "?". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "H".<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_wand_l" class="idref" href="#wbwp_wand_l"><span class="id" title="lemma">wbwp_wand_l</span></a> <a id="E:246" class="idref" href="#E:246"><span class="id" title="binder">E</span></a> <a id="out:247" class="idref" href="#out:247"><span class="id" title="binder">out</span></a> <a id="e:248" class="idref" href="#e:248"><span class="id" title="binder">e</span></a> <a id="b9faaffe16b3b7c4467b2f6f455cb041" class="idref" href="#b9faaffe16b3b7c4467b2f6f455cb041"><span class="id" title="binder">Φ</span></a> <a id="8ab4b9bc704baea2cc73cbfa0295aaf0" class="idref" href="#8ab4b9bc704baea2cc73cbfa0295aaf0"><span class="id" title="binder">Ψ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="v:251" class="idref" href="#v:251"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b9faaffe16b3b7c4467b2f6f455cb041"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:251"><span class="id" title="variable">v</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#8ab4b9bc704baea2cc73cbfa0295aaf0"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:251"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:248"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:247"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:246"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b9faaffe16b3b7c4467b2f6f455cb041"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:248"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:247"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:246"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#8ab4b9bc704baea2cc73cbfa0295aaf0"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> "[H Hwp]". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_wand"><span class="id" title="lemma">wbwp_wand</span></a> <span class="id" title="notation">with</span> "Hwp H"<span class="id" title="notation">)</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wbwp_wand_r" class="idref" href="#wbwp_wand_r"><span class="id" title="lemma">wbwp_wand_r</span></a> <a id="E:252" class="idref" href="#E:252"><span class="id" title="binder">E</span></a> <a id="out:253" class="idref" href="#out:253"><span class="id" title="binder">out</span></a> <a id="e:254" class="idref" href="#e:254"><span class="id" title="binder">e</span></a> <a id="c6302d50792f711a20e279a9515ff2b3" class="idref" href="#c6302d50792f711a20e279a9515ff2b3"><span class="id" title="binder">Φ</span></a> <a id="0a185241c2106c95ae776d135c958cfc" class="idref" href="#0a185241c2106c95ae776d135c958cfc"><span class="id" title="binder">Ψ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:254"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:253"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:252"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c6302d50792f711a20e279a9515ff2b3"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><span class="id" title="notation">∀</span> <a id="v:257" class="idref" href="#v:257"><span class="id" title="binder">v</span></a><span class="id" title="notation">,</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c6302d50792f711a20e279a9515ff2b3"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:257"><span class="id" title="variable">v</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0a185241c2106c95ae776d135c958cfc"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:257"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">⊢</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:254"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:253"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:252"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0a185241c2106c95ae776d135c958cfc"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">iIntros</span> "[Hwp H]". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_wand"><span class="id" title="lemma">wbwp_wand</span></a> <span class="id" title="notation">with</span> "Hwp H"<span class="id" title="notation">)</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="wp_frame_wand" class="idref" href="#wp_frame_wand"><span class="id" title="lemma">wp_frame_wand</span></a> <a id="E:258" class="idref" href="#E:258"><span class="id" title="binder">E</span></a> <a id="out:259" class="idref" href="#out:259"><span class="id" title="binder">out</span></a> <a id="e:260" class="idref" href="#e:260"><span class="id" title="binder">e</span></a> <a id="2d0c40f6ebc5e70ddf70dd142b721274" class="idref" href="#2d0c40f6ebc5e70ddf70dd142b721274"><span class="id" title="binder">Φ</span></a> <a id="R:262" class="idref" href="#R:262"><span class="id" title="binder">R</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#R:262"><span class="id" title="variable">R</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:260"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:259"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:258"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:263" class="idref" href="#v:263"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:262"><span class="id" title="variable">R</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2d0c40f6ebc5e70ddf70dd142b721274"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:263"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">-∗</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:260"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:259"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:258"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2d0c40f6ebc5e70ddf70dd142b721274"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HR HWP". <span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_wand"><span class="id" title="lemma">wbwp_wand</span></a> <span class="id" title="notation">with</span> "HWP"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "HΦ". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HΦ".<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp"><span class="id" title="section">wp</span></a>.<br/>

<br/>
</div>

<div class="doc">
Proofmode class instances 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="proofmode_classes" class="idref" href="#proofmode_classes"><span class="id" title="section">proofmode_classes</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="irisGS0:266" class="idref" href="#irisGS0:266"><span class="id" title="binder">!</span></a><a id="irisGS0:266" class="idref" href="#irisGS0:266"><span class="id" title="binder">irisGS</span></a> <a id="d6e885d908d0ea3a9903e3dd1dc02557" class="idref" href="#d6e885d908d0ea3a9903e3dd1dc02557"><span class="id" title="binder"><span id="irisGS0:266" class="id">Λ</span></span></a> <a id="ad79beac12f34d671332de2fc704040b" class="idref" href="#ad79beac12f34d671332de2fc704040b"><span class="id" title="binder"><span id="irisGS0:266" class="id">Σ</span></span></a>, <a id="gstacksIG0:267" class="idref" href="#gstacksIG0:267"><span class="id" title="binder">!</span></a><a id="gstacksIG0:267" class="idref" href="#gstacksIG0:267"><span class="id" title="binder">gstacksIG</span></a> <a id="gstacksIG0:267" class="idref" href="#gstacksIG0:267"><span class="id" title="binder">Σ</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#6818862eb4a179c9c22f43d3c1e69add"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">Φ</span> : <span class="id" title="projection">val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#a29255f0f79b75b79795a2ff13da17e8"><span class="id" title="variable">Λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="abbreviation">iProp</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#6818862eb4a179c9c22f43d3c1e69add"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">v</span> : <span class="id" title="projection">val</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#a29255f0f79b75b79795a2ff13da17e8"><span class="id" title="variable">Λ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">e</span> : <span class="id" title="projection">expr</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#a29255f0f79b75b79795a2ff13da17e8"><span class="id" title="variable">Λ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="frame_wbwp" class="idref" href="#frame_wbwp"><span class="id" title="instance">frame_wbwp</span></a> <a id="p:268" class="idref" href="#p:268"><span class="id" title="binder">p</span></a> <a id="E:269" class="idref" href="#E:269"><span class="id" title="binder">E</span></a> <a id="out:270" class="idref" href="#out:270"><span class="id" title="binder">out</span></a> <a id="e:271" class="idref" href="#e:271"><span class="id" title="binder">e</span></a> <a id="R:272" class="idref" href="#R:272"><span class="id" title="binder">R</span></a> <a id="6cab8ae894e2229d31219511cbd28cf2" class="idref" href="#6cab8ae894e2229d31219511cbd28cf2"><span class="id" title="binder">Φ</span></a> <a id="9013f1bb7bc2b728e76de2a0b7428ba6" class="idref" href="#9013f1bb7bc2b728e76de2a0b7428ba6"><span class="id" title="binder">Ψ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="v:275" class="idref" href="#v:275"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <span class="id" title="class">Frame</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#p:268"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:272"><span class="id" title="variable">R</span></a> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#6cab8ae894e2229d31219511cbd28cf2"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:275"><span class="id" title="variable">v</span></a>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#9013f1bb7bc2b728e76de2a0b7428ba6"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:275"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">Frame</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#p:268"><span class="id" title="variable">p</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#R:272"><span class="id" title="variable">R</span></a> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:271"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:270"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:269"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#6cab8ae894e2229d31219511cbd28cf2"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:271"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:270"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:269"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#9013f1bb7bc2b728e76de2a0b7428ba6"><span class="id" title="variable">Ψ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>) | 2.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="class">Frame</span>=&gt; <span class="id" title="var">HR</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_frame_l"><span class="id" title="lemma">wbwp_frame_l</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_mono"><span class="id" title="lemma">wbwp_mono</span></a>, <span class="id" title="var">HR</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="is_except_0_wbwp" class="idref" href="#is_except_0_wbwp"><span class="id" title="instance">is_except_0_wbwp</span></a> <a id="E:276" class="idref" href="#E:276"><span class="id" title="binder">E</span></a> <a id="out:277" class="idref" href="#out:277"><span class="id" title="binder">out</span></a> <a id="e:278" class="idref" href="#e:278"><span class="id" title="binder">e</span></a> <a id="4dbd330a18bc27fb94879da5c29d6382" class="idref" href="#4dbd330a18bc27fb94879da5c29d6382"><span class="id" title="binder">Φ</span></a> : <span class="id" title="class">IsExcept0</span> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:278"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:277"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:276"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#4dbd330a18bc27fb94879da5c29d6382"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="class">IsExcept0</span> -{2}<a class="idref" href="WBLogic.program_logic.weakestpre.html#fupd_wbwp"><span class="id" title="lemma">fupd_wbwp</span></a> -<span class="id" title="lemma">except_0_fupd</span> -<span class="id" title="lemma">fupd_intro</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="elim_modal_bupd_wbwp" class="idref" href="#elim_modal_bupd_wbwp"><span class="id" title="instance">elim_modal_bupd_wbwp</span></a> <a id="p:280" class="idref" href="#p:280"><span class="id" title="binder">p</span></a> <a id="E:281" class="idref" href="#E:281"><span class="id" title="binder">E</span></a> <a id="out:282" class="idref" href="#out:282"><span class="id" title="binder">out</span></a> <a id="e:283" class="idref" href="#e:283"><span class="id" title="binder">e</span></a> <a id="P:284" class="idref" href="#P:284"><span class="id" title="binder">P</span></a> <a id="2a492eca08f9ec4c5f922b52eb726e61" class="idref" href="#2a492eca08f9ec4c5f922b52eb726e61"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">ElimModal</span> <span class="id" title="notation">True</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#p:280"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<span class="id" title="notation">|==&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:284"><span class="id" title="variable">P</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:284"><span class="id" title="variable">P</span></a> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:283"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:282"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:281"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2a492eca08f9ec4c5f922b52eb726e61"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:283"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:282"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:281"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#2a492eca08f9ec4c5f922b52eb726e61"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="class">ElimModal</span> <span class="id" title="lemma">intuitionistically_if_elim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">bupd_fupd</span> <span class="id" title="var">E</span>) <span class="id" title="lemma">fupd_frame_r</span> <span class="id" title="lemma">wand_elim_r</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#fupd_wbwp"><span class="id" title="lemma">fupd_wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="elim_modal_fupd_wbwp" class="idref" href="#elim_modal_fupd_wbwp"><span class="id" title="instance">elim_modal_fupd_wbwp</span></a> <a id="p:286" class="idref" href="#p:286"><span class="id" title="binder">p</span></a> <a id="E:287" class="idref" href="#E:287"><span class="id" title="binder">E</span></a> <a id="out:288" class="idref" href="#out:288"><span class="id" title="binder">out</span></a> <a id="e:289" class="idref" href="#e:289"><span class="id" title="binder">e</span></a> <a id="P:290" class="idref" href="#P:290"><span class="id" title="binder">P</span></a> <a id="3461918329512dac8356bf9ee4aeb27a" class="idref" href="#3461918329512dac8356bf9ee4aeb27a"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">ElimModal</span> <span class="id" title="notation">True</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#p:286"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:287"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:290"><span class="id" title="variable">P</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:290"><span class="id" title="variable">P</span></a> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:289"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:288"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:287"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#3461918329512dac8356bf9ee4aeb27a"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:289"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:288"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:287"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#3461918329512dac8356bf9ee4aeb27a"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="class">ElimModal</span> <span class="id" title="lemma">intuitionistically_if_elim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="lemma">fupd_frame_r</span> <span class="id" title="lemma">wand_elim_r</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#fupd_wbwp"><span class="id" title="lemma">fupd_wbwp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="elim_modal_fupd_wbwp_atomic" class="idref" href="#elim_modal_fupd_wbwp_atomic"><span class="id" title="instance">elim_modal_fupd_wbwp_atomic</span></a> <a id="p:292" class="idref" href="#p:292"><span class="id" title="binder">p</span></a> <a id="E1:293" class="idref" href="#E1:293"><span class="id" title="binder">E1</span></a> <a id="E2:294" class="idref" href="#E2:294"><span class="id" title="binder">E2</span></a> <a id="out:295" class="idref" href="#out:295"><span class="id" title="binder">out</span></a> <a id="e:296" class="idref" href="#e:296"><span class="id" title="binder">e</span></a> <a id="P:297" class="idref" href="#P:297"><span class="id" title="binder">P</span></a> <a id="d693c2c5966a76cf94d0b6ab9450d32c" class="idref" href="#d693c2c5966a76cf94d0b6ab9450d32c"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">ElimModal</span> (<span class="id" title="class">Atomic</span> <span class="id" title="constructor">WeaklyAtomic</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:296"><span class="id" title="variable">e</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#p:292"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:293"><span class="id" title="variable">E1</span></a><span class="id" title="notation">,</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:294"><span class="id" title="variable">E2</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:297"><span class="id" title="variable">P</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:297"><span class="id" title="variable">P</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:296"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:295"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:293"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#d693c2c5966a76cf94d0b6ab9450d32c"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>) (<a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:296"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:295"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:294"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:299" class="idref" href="#v:299"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:294"><span class="id" title="variable">E2</span></a><span class="id" title="notation">,</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:293"><span class="id" title="variable">E1</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#d693c2c5966a76cf94d0b6ab9450d32c"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:299"><span class="id" title="variable">v</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span> | 100.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">intuitionistically_if_elim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="lemma">fupd_frame_r</span> <span class="id" title="lemma">wand_elim_r</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wp_atomic"><span class="id" title="lemma">wp_atomic</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="add_modal_fupd_wbwp" class="idref" href="#add_modal_fupd_wbwp"><span class="id" title="instance">add_modal_fupd_wbwp</span></a> <a id="E:300" class="idref" href="#E:300"><span class="id" title="binder">E</span></a> <a id="out:301" class="idref" href="#out:301"><span class="id" title="binder">out</span></a> <a id="e:302" class="idref" href="#e:302"><span class="id" title="binder">e</span></a> <a id="P:303" class="idref" href="#P:303"><span class="id" title="binder">P</span></a> <a id="655c71b986290c91ca1925d558b8b62f" class="idref" href="#655c71b986290c91ca1925d558b8b62f"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">AddModal</span> (<span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:300"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:303"><span class="id" title="variable">P</span></a>) <a class="idref" href="WBLogic.program_logic.weakestpre.html#P:303"><span class="id" title="variable">P</span></a> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:302"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:301"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:300"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#655c71b986290c91ca1925d558b8b62f"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<span class="id" title="class">AddModal</span> <span class="id" title="lemma">fupd_frame_r</span> <span class="id" title="lemma">wand_elim_r</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#fupd_wbwp"><span class="id" title="lemma">fupd_wbwp</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="elim_acc_wbwp_atomic" class="idref" href="#elim_acc_wbwp_atomic"><span class="id" title="instance">elim_acc_wbwp_atomic</span></a> {<a id="X:305" class="idref" href="#X:305"><span class="id" title="binder">X</span></a>} <a id="E1:306" class="idref" href="#E1:306"><span class="id" title="binder">E1</span></a> <a id="E2:307" class="idref" href="#E2:307"><span class="id" title="binder">E2</span></a> <a id="09b8da4ef5a39fd8ee6bb16647bddb20" class="idref" href="#09b8da4ef5a39fd8ee6bb16647bddb20"><span class="id" title="binder">α</span></a> <a id="fd56f3a1f3d72c1d979852c0cfab2a0a" class="idref" href="#fd56f3a1f3d72c1d979852c0cfab2a0a"><span class="id" title="binder">β</span></a> <a id="0d18cbb5f70e6bbf8e6dadd6c825e572" class="idref" href="#0d18cbb5f70e6bbf8e6dadd6c825e572"><span class="id" title="binder">γ</span></a> <a id="out:311" class="idref" href="#out:311"><span class="id" title="binder">out</span></a> <a id="e:312" class="idref" href="#e:312"><span class="id" title="binder">e</span></a> <a id="1cff8e45f7575808fb952086140d51a5" class="idref" href="#1cff8e45f7575808fb952086140d51a5"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">ElimAcc</span> (<span class="id" title="var">X</span>:=<a class="idref" href="WBLogic.program_logic.weakestpre.html#X:305"><span class="id" title="variable">X</span></a>) (<span class="id" title="class">Atomic</span> <span class="id" title="constructor">WeaklyAtomic</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:312"><span class="id" title="variable">e</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="definition">fupd</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:306"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:307"><span class="id" title="variable">E2</span></a>) (<span class="id" title="definition">fupd</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:307"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:306"><span class="id" title="variable">E1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#09b8da4ef5a39fd8ee6bb16647bddb20"><span class="id" title="variable">α</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#fd56f3a1f3d72c1d979852c0cfab2a0a"><span class="id" title="variable">β</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0d18cbb5f70e6bbf8e6dadd6c825e572"><span class="id" title="variable">γ</span></a> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:312"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:311"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E1:306"><span class="id" title="variable">E1</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1cff8e45f7575808fb952086140d51a5"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:314" class="idref" href="#x:314"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:312"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:311"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:307"><span class="id" title="variable">E2</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:315" class="idref" href="#v:315"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E2:307"><span class="id" title="variable">E2</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#fd56f3a1f3d72c1d979852c0cfab2a0a"><span class="id" title="variable">β</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#x:314"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#0d18cbb5f70e6bbf8e6dadd6c825e572"><span class="id" title="variable">γ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#x:314"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-∗?</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#1cff8e45f7575808fb952086140d51a5"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:315"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span> | 100.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (?) "Hinner &gt;Hacc". <span class="id" title="var">iDestruct</span> "Hacc" <span class="id" title="keyword">as</span> (<span class="id" title="var">x</span>) "[Hα Hclose]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_wand"><span class="id" title="lemma">wbwp_wand</span></a> <span class="id" title="notation">with</span> "(Hinner Hα)"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "&gt;[Hβ HΦ]". <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hclose".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a id="elim_acc_wbwp_nonatomic" class="idref" href="#elim_acc_wbwp_nonatomic"><span class="id" title="instance">elim_acc_wbwp_nonatomic</span></a> {<a id="X:316" class="idref" href="#X:316"><span class="id" title="binder">X</span></a>} <a id="E:317" class="idref" href="#E:317"><span class="id" title="binder">E</span></a> <a id="a7007212cf23edd3508dc33e489de3ba" class="idref" href="#a7007212cf23edd3508dc33e489de3ba"><span class="id" title="binder">α</span></a> <a id="960d48abab2bfa69448938f66b9c98d5" class="idref" href="#960d48abab2bfa69448938f66b9c98d5"><span class="id" title="binder">β</span></a> <a id="b9e00dee7b639474264675c00e4eeafa" class="idref" href="#b9e00dee7b639474264675c00e4eeafa"><span class="id" title="binder">γ</span></a> <a id="out:321" class="idref" href="#out:321"><span class="id" title="binder">out</span></a> <a id="e:322" class="idref" href="#e:322"><span class="id" title="binder">e</span></a> <a id="c75621eb863d3ee1dbb76dcda1d6ad4a" class="idref" href="#c75621eb863d3ee1dbb76dcda1d6ad4a"><span class="id" title="binder">Φ</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="class">ElimAcc</span> (<span class="id" title="var">X</span>:=<a class="idref" href="WBLogic.program_logic.weakestpre.html#X:316"><span class="id" title="variable">X</span></a>) <span class="id" title="notation">True</span> (<span class="id" title="definition">fupd</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:317"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:317"><span class="id" title="variable">E</span></a>) (<span class="id" title="definition">fupd</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:317"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:317"><span class="id" title="variable">E</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="WBLogic.program_logic.weakestpre.html#a7007212cf23edd3508dc33e489de3ba"><span class="id" title="variable">α</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#960d48abab2bfa69448938f66b9c98d5"><span class="id" title="variable">β</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#b9e00dee7b639474264675c00e4eeafa"><span class="id" title="variable">γ</span></a> (<a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:322"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:321"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:317"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">{{</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c75621eb863d3ee1dbb76dcda1d6ad4a"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c4a2c4d7e3cc404db366e8ac4317091d"><span class="id" title="notation">}}</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="x:324" class="idref" href="#x:324"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.18.0/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">WBWP</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#e:322"><span class="id" title="variable">e</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">@</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#out:321"><span class="id" title="variable">out</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">;</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#E:317"><span class="id" title="variable">E</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">{{</span></a> <a id="v:325" class="idref" href="#v:325"><span class="id" title="binder">v</span></a><a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">,</span></a> <span class="id" title="notation">|={</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#E:317"><span class="id" title="variable">E</span></a><span class="id" title="notation">}=&gt;</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#960d48abab2bfa69448938f66b9c98d5"><span class="id" title="variable">β</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#x:324"><span class="id" title="variable">x</span></a> <span class="id" title="notation">∗</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#b9e00dee7b639474264675c00e4eeafa"><span class="id" title="variable">γ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#x:324"><span class="id" title="variable">x</span></a> <span class="id" title="notation">-∗?</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#c75621eb863d3ee1dbb76dcda1d6ad4a"><span class="id" title="variable">Φ</span></a> <a class="idref" href="WBLogic.program_logic.weakestpre.html#v:325"><span class="id" title="variable">v</span></a><span class="id" title="notation">)</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#0e94461d641dcf3403e79b3abed679d5"><span class="id" title="notation">}}</span></a>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">_</span>) "Hinner &gt;Hacc". <span class="id" title="var">iDestruct</span> "Hacc" <span class="id" title="keyword">as</span> (<span class="id" title="var">x</span>) "[Hα Hclose]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_fupd"><span class="id" title="lemma">wbwp_fupd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <span class="id" title="notation">(</span><a class="idref" href="WBLogic.program_logic.weakestpre.html#wbwp_wand"><span class="id" title="lemma">wbwp_wand</span></a> <span class="id" title="notation">with</span> "(Hinner Hα)"<span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "&gt;[Hβ HΦ]". <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "Hclose".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="WBLogic.program_logic.weakestpre.html#proofmode_classes"><span class="id" title="section">proofmode_classes</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
